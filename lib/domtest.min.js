/*!
 * DomTest v0.10.24
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2015 Atma.js and other contributors
 */
!function(e,t){function n(){var e;if(null==i&&(e="MaskJS"),e)throw Error(e+" was not loaded");var n=t(r,i,o,a);return"undefined"!=typeof module&&module.exports?void(module.exports=n):"undefined"!=typeof define&&define.amd?void define(function(){return n}):void(r.DomTest=n)}var r="undefined"!=typeof global?global:window,i=r.mask||r.atma&&r.atma.mask,o=r.jQuery||r.$,a=r.assert||{};n()}(this,function(e,t,n,r){"use strict";function i(e,t,n,r){var i;return(i=new _e).process.apply(i,arguments)}var o;!function(e,t){!function(){function r(e){return Array.isArray(e)}function i(e){return"number"==typeof e}function o(e){return"string"==typeof e}function a(e){return void 0===e}function s(e){return"RegExp"===h(e)}function u(e){return"object"==typeof e&&null!==e}function l(e){return"function"==typeof e}function c(e){return"undefined"==typeof Buffer?!1:e instanceof Buffer}function f(e){return"Arguments"===h(e)}function p(e,t){return 0==o(e)?e:e.length<t?e:e.slice(0,t)}var h,d,v,g,y=Array.prototype.slice,m={errors:0};!function(){function e(e){var t=[];for(var n in t)t.push(n);return t}h=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},d=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},g=Object.keys?Object.keys:e,v=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)e[n]=t[n];return e}}();var b;!function(){b=function(e){if(null==e)return"";for(var t=e.split("\n"),n=1,r=t.length,i=/(^([ \t]*at )?[\w\.]*assert[_\.])|(^([ \t]*at )?\w+\.assert)/i,o=/(^([ \t]*at )?runCase)/i,a=0,s=t.length;++a<s;)if(i.test(t[a])&&(n=a+1),o.test(t[a])){r=a;break}return t.splice(r),t.splice(1,n-1),t.join("\n")}}();var _,E;!function(){function t(t,r){if(null==e.getComputedStyle)return n(t).css(r);var i=e.getComputedStyle(t),o=i.getPropertyValue(r);return""===o?t.style.getPropertyValue(r):o}var r={};!function(){function e(e){return function(t){return n(t,e)}}function n(e,n){var r=[],i=!0,o=null;return["top","right","bottom","left"].forEach(function(a){var s=n.replace("%anchor",a),u=t(e,s);i=null==o||o===u,o=u,r.push(u)}),i?r[0]:r.join(" ")}v(r,{"border-width":e("border-%anchor-width"),padding:e("padding-%anchor"),margin:e("margin-%anchor")})}(),function(){function e(e){return function(t,r){return n(t,e,r)}}function n(e,n,r){var l=t(e,n);if(a(l))return l;var c=u(r);return c===l?r:o(r)&&i(l)?s(l):l}function i(e){return/^rgb/.test(e)}function o(e){return/^#/.test(e)}function a(e){return null==e||""===e}function s(e){var t=l.exec(e);if(null==t||4!==t.length)return e;var n=Math.round(parseFloat(t[1])),r=Math.round(parseFloat(t[2])),i=Math.round(parseFloat(t[3]));return"#"+(n+65536).toString(16).substring(3).toUpperCase()+(r+65536).toString(16).substring(3).toUpperCase()+(i+65536).toString(16).substring(3).toUpperCase()}function u(e){return null==c&&(c=document.createElement("div"),document.body.appendChild(c)),c.style.color=e,getComputedStyle(c).color}v(r,{"background-color":e("background-color"),color:e("color")});var l=/rgba? *\( *([0-9]{1,3}) *, *([0-9]{1,3}) *, *([0-9]{1,3})/,c=null}(),_=function(e,n,i){var o=r[n];return o?o(e,i):t(e,n)},E=function(e){if(null==e)return!1;var n=t(e,"display");if("none"===n)return!1;var n=t(e,"visibility");return"hidden"===n?!1:!0}}();var w;!function(){function e(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=t(this),this.generatedMessage=!0);var n=e.stackStartFunction||w;Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack,this.stack=b(this.stack)}function t(e){var t=JSON.stringify(e.actual,n),r=JSON.stringify(e.expected,n);return p(t,128)+" "+e.operator+" "+p(r,128)}function n(e,t){return a(t)?""+t:!i(t)||!isNaN(t)&&isFinite(t)?l(t)||s(t)?t.toString():t:t.toString()}w=function(t,n,r,i,o){var a=new e({message:r,actual:t,expected:n,operator:i,stackStartFunction:o});throw a},m.AssertionError=e,m.fail=function(t){var n=t;throw"string"==typeof t&&(n=new e({message:message})),m.errors++,n},m.prepairStack=b,d(e,Error)}(),function(){function e(e,n,i,a){var s,u,c;if(r(n)){var f=y.call(n);u=f.shift(),c=f}l(n)&&(u=n,c=[]),o(i)&&(a=i,i=null);try{u.apply(null,c)}catch(p){s=p}if(a=""+(i&&i.name&&" ("+i.name+")."||".")+(a&&" "+a||"."),e===!0&&null==s&&w(s,i,"Missing expected exception"+a),e===!1&&t(s,i)&&w(s,i,"Got unwanted exception"+a),e&&s&&i&&!t(s,i)||!e&&s)throw s}function t(e,t){return e&&t?s(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}m["throws"]=function(t,n,r){e.apply(this,[!0].concat(y.call(arguments)))},m.doesNotThrow=function(t,n){e.apply(this,[!1].concat(y.call(arguments)))},m.ifError=function(e){if(e)throw e}}(),function(){function e(){for(var e,t,n,r,i,o=arguments.length;--o>-1;)switch(i=arguments[o],typeof i){case"function":e=i;break;case"object":n=i;break;case"number":r=i;break;case"string":t=i}null==this.callbacks&&(this.callbacks=[]),(isNaN(r)||1>r)&&(r=1);var a=this.callbacks,s={count:r,name:t,stack:b((new Error).stack)};return a.push(s),function(){return 0===--s.count&&a.splice(a.indexOf(s),1),"function"!=typeof e?null:e.apply(n,arguments)}}function t(){for(var e,t,n,r="function",i=0,o=arguments.length;--o>-1;)switch(n=arguments[o],typeof n){case"function":t=n;break;case"object":e=n;break;case"number":i=n;break;case"string":r=n}var a=this.callbacks;return null==a&&(a=this.callbacks=[]),function(n){if(--i<0){var o={count:i,name:"<avoid>"+(r||""),argument:n};a.push(o)}t&&t.apply(e,arguments)}}m.callbacks=[],m.await=e,m.avoid=t}(),function(){m.ok=function i(e,t){e||w(e,!0,t,"==",i)};var e,t,n,r;e=m.equal=function o(e,t,n){e!=t&&w(e,t,n,"==",o)},t=m.notEqual=function a(e,t,n){e==t&&w(e,t,n,"!=",a)},n=m.strictEqual=function s(e,t,n){e!==t&&w(e,t,n,"===",s)},r=m.notStrictEqual=function u(e,t,n){e===t&&w(e,t,n,"!==",u)},m.eq_=e,m.notEq_=t,m.strictEq_=n,m.notStrictEq_=r}(),function(){function e(e,n){if(null==e||null==n)return e==n;if(e===n)return!0;f(e)&&(e=y.call(e)),f(e)&&(e=y.call(e));var r=h(e);switch(r){case"Number":case"Boolean":case"String":return e==n;case"RegExp":case"Date":return e.toString()===n.toString()}if(c(e)&&c(n)){if(e.length!=n.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=n[i])return!1;return!0}return u(e)||u(n)?t(e,n):e===n}function t(t,n){var r,i,o=g(t).sort(),a=g(n).sort();if(o.length!=a.length)return!1;for(i=o.length;-1!==--i;)if(o[i]!=a[i])return!1;for(i=o.length;-1!==--i;)if(r=o[i],!e(t[r],n[r]))return!1;return!0}var n,r;m.deepEqual=n=function i(t,n,r){e(t,n)===!1&&w(t,n,r,"deepEqual",i)},m.notDeepEqual=r=function o(t,n,r){e(t,n)===!0&&w(t,n,r,"notDeepEqual",o)},m.deepEq_=n,m.notDeepEq_=r}(),function(){var e,t,n,r;e=m.lessThan=function(t,n,r){t<Number(n)&&w(t,n,r,"<",e)},t=m.lessThanOrEqual=function(t,n,r){t<=Number(n)&&w(t,n,r,"<=",e)},n=m.greaterThan=function(e,t,r){e>Number(t)&&w(e,t,r,">",n)},r=m.greaterThanOrEqual=function(e,t,n){e>=Number(t)&&w(e,t,n,">=",r)},m.lt_=e,m.lte_=t,m.gt_=n,m.gte_=r}(),function(){function e(e){var t=Object.prototype.toString.call(e).replace("[object ","").replace("]","");switch(t){case a:case s:case l:case c:case p:case f:case h:return t;case u:return"number"==typeof e.length&&"function"==typeof e.splice&&"function"==typeof e.indexOf?s:u;case"Null":case"Undefined":return d;default:return v}}function t(e,t,r,i,a){var s=n(e,t);s!==r&&(r!==!1||s===!0)&&("string"==typeof s&&(i="("+s+") "+(i||"")),w(e,t,i,o,a))}function n(t,r){var i,o,g=e(t),y=e(r);switch(g){case l:return l===y?-1!==t.indexOf(r)||"Not a substring of "+t:c===y?r.test(t)||"RegExp failed: "+t:"Unexpected types: String-"+y;case c:case a:case f:case p:case h:return t.toString()===r.toString()||"Unexpected value: "+t;case v:return t===r||"Reference check";case u:if(l===y)return r in t||"Property expected:"+r;if(u===y){for(var m in r){if(m in t==!1)return"Property expected: "+m;if(i=e(t[m]),o=e(r[m]),o!==d){if(i!==o)return"Type missmatch: "+i+"-"+o;if(l!==i){var b=n(t[m],r[m]);if(b!==!0)return b}else if(t[m]!==r[m])return"Unexpected value: "+t[m]}}return!0}return"Unexpected types: Object-"+y}if(s===g)switch(y){case f:case l:case p:return-1!==t.indexOf(r)||"Array should contain: "+r;case a:case c:case h:var _=r.toString();return t.some(function(e){return e.toString()===_})||"Array should contain: "+_;case s:var E,w=0,x=r.length,k=t.length;e:for(;x>w;w++)switch(o=e(r[w])){case l:case f:case p:case c:case a:case h:var b=n(t,r[w]);if(b!==!0)return b;continue e;case u:case s:for(E=0;k>E&&(o!==e(t[E])||n(t[E],r[w])!==!0);E++);if(E===k)return o+" is not a subset";continue e}return!0}return"Unexpected types: "+g+"-"+y}var r,i;r=m.has=function g(e,n,r){t(e,n,!0,r,g)},i=m.hasNot=function y(e,n,r){t(e,n,!1,r,y)},m.has_=r,m.hasNot_=i;var o="âŠ‡",a="Date",s="Array",u="Object",l="String",c="RegExp",f="Number",p="Boolean",h="Function",d="<undefined>",v="<reference-check>"}(),function(){function e(e,n,r,i,o){var a=t(e,n);a!==r&&w(e,n,i,"~~",o)}function t(e,n){if(null==n)return e==n;if("string"==typeof n){var r=h(e);switch(n){case"Object":return null!=e&&"object"==typeof e}return r===n}return"function"==typeof n?e instanceof n:"object"==typeof n&&n.constructor?t(e,n.constructor):!1}var n,r;n=m.is=function i(t,n,r){e(t,n,!0,r,i)},r=m.isNot=function o(t,n,r){e(t,n,!1,r,o)},m.is_=n,m.isNot_=r}(),function(){function t(e){var t={},i=["eq_","notEq_","deepEq_","notDeepEq_","has_","hasNot_","is_","isNot_","lt_","lte_","gt_","gte_"];i.forEach(function(e){function i(e,t,n,r){if("css"===t&&1===n.length&&0!==e.length){var i=e.get(0),o=n[0];return _(i,o,r)}var a=e[t];return"function"==typeof a?a.apply(e,n):a}function o(e,t,n,r){m[e](t,n,r)}t[e]=function(t){var a,s=y.call(arguments),u=e;switch(r(t)&&(a=s[s.length-1],s=t),u){case"is_":case"isNot_":if(1===s.length){var l=s[0];if("visible"===l||"hidden"===l){var c=E(this[0]);return"isNot_"===e&&(l="visible"===l?"hidden":"visible"),"visible"===l&&eq_(c,!0,"Element should be visible"),void("hidden"===l&&eq_(c,!1,"Element should be hidden"))}s.unshift("is"),s.push(!0),u="is_"===u?"eq_":"notEq_"}break;case"has_":case"hasNot_":var f=s[0];if("string"!=typeof f)break;if(null!=this[f]&&1!==s.length)break;var p=s[1],h=this.find(f);if(0===h.length&&(h=this.filter(f)),0===h.length&&(h=n(this,f)),"has_"===u){if(isNaN(p))return o("notEq_",h.length,0,a),this;o("eq_",h.length,p,a)}if("hasNot_"===u){if(isNaN(p))return o("eq_",h.length,0,a),this;o("notEq_",h.length,p,a)}return this}var d,v=s.pop(),l=s.shift();return"string"==typeof l&&(d=i(this,l,s,v)),"function"==typeof l&&(d=l(this)),o(u,d,v,a),this}}),i.forEach(function(n){m.$[n]=function(){var e=y.call(arguments),r=e.shift();return t[n].apply(r,e)},void 0===e.fn[n]&&(e.fn[n]=t[n])})}function n(e,t){var n=i();return e.each(function(e,r){if(null!=r&&null!=r.querySelectorAll){var i=r.querySelectorAll(t);n=n.add(i)}}),n}m.setDOMLibrary=t,m.$={};var i=e.$||e.jQuery||e.Zepto||e.Kimbo;null!=i&&t(i)}(),function(){function e(e){var n=t[e];if(null==n)return!1;var r=n.length;if(0===r)return!1;for(var i,o=y.call(arguments,1);-1!==--r;)i=n[r],i.apply(null,o);return!0}!function(e,t){function n(e){return function(){var n;t("start");try{n=e.apply(this,arguments)}catch(r){if(t("fail",r)===!1)throw r;return null}return t("success"),n}}for(var r in e)if("function"==typeof e[r]){switch(r){case"callback":case"await":case"avoid":case"prepairStack":case"on":case"off":continue}r[0]!==r[0].toUpperCase()&&(e[r]=n(e[r]))}}(m,e),m.on=function(e,n){null==t[e]&&(t[e]=[]),t[e].push(n)},m.off=function(e,n){var r=t[e];if(null!=r){if(null==n)return void(r.length=0);for(var i=r.length;-1!==--i;)r[i]===n&&r.splice(i,1)}};var t={}}(),t.assert=v(m.ok,m)}(),o=t.assert}(e,{});var a=Array.prototype.slice,s=Array.prototype.splice,u=Array.prototype.indexOf,l=null,c=Object.hasOwnProperty,f=Object.getOwnPropertyDescriptor,p=Object.defineProperty,h,d,v,g,y;if(function(){h=function(e,t,n){if(null==n&&(n=e),null==e)return e;for(var r=e.length,i=0;r>i;i++)t.call(n,e[i],i);return n},g=function(e,t){if(null==e)return-1;for(var n=e.length,r=0;n>r;r++)if(e[r]===t)return r;return-1},d=function(e,t){var n=g(e,t);return-1===n?!1:(e.splice(n,1),!0)},v=function(e,t,n){var r=new Array(e.length);return h(e,function(e,n){r[n]=t.call(this,e,n)},n),r},y=function(e,t,n){for(var r=e.length,i=0;r>i;i++)if(t.call(n||e,e[i],i))return!0;return!1}}(),void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){h(this,e,t)}),void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(e){return g(this,e)}),null==String.prototype.trim&&(String.prototype.trim=function(){var e,t=-1,n=this.length;if(0===n)return this;for(;++t<n&&(e=this.charCodeAt(t),!(e>32)););for(;0!==--n&&(e=this.charCodeAt(n),!(e>32)););return 0!==t&&n!==length-1?this.substring(t,n+1):this}),null==Function.prototype.bind){var a;Function.prototype.bind=function(){if(arguments.length<2&&"undefined"==typeof arguments[0])return this;var e=this,t=a.call(arguments),n=t.shift();return function(){return e.apply(n,t.concat(a.call(arguments)))}}}var m,b,_,E,w,x,k,A,T,C;!function(){m=function(e){return"function"==typeof e},w=function(e){return null!=e&&"object"==typeof e},b=_=function(e){return null!=e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.slice},E=function(e){return"string"==typeof e},x=function(e){return"string"==typeof e&&""!==e},k=function(e){return null==e||"object"!=typeof e?!1:e.constructor===Object},A=function(e){return null==e||"object"!=typeof e?!1:null!=e.getFullYear&&isNaN(e)===!1?!0:!1},C="undefined"!=typeof window&&null!=window.navigator,T=!C}();var S,R,D,N,O,P,j,q,M,K,L;!function(){S=function(e,t){if("."===t)return e;for(var n=e,r=t.split("."),i=r.length,o=-1;null!=n&&++o<i;)n=n[r[o]];return n},R=function(e,t,n){for(var r,i=e,o=t.split("."),a=o.length-1,s=-1;++s<a;)r=o[s],null==i[r]&&(i[r]={}),i=i[r];i[o[s]]=n},D=function(e,t){var n=S(e,t);return void 0!==n},L=function(e,t,n){for(var r,i=e,o=t.split("."),a=o.length-1,s=-1;++s<a;)r=o[s],null==i[r]&&(i[r]={}),i=i[r];return r=o[a],p?(void 0===n.writable&&(n.writable=!0),void 0===n.configurable&&(n.configurable=!0),void 0===n.enumerable&&(n.enumerable=!0),void p(i,r,n)):void(i[r]=void 0===n.value?n.value:n.get&&n.get())},N=function(e,t){if(null==t)return e||{};if(null==e)return M(t);for(var n in t)e[n]=t[n];return e},O=function(e,t){if(null==t)return e||{};if(null==e)return M(t);for(var n in t)null==e[n]&&(e[n]=t[n]);return e};var e=function(e){return null==f?e?N:O:function(t,n){if(null==n)return t||{};if(null==t)return M(n);var r,i,o;for(r in n)i=f(n,r),null!=i&&(e===!0||(o=f(t,r),null==o))&&(i.hasOwnProperty("value")?t[r]=i.value:p(t,r,i));return t}};j=e(!0),q=e(!1),P=function(e){for(var t=arguments.length,n=1;t>n;n++)e=N(e,arguments[n]);return e},K=function(e){function t(){}t.prototype=e,new t},l=M=Object.create||function(e){var t=function(){};return t.prototype=e,new t}}();var U,$,F,I,H;!function(){U=function(e,t){var n=e.indexOf(t);return-1===n?!1:(e.splice(n,1),!0)},$=function(e,t,n){e.forEach(t,n)},F=function(e,t){return e.indexOf(t)},I=function(e,t){return-1!==e.indexOf(t)},H=function(e,t){if(null!=t&&null!=e&&e!==t)for(var n=e.length,r=t.length,i=-1;++i<r;)e[n+i]=t[i]}}();var B,X,Y,W;!function(){B=function(e,t){return function(){return X(e,t,arguments)}},X=function(e,t,n){var r=n.length;return 0===r?e.call(t):1===r?e.call(t,n[0]):2===r?e.call(t,n[0],n[1]):3===r?e.call(t,n[0],n[1],n[2]):4===r?e.call(t,n[0],n[1],n[2],n[3]):e.apply(t,n)},Y=function(){return!1},W=function(e,t){var n=e.length;return function(){var r,i=arguments.length,o=-1;e:for(;++o<n;)if(r=e[o],r.pattern.length===i){for(var a=-1;++a<i;){var s=r.pattern[a],u=arguments[a];if(s(u)===!1)continue e}return r.handler.apply(t,arguments)}return console.error("InvalidArgumentException for a function",e,arguments),null}}}();var G;!function(){G=function(t){for(var n,r=arguments.length,i=0;++i<r;)n=arguments[i],w(n)&&n.toJSON&&(n=n.toJSON()),t=t.replace(e(i-1),String(n));return t};var e;!function(){e=function(e){return t[e]||(t[e]=new RegExp("\\{"+e+"\\}","g"))};var t={}}()}();var Q,V;!function(){function e(e){return function(){var r=a.call(arguments),i=r.pop();null==i&&(i={});for(var o,s,u=i.hasOwnProperty("constructor")?i.constructor:function(){},l=r.length;--l>-1;)s=r[l],"function"==typeof s&&(o=n(s,o),s=s.prototype),e(i,s);return t(n(o,u),i)}}function t(e,t){return t.constructor=e,e.prototype=t,e}function n(e,t){return null==e?t:null==t?e:function(){var n=a.call(arguments),r=e.apply(this,n);return void 0!==r?r:t.apply(this,n)}}Q=e(O),V=e(q)}();var z,J,Z,ee;!function(){function e(e,n){var r=e.hasOwnProperty("constructor")?e.constructor:null;return function(){L(this,"stack",{value:t(n||3)}),L(this,"message",{value:G.apply(this,arguments)}),null!=r&&r.apply(this,arguments)}}function t(e){var t=(new Error).stack;return null==t?null:t.split("\n").slice(e).join("\n")}z=function(t,n,r){var i=e(n,r);return i.prototype=new Error,n.constructor=Error,n.name=t,N(i.prototype,n),i},J=function(e,t,n){var r=ee(e,t),i=r[0],o=r[1],a=r[2],s="";return null!=n&&(s+=G(" at {0}({1}:{2})\n",n,o,a)),s+Z(i,o,a)},ee=function(e,t){var n=e.substring(0,t).split("\n"),r=n.length,i=t+1-n.slice(0,r-1).join("\n").length;return r>1&&(i-=1),[e.split("\n"),r,i]},function(){function e(e,t){for(var n=String(e);n.length<t;)n+=" ";return n}function t(e,t){for(var n="";--t>-1;)n+=e;return n}Z=function(n,r,i){var o=3,a=2,s=r-o,u=s+o+a,l="";0>s&&(s=0),u>n.length&&(u=n.length);for(var c,f=String(u).length;u>s;s++)l&&(l+="\n"),c=e(s+1,f),l+=c+"|"+n[s],s+1===r&&(l+="\n"+t(" ",f+1),l+=n[s].substring(0,i-1).replace(/[^\s]/g," "),l+="^");return l}}()}();var te;!function(){function e(e,t,n,r){return null==r?e:(null!=t?X(r,e,t):n.push(r),e)}function t(e){e._done=null,e._fail=null,e._always=null}function n(e,t,n){if(null!=e){for(var r,i=e.length,o=-1;++o<i;)r=e[o],r&&X(r,t,n);e.length=0}}function r(e){return null==e||"object"!=typeof e?!1:e instanceof te?!0:"function"==typeof e.done&&"function"==typeof e.fail}te=function(){},te.prototype={_isAsync:!0,_done:null,_fail:null,_always:null,_resolved:null,_rejected:null,defer:function(){return this._rejected=null,this._resolved=null,this},isResolved:function(){return null!=this._resolved},isRejected:function(){return null!=this._rejected},isBusy:function(){return null==this._resolved&&null==this._rejected},resolve:function(){var e=this._done,r=this._always;return this._resolved=arguments,t(this),n(e,this,arguments),n(r,this,[this]),this},reject:function(){var e=this._fail,r=this._always;return this._rejected=arguments,t(this),n(e,this,arguments),n(r,this,[this]),this},then:function(e,t){return this.pipe(e,t)},done:function(t){return null!=this._rejected?this:e(this,this._resolved,this._done||(this._done=[]),t)},fail:function(t){return null!=this._resolved?this:e(this,this._rejected,this._fail||(this._fail=[]),t)},always:function(t){return e(this,this._rejected||this._resolved,this._always||(this._always=[]),t)},pipe:function(e){function t(e,t,n){return function(){if(null!=n){var i=n.apply(this,arguments);if(null!=i)return r(i)===!0?void i.pipe(e):void e[t](i)}e[t].apply(e,arguments)}}var n;if("function"==typeof e){n=new te;var i=e,o=arguments.length>1?arguments[1]:null;return this.done(t(n,"resolve",i)).fail(t(n,"reject",o)),n}n=e;for(var a,s=arguments.length,u=1===s,l=1===s,c=0;++c<s;)switch(a=arguments[c]){case"done":u=!0;break;case"fail":l=!0;break;default:console.error("Unsupported pipe channel",arguments[c])}return u&&this.done(t(n,"resolve")),l&&this.fail(t(n,"reject")),this},pipeCallback:function(){var e=this;return function(t){if(null!=t)return void e.reject(t);var n=a.call(arguments,1);X(e.resolve,e,n)}},resolveDelegate:function(){return B(this.resolve,this)},rejectDelegate:function(){return B(this.reject,this)}},te.run=function(e,t){var n=new te;return null==t&&(t=n),e.call(t,B(n.resolve,t),B(n.reject,n),n),n}}();var ne;!function(){function e(){var e,t,n=a.call(arguments),r=n.shift(),i=this._listeners[r],o=0;if(null==i)return this;for(t=i.length;t>o;o++)e=i[o],X(e,this,n),e._once===!0&&(i.splice(o,1),o--,t--);return this}ne=function(){this._listeners={}},ne.prototype={on:function(e,t){return null!=t&&(this._listeners[e]||(this._listeners[e]=[])).push(t),this},once:function(e,t){return null!=t&&(t._once=!0,(this._listeners[e]||(this._listeners[e]=[])).push(t)),this},pipe:function(e){var t,n=this;return function(){t=a.call(arguments),t.unshift(e),X(n.trigger,n,t)}},emit:e,trigger:e,off:function(e,t){var n=this._listeners[e];if(null==n)return this;if(1===arguments.length)return n.length=0,this;for(var r=n.length,i=-1;++i<r;)n[i]===t&&(n.splice(i,1),i--,r--);return this}}}();var re;!function(){function e(e){return e&&"object"==typeof e&&"function"==typeof e.combine}function t(){for(var e,t=(arguments,""),n=0,r=arguments.length;r>n;n++)e=arguments[n],e&&(t?("/"!==t[t.length-1]&&(t+="/"),t+="/"===e[0]?e.substring(1):e):t=e);return t}function n(e){return"/"===e[e.length-1]?e.substring(0,e.length-1):e}function r(e){var t,n=new re;for(t in e)"string"==typeof e[t]&&(n[t]=e[t]);return n}function i(e){return e.replace(/\\/g,"/").replace(/^\.\//,"").replace(/^(\w+):\/([^\/])/,"/$1:/$2")}function o(e){return p.test(e)&&"/"===e[0]?e.substring(1):e}function a(e){var t=c.exec(e.value);null==t&&"/"===e.value[0]&&(e.protocol="file"),null!=t&&(e.protocol=t[1],e.value=e.value.substring(t[0].length))}function s(e){if(null!=e.protocol){if("file"===e.protocol){var t=p.exec(e.value);return void(t&&(e.host=t[1],e.value=e.value.substring(e.host.length)))}var n=e.value.indexOf("/",2);e.host=~n?e.value.substring(0,n):e.value,e.value=e.value.replace(e.host,"")}}function u(e){var t=e.value.indexOf("?");-1!==t&&(e.search=e.value.substring(t),e.value=e.value.substring(0,t))}function l(e){var t=h.exec(e.value),r=null==t?null:t[1];null!=r&&(e.file=r,e.value=e.value.substring(0,e.value.length-r.length),e.value=n(e.value),t=f.exec(r),e.extension=null==t?null:t[1])}re=Q({protocol:null,value:null,path:null,file:null,extension:null,constructor:function(t){return null==t?this:e(t)?t.combine(""):(t=i(t),this.value=t,a(this),s(this),u(this),l(this),this.path=n(this.value),/^[\w]+:\//.test(this.path)&&(this.path="/"+this.path),this)},cdUp:function(){var e=this.path;return null==e||""===e||"/"===e?this:/^\/?[a-zA-Z]+:\/?$/.test(e)?this:(this.path=e.replace(/\/?[^\/]+\/?$/i,""),this)},combine:function(i){if(e(i)&&(i=i.toString()),!i)return r(this);if(p.test(i))return new re(i);var o=r(this);if(o.value=i,u(o),l(o),!o.value)return o;if(i=o.value.replace(/^\.\//i,""),"/"===i[0])return o.path=i,o;for(;/^(\.\.\/?)/gi.test(i);)o.cdUp(),i=i.substring(3);return o.path=n(t(o.path,i)),o},toString:function(){var e=this.protocol?this.protocol+"://":"",n=t(this.host,this.path,this.file)+(this.search||""),r=e+n;return this.file||this.search||(r+="/"),r},toPathAndQuery:function(){return t(this.path,this.file)+(this.search||"")},toRelativeString:function(e){if("string"==typeof e&&(e=new re(e)),0===this.path.indexOf(e.path)){var n=this.path?this.path.replace(e.path,""):"";return"/"===n[0]&&(n=n.substring(1)),t(n,this.file)+(this.search||"")}for(var r=this.path.split("/"),i=e.path.split("/"),o="",a=0,s=Math.min(r.length,i.length);s>a&&r[a]===i[a];a++);if(a>0&&(o=r.splice(0,a).join("/")),o){for(var u,l="",c=e.path;c;){if(0===this.path.indexOf(c)){u=this.path.replace(c,"");break}c=c.replace(/\/?[^\/]+\/?$/i,""),l+="../"}return t(l,u,this.file)}return this.toString()},toLocalFile:function(){var e=t(this.host,this.path,this.file);return o(e)},toLocalDir:function(){var e=t(this.host,this.path,"/");return o(e)},toDir:function(){var e=this.protocol?this.protocol+"://":"";return e+t(this.host,this.path,"/")},isRelative:function(){return!(this.protocol||this.host)},getName:function(){return this.file.replace("."+this.extension,"")}});var c=/^([a-zA-Z]+):\/\//,f=/\.([\w\d]+)$/i,p=/(^\/?\w{1}:)(\/|$)/,h=/([^\/]+(\.[\w\d]+)?)$/i;re.combinePathes=t,re.combine=t}();var ie,oe,N,ae;!function(){function e(e){var t=[];for(var n in t)t.push(n);return t}ie=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},oe=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},ae=Object.keys?Object.keys:e,N=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)e[n]=t[n];return e}}();var se;!function(){se=console.error.bind(console,"<TestDom>")}();var ue,le,ce;!function(){function e(e){null!=e&&(e.length=0)}ue=function(e,t){if(null!=e)for(var n=0;n<e.length;n++)e[n].apply(null,t||[])},le=function(e,t,n){if(null!=n){var r="_"+t+"Cb",i=e[r];null==i&&(i=e[r]=[]),i.push(n)}},ce=function(t){e(t._rejectCb),e(t._alwaysCb),e(t._resolveCb)}}();var fe=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},pe,he,de,ve;!function(){function e(e,t,n,r){var i=t.expression;return null==i||""===i?[]:e(i,n,null,r)}pe=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return r.unshift(t.Utils.Expression.evalStatements),e.apply(null,r)},he=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return r.unshift(t.Utils.Expression.evalStatements),e.apply(null,r)[0]},de=function(e){var t=null;for(t in e.attr)break;return null==t?null:(delete e.attr[t],t)},ve=function(e){var t=[],n=e.attr,r={},i=!1;for(var o in n)if(o!==n[o])i=!0,r[o]=n[o];else{var a=o;/^[-+\d.]+$/.test(a)&&(a=parseFloat(a)),t.push(a)}for(var s=t.length,u=-1;++u<s&&"number"==typeof t[0];){var l=t.splice(0,1),c=fe(l,1),f=c[0];t.push(f)}return i&&t.push(r),t}}();var ge;!function(){function e(e){return function(t){function n(){return--r<0?t():void setTimeout(n)}var r=e;n()}}ge=e(5)}();var ye={report:null};!function(){i.config=function(e){return"sttring"==typeof e?ye[e]:(N(ye,e),i)}}();var me,be;!function(){me={report:function(e,t){if(ye.report)return void ye.report(e);if(r){if(r.ifError)return void r.ifError(e);if(null!=e&&r.fail)return void r.fail(e)}if(e)throw e}},be=function(e){var n=[],r=t.render("\n			pre > +each(.) > div {\n				span style='color: ~[: errored ? \"red\" : \"green\"]' > '~[hint]'\n				span > '~[text]'\n			}\n		",n);return e.appendChild(r),function(e,t,r){n.push({text:e.formatCurrentLine_(r),hint:r?"âœ˜ ":"âœ“ ",errored:Boolean(r)}),r&&n.push({text:String(r),hint:" "})}}}();var _e=Q(ne,te,{defaultDriver:"domlib",driver:null,runners:null,index:0,constructor:function(e,t){this.driver=Ae.initialize(e||this.defaultDriver,t),this.runners=[]},process:function(e,t,n,r){var i=this;return this.initRunners_.apply(this,arguments),ge(function(){return i.next()}),this},next:function(e){var t=this;if(e){var n=this.runners.reduce(function(e,t){return e.concat(t.errors)},[]);return this.emit("complete",n),void this.reject(e)}if(this.index>=this.runners.length){var n=this.runners.reduce(function(e,t){return e.concat(t.errors)},[]);return this.emit("complete",n),void this.resolve()}this.runners[this.index++].process().done(function(){return t.next()}).fail(function(e){return t.next(e)})},attachReporter:function(e){return this.runners.forEach(function(t){return t.attachReporter(e)}),this},initRunners_:function(e,t,n,r){var i=this;if(0!==arguments.length){var o=t;Array.isArray(t)===!1&&(o=[t]),o.map(function(o){return i.addRunner(e,t,n,r)})}},addRunner:function(e,n,r,i){var o=this,a=n;"string"==typeof a&&(a=t.parse(a),a.type!==t.Dom.FRAGMENT&&(a={nodes:[a]}));var s=we.create(this.driver,e,a,r,i);this.runners.push(s),s.on("progress",function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return o.emit.apply(o,["progress"].concat(t))})}}),Ee=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},we=Q(ne,te,{constructor:function(e,t,n,r,i){this.errors=[],this.model=r,this.compo=i,this.driver=e,this.backtrace=(new Error).stack,this.process=this.process.bind(this),this.next_=this.next_.bind(this),this.wrapAssertion_()},stack:null,assert:null,process:function(e){throw Error("Not implemented")},attachReporter:function(e){return new e(this),this},next_:function(e){this.emit("progress",this,this.getCurrent_().node,e),this.process(e)},getCurrent_:function(){return this.stack[this.stack.length-1]},getCurrentModel_:function(){var e=this.getCurrent_().$;return e.model?e.model()||this.model:this.model},getCurrentCompo_:function(){var e=this.getCurrent_().$;return e.compo?e.compo()||this.compo:this.compo},getCurrentArgs_:function(){var e=this.getCurrent_().node,t=ve(e),n=pe(e,this.getCurrentModel_(),this.getCurrentCompo_());return[].concat(Ee(t),Ee(n))},getNext_:function(e){var t=this.getCurrent_();if(null==t)return null;if(e!==!1&&t.node.nodes)return this.stack.push({$:t.$,node:t.node.nodes[0]}),this.getCurrent_();for(this.stack.pop();this.stack.length>0;){var n=this.getCurrent_(),r=n.node.nodes,i=r.indexOf(t.node);if(i>=r.length-1)t=this.stack.pop();else{if(-1!==i)return this.stack.push({$:n.$,node:r[i+1]}),this.getCurrent_();console.error("Node not found"),t=this.stack.pop()}}return null},check:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];var o=r[0],a=r.slice(1),s=this.assert[o]||this.assert[o+"_"];if("function"!=typeof s&&(a.unshift(o),s=this.assert.equal),a.length<2)throw logger.log("throw",a),Error("Invalid arguments in assertion");var u=a.shift(),l=a.pop(),c=(t=this.driver).getActual.apply(t,[e,u].concat(Ee(a)));return s.call(this.assert,c,l)},checkAsync:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];var o=r[0],a=r.slice(1),s=this.assert[o]||this.assert[o+"_"];if("function"!=typeof s&&(a.unshift(o),s=this.assert.equal),a.length<2)throw logger.log("throw",a),Error("Invalid arguments in assertion");var u=a.shift(),l=a.pop();return te.run(function(n,r){var i;(i=t.driver).getActualAsync.apply(i,[e,u].concat(Ee(a))).done(function(e){var i=s.call(t.assert,e,l);return i?void r(i):void n()}).fail(r)})},try_:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var i;try{e.apply(null,n)}catch(o){i=o}return i},call:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var i=this.try_.apply(this,[e].concat(n));return this.report_(i),i},run_:function(e,t,n){var r;try{e.apply(n,t)}catch(i){r=i}return this.report_(r),r},report_:function(e){e=this.prepairError_(e),me.report(e,this),this.emit(e?"fail":"success",e),e&&this.errors.push(e)},wrapAssertion_:function(){var e=this;if(null!=this.assert)return this.assert;var t=function(t){return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=t&&o[t]||o;return e.call.apply(e,[a].concat(r))}};this.assert=t();for(var n in o)"function"==typeof o[n]&&(this.assert[n]=t(n));return this.assert},prepairError_:function(e){if(null==e)return null;var n=this.getCurrent_().node,r=t.parser.getStackTrace&&t.parser.getStackTrace(n)||"";return Object.defineProperty(e,"stack",{value:r+"\n"+o.prepairStack(this.backtrace),writable:!0,enumerable:!0,configurable:!0}),e.generatedMessage=!1,e},formatCurrentLine_:function(e){for(var n=this.getCurrent_().node,r="",i=n.parent;null!=i&&i.type!==t.Dom.FRAGMENT;)r+="  ",i=i.parent;return r+t.stringify({tagName:n.tagName,attr:n.attr,expression:n.expression},2).slice(0,-1)}});we.create=function(e,t,n,r,i){return"function"==typeof n?xe(e,t,n,r,i):new ke(e,t,n,r,i)};var xe=Q(we,{constructor:function(e,t,n,r){this.container=e,this.model=n,this.fn=t},process:function(){var e=this;try{0===this.fn.length?this.fn():this.fn(function(t){return t?(e.report_(t),void e.reject(t)):void e.resolve()})}catch(t){this.report_(t),this.reject(t)}return this}}),ke=Q(we,{constructor:function(e,t,n,r,i){this.root=t,this.node=n,this.$=null,this.stack=[]},createRoot:function(){var e=this;return this.driver.createRoot(this.root).done(function(t){e.$=t,e.stack=[{
$:t,node:e.node}]})},process:function(e){var t=this;if(null==e&&null==this.$)return this.createRoot().done(function(){return t.process()}).fail(function(e){return t.process(e)}),this;e&&this.errors[this.errors.length-1]!==e&&this.errors.push(e);var n=this.getNext_(null==e);return null==n?(this.emit("complete",this.errors),void(this.errors.length?this.reject(this.errors):this.resolve())):(this.driver.process(this,n,this.next_),this)}}),Ae;!function(){Ae={initialize:function(e){var t=void 0===arguments[1]?null:arguments[1],n=Ae[e]||require(e);return new n(t)}};var r=Q({constructor:function(){this.actors={}},canHandle:function(e,t,n){var r=n.node.tagName,i=this.actors[r];return null==i?!1:"function"==typeof i.canHandle?i.canHandle(e,t,n):!0},process:function(e,t,n,r){var i=n.node.tagName,o=this.actors[i];return"function"==typeof o?void o.apply(void 0,arguments):void o.process.apply(o,arguments)},define:function(e,t){return null==t?this:(this.actors[e]=t,this)}}),i=(Q({trigger:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return(new te).resolve()}}),Q({traverse:function(e,t,n,r){r()}}),function(e){return Array.isArray(e)?e:Array.from(e)}),a=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},s=Q(r,{constructor:function(){var e=this;this.define("with",function(e,t,n,r){var i=t.Traversers.getSelector(n);switch(i){case"model":return n.$=e.getCurrentModel_(),void r()}n.node.tagName="find",t.Traversers.process(e,t,n,r)}),this.define("debugger",function(e,t,n,r){n.$;r()}),this.define("function",function(e,t,n,r){var i=n.node.fn,o=n.$,a=e.wrapAssertion_();return 3===i.length?void i(o,a,r):(i(o,a),void r())}),this.define("do",function(e,t,n,r){var o,s=e.getCurrentArgs_(),u=i(s),l=u[0],c=u.slice(1);(o=t.Events).run.apply(o,[e,t,l,n.$].concat(a(c))).always(function(){return r()})}),this.define("trigger",function(e,t,n,r){var o,s=e.getCurrentArgs_(),u=i(s),l=u[0],c=u.slice(1);(o=t.Events).run.apply(o,[e,t,l,n.$].concat(a(c))).always(function(){return r()})}),this.define("define",function(t,n,r,i){var o=r.node.tagName,a=r.node.nodes;r.node.nodes=null,e.define(o,function(e,t,n,r){n.node.nodes=a,r()}),i()}),this.define("call",function(e,t,n,r){var i=de(n.node),o=e.getCurrentArgs_(),s=n.$,u=s[i];if("function"!=typeof u)return void r(""+i+" is not a function");var l=e.try_.apply(e,[u.bind(s)].concat(a(o)));return l?void r(l):void setTimeout(r)}),this.define("await",function(e,n,r,i){function o(){n.Traversers.actors.find.traverse(p,u,function(t){return n.Traversers.isEmpty(t)?c>f?(f+=l,void setTimeout(o,l)):void i("<await> Elements are not resolved: "+u):void n.Traversers.run(e,n,"find",p,u).done(function(){return i()})})}var a=r.node.expression;if(null==a)return void i("`await` node expect expression: timeout ms or a selector");var s=t.Utils.Expression.eval(a);if("number"==typeof s)return void setTimeout(i,s);var u=n.Traversers.getSelector(r),l=100,c=1600,f=0,p=r.$;o()})}}),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},l=Q(r,{process:function(e,t,n,r){var i=n.node.tagName,o=n.$,a=e.getCurrentArgs_(),s=this.actors[i];return s?void s(e,t,o,a,r):void this.assert(e,t,o,i,a,r)},canHandle:function(e,t,n){return t.isOwnCtx(n.$)},assert:function(e,t,n,r,i,o){throw Error("Not implemented")},canHandleBase:function(e,t,n){var r=n.node.tagName,i=n.$,o=e.assert[r]||e.assert[r+"_"];if("function"!=typeof o)return void 0!==i[r];var a=e.getCurrentArgs_(),s=u(a,1),l=s[0];return void 0!==i[l]},processBase:function(e,t,n,r){var i=n.node.tagName,o=n.$,s=e.getCurrentArgs_(),u=e.check.apply(e,[o,i].concat(a(s)));r(u)}}),a=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},c=Q(r,{process:function(e,t,n,r){var i=n.node.tagName,o=e.getCurrentArgs_()||[],s=n.$;this.run.apply(this,[e,t,i,s].concat(a(o))).done(function(){return r()}).fail(r)},run:function(e,t,n,r){for(var i=this,o=arguments.length,a=Array(o>4?o-4:0),s=4;o>s;s++)a[s-4]=arguments[s];return te.run(function(o,s){t.beforeEvent&&t.beforeEvent(e);var u=i.actors[n];if(null==u)return void s("Event is not defined for the current driver: "+n);var l=u.call.apply(u,[i,r].concat(a));return null==l?void setTimeout(o):void l.always(function(){return setTimeout(o)})})}}),f=Q(r,{isEmpty:function(e){return null==e?!0:"number"==typeof e.length?0===e.length:!1},process:function(e,t,n,r){var i=this.getSelector(n),o=n.node.tagName,a=n.$;this.run(e,t,o,a,i).done(function(){return r()}).fail(r)},getSelector:function(e){var t=e.node.expression;return/^\s*('|")/.test(t)&&(t=he(e.node)),t},run:function(e,t,n,r,i){var o=this;return te.run(function(t,a){var s=o.actors[n];return null==s?void a("Traverser is not found in current driver: "+n):void s.traverse(r,i,function(r){var s=e.assert.notEqual(o.isEmpty(r),!0,"Selector does not matched any elements: "+n+"('"+i+"')");return s?void a(s):(e.getCurrent_().$=r,void t())})})}}),p=Q({Traversers:new f,Events:new c,Actions:new s,Assertions:new l,options:null,constructor:function(){var e=void 0===arguments[0]?{}:arguments[0];this.options=e},process:function(e,t,n){for(var r=["Traversers","Events","Actions","Assertions"],i=r.length,o=-1;++o<i;){var a=this[r[o]];if(a.canHandle(e,this,t))return void a.process(e,this,t,n)}return this.Assertions.canHandleBase(e,this,t)?void this.Assertions.processBase(e,this,t,n):void n("Uknown strategy: "+t.node.tagName)},createRoot:function(e){return(new te).reject("Not implemented")},getActual:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=e[t];return"function"==typeof o?o.apply(e,r):o},getActualAsync:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=e[t];return"function"==typeof o?o.apply(e,r):e.then(function(e){return e[t]})}});!function(){var r,i;!function(){function e(e){return null!=n.fn[e]}function t(e,t,n){if(null!=e.eq_)return n.unshift(t),void e.eq_.apply(e,n);var r=e[t],i=n.pop();if("function"==typeof r){var a=r.apply(e,n);return void o.equal(a,i)}o.equal(r,i)}function a(e){return null!=o.$[e+"_"]}function s(e,t,n){o.$[t+"_"].apply(e,[e].concat(n))}r=function(n){return a(n)?s:e(n)?t:void 0},i=function(e,t,n){"function"!=typeof o[t]&&(e=e[t],t="equal"),o[t].apply(o,[e].concat(n))}}();var a;!function(){a=function(e,t){for(var r,i,o=n(),a=e.length,s=-1;++s<a;)i=e[s],null!=i.querySelectorAll&&(r=i.querySelectorAll(t),o=o.add(r));return o}}();var u;!function(){u=function(e){for(var t=e.$.get(0).parentNode,n=!1;null!=t;){if(t.nodeType===Node.DOCUMENT_NODE){n=!0;break}t=t.parentNode}n||(e.$.appendTo("body"),e.always(function(){return e.$.remove()}))}}();var h=Q(f,{}),d=Q(c,{}),v=Q(s,{}),g=Q(l,{assert:function(e,t,n,i,o,a){var s=r(i);if(s){var u=e.call(s,n,i,o);return void a(u)}a("Uknown test function "+i)}}),y=Ae.domlib=Ae.Default=Q(p,{Traversers:new h,Events:new d,Actions:new v,Assertions:new g,domLib:null,createRoot:function(e){var t=e;t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(t=t.childNodes),t.nodeType===Node.DOCUMENT_NODE&&(t=t.body),this.domLib=this.getDomLibrary_(t);var n=new te,r=this.domLib(t);return 0===r.length?n.reject("Set is empty. No elements to test"):n.resolve(r)},beforeEvent:function(e){u(e)},getDomLibrary_:function(n){var r=null!=n&&("number"==typeof n.length?n[0]:n);if(null==r)return e.$;var i=r.ownerDocument.defaultView,o=i.$||i.jQuery||window.$||window.jQuery||t.Compo.config.getDOMLibrary();return o.fn.simulate=e.$.fn.simulate,o},isOwnCtx:function(e){return null==e?!1:null==e.constructor.fn?!1:e.constructor===this.domLib.fn.constructor}});!function(){y.prototype.Events.define("type",function(e,t){var n=new te;return e.simulate("key-sequence",{sequence:t,delay:10,callback:function(){e.removeData("simulate-keySequence.selection").off("keyup.simulate-keySequence").off("mouseup.simulate-keySequence"),n.resolve()}}),n})}(),function(){y.prototype.Events.define("press",function(e,t){e.simulate("key-combo",{combo:t})})}();var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(){function e(e,t){function n(e,n){var r=e.text();return-1!==r.trim().indexOf(t)}function r(e){return function(n){return n.attr(e).trim()===t}}function i(t){null==a&&(a=e.children("option"));for(var n,r=a.length,i=0;r>i;i++)if(n=a.eq(i),t(n,i)===!0)return[n,i];return null}var a,s=i(n);null==s&&(s=i(r("value"))),null==s&&(s=i(r("name"))),null==s&&(s=i(r("id"))),o.notEqual(s,null,"Option not found: "+t);var u=m(s,2),l=u[0],c=u[1];e.get(0).selectedIndex=c,l.simulate("click"),e.trigger("change")}function t(e,t){function n(t,n){return void 0!==e.selectionStart?(e.selectionStart=t,void(e.selectionEnd=n)):void 0!==e.setSelectionRange?void e.setSelectionRange(t,n):void console.error("<DomTest> Unable to selec the range")}var r=e.value;if(0===t.length)return void n(0,r.length-1);var i=m(t,1),o=i[0];if("string"==typeof o){var a=r.indexOf(o);return void(-1!==a&&n(a,a+o.length))}var s=m(t,2),a=s[0],u=s[1];"number"==typeof a&&"number"==typeof u&&n(a,u)}y.prototype.Events.define("select",function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;r>a;a++)i[a-1]=arguments[a];var s=n.filter("select").eq(0);if(0!==s.length){var u=i[0];return void e(s,u)}var s=n.filter("input, textarea").eq(0);return 0!==s.length?(s.get(0).focus(),void t(s.get(0),i)):void o(!1,'`Select` should be invoked in "input" or "select" context')})}(),function(){function e(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];var o=t.simulate||t.trigger;o.call.apply(o,[t,e].concat(r))}}["blur","focus","load","resize","scroll","unload","beforeunload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","submit","keydown","keypress","keyup"].forEach(function(t){y.prototype.Events.define(t,e(t))})}();var b=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(){y.prototype.Actions.define("select",function(e,n,r,i){var o,a=r.node.expression;if(null==a)throw Error("`caret` node expect expression: position number");var s=t.Utils.Expression.evalStatements(a);(o=r.$).select.apply(o,b(s)).done(function(){return i()})})}();var b=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(){y.prototype.Assertions.define("hasClass",function(e,t,n,r,i){1===r.length&&r.push(!0);var o=e.check.apply(e,[n,"hasClass"].concat(b(r)));i(o)})}(),y.prototype.Traversers.define("eq",{traverse:function(e,t,n){var r=e.eq(t);n(r)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),y.prototype.Traversers.define("find",{traverse:function(e,t,n){var r=e.find(t);0===r.length&&(r=e.filter(t)),0===r.length&&(r=a(e,t)),n(r)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),["filter","closest","children","siblings"].forEach(function(e){y.prototype.Traversers.define(e,{traverse:function(t,n,r){var i=t[e](n);r(i)}})})}(),function(){var e=Q(f,{}),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Q(l,{assert:function(e,t,r,i,o,a){var s=void 0===arguments[4]?[]:arguments[4],u=e.check.apply(e,[r,i].concat(n(s)));a(u)}}),i=Ae.jmask=Q(p,{Traversers:new e,Assertions:new r,createRoot:function(e){var n=t.jmask(e),r=new te;return 0===n.length?r.reject("Set is empty. No elements to test"):r.resolve(n)},isOwnCtx:function(e){return null==e?!1:e.constructor===t.jmask}}),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(){i.prototype.Assertions.define("hasClass",function(e,t,r,i,o){1===i.length&&i.push(!0);var a=e.check.apply(e,[r,"hasClass"].concat(n(i)));o(a)})}(),i.prototype.Traversers.define("eq",{traverse:function(e,t,n){var r=e.eq(t);n(r)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),i.prototype.Traversers.define("find",{traverse:function(e,t,n){var r=e.find(t);0===r.length&&(r=e.filter(t)),n(r)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),["filter","closest","children"].forEach(function(e){i.prototype.Traversers.define(e,{traverse:function(t,n,r){var i=t[e](n);r(i)}})})}(),function(){var e=Q(f,{}),t=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},n=Q(l,{assert:function(e,n,r,i,o,a){var s=void 0===arguments[4]?[]:arguments[4],u=e.check.apply(e,[r,i].concat(t(s)));a(u)}}),r=Ae.cheerio=Q(p,{Traversers:new e,Assertions:new n,cheerio:null,createRoot:function(e){var t=this;return te.run(function(n,r){if(null==e)return void r("Root context is undefined");if("string"!=typeof e)return void n(e);var i=e.trim();if(""===i)return void r("Root context is empty");var o=t.cheerio=require("cheerio");if(/^\w+:\/\//.test(i))return void t.loadUrl(i).done(n).fail(r);var a=o(i);return 0===a.length?void r("Set is empty. No html to test"):n(a)})},loadUrl:function(e){var t=this,n=require("request"),r=new te;return n(e,function(e,n,i){return e?void r.reject(e):void r.resolve(t.cheerio(i))}),r},isOwnCtx:function(e){return null==e?!1:e.constructor===this.cheerio}}),t=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(){r.prototype.Assertions.define("hasClass",function(e,n,r,i,o){1===i.length&&i.push(!0);var a=e.check.apply(e,[r,"hasClass"].concat(t(i)));o(a)})}(),r.prototype.Traversers.define("eq",{traverse:function(e,t,n){var r=e.eq(t);n(r)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),r.prototype.Traversers.define("find",{traverse:function(e,t,n){var r=e.find(t);0===r.length&&(r=e.filter(t)),n(r)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),["filter","closest","children"].forEach(function(e){r.prototype.Traversers.define(e,{traverse:function(t,n,r){var i=t[e](n);r(i)}})})}(),function(){var e,n=Q(f,{}),r=Q(c,{}),i=Q(s,{}),o=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},a=Q(l,{assert:function(e,t,n,r,i,a){var s=void 0===arguments[4]?[]:arguments[4];e.checkAsync.apply(e,[n,r].concat(o(s))).done(function(){return a()}).fail(function(e){return a(e)})}}),u=Ae.selenium=Q(p,{Traversers:new n,Events:new r,Actions:new i,Assertions:new a,createRoot:function(t){var n=this;return te.run(function(r,i){return null==t||/^(\w+:\/\/)|^(\/\w+)/.test(t)===!1?void i("URL is expected by selenium driver"):(null==e&&(e=require("selenium-query")),void e.load(t,n.options).then(function(e){return r(e)},function(e){return i(e)}))})},isOwnCtx:function(e){return null==e?!1:"number"==typeof e.length}});!function(){u.prototype.Events.define("type",function(e,t){return e.type(t)})}(),function(){u.prototype.Events.define("press",function(e,t){return e.press(t)})}(),function(){u.prototype.Events.define("select",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return e.select.apply(e,n)})}(),function(){function e(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];var o=t.simulate||t.trigger;return o.call.apply(o,[t,e].concat(r))}}["blur","focus","load","resize","scroll","unload","beforeunload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","submit","keydown","keypress","keyup"].forEach(function(t){u.prototype.Events.define(t,e(t))})}(),function(){function e(e,t,n){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select()}}u.prototype.Actions.define("selection",function(n,r,i,o){var a=i.node.expression;if(null==a)throw Error("`caret` node expect expression: position number");var s=t.Utils.Expression.evalStatements(a),u=s[0],l=s[1]||u;e(i.$.get(0),u,l),setTimeout(o,16)})}();var o=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(){u.prototype.Assertions.define("hasClass",function(e,t,n,r,i){1===r.length&&r.push(!0),e.checkAsync.apply(e,[n,"hasClass"].concat(o(r))).done(function(){return i()}).fail(function(e){return i(e)})})}(),u.prototype.Traversers.define("eq",{traverse:function(e,t,n){e.eq(t).done(n)},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),u.prototype.Traversers.define("find",{traverse:function(e,t,n){e.find(t).done(function(r){return 0===r.length?void e.filter(t).done(n):void n(r)})},canHandle:function(e,t,n){var r=e.getCurrentArgs_();return 1===r.length}}),["filter","closest","children","siblings"].forEach(function(e){u.prototype.Traversers.define(e,{traverse:function(t,n,r){t[e](n).done(r)}})})}()}();var Te;return function(){function e(e){var t=e.findAll(":utest");if(0===t.length){var n="No `:utest` components found";return r(!1,n),(new te).reject(n)}var i=new DomTest.Conductor;return t.forEach(function(e){i.addRunner(e.$,e)}),i.process()}Te=function(n,r){if("string"!=typeof n)return e(n);var i=new Compo;return t.render(n,r,null,null,i),e(i)},t.registerHandler(":utest",t.Compo({render:function(e,t,r){r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(r=r.childNodes),this.$=n(r)}}))}(),N(i,{create:i,compo:Te,ProgressReporters:{Dom:be},Drivers:Ae,Conductor:_e,use:function(e){var t=void 0===arguments[1]?null:arguments[1];return new _e(e,t)}}),i}),"undefined"!=typeof jQuery&&!function(e){e.simulate&&e.simulate.prototype.simulateKeyCombo||(!function(e,t){"use strict";function n(e){return u.test(Object.prototype.toString.call(e))}function r(e){for(var t=0;t<window.frames.length;t+=1)if(window.frames[t].document===e)return window.frames[t];return window}function i(t){var r,i,o=e(t);return n(o[0])?(i=o,r={left:0,top:0}):(i=e(o[0].ownerDocument||document),r=o.offset()),{x:r.left+o.outerWidth()/2-i.scrollLeft(),y:r.top+o.outerHeight()/2-i.scrollTop()}}function o(t){var r,i,o=e(t);return n(o[0])?(i=o,r={left:0,top:0}):(i=e(o[0].ownerDocument||document),r=o.offset()),{x:r.left-document.scrollLeft(),y:r.top-document.scrollTop()}}var a=/^key/,s=/^(?:mouse|contextmenu)|click/,u=/\[object (?:HTML)?Document\]/;e.fn.simulate=function(t,n){return this.each(function(){new e.simulate(this,t,n)})},e.simulate=function(t,n,r){var i=e.camelCase("simulate-"+n);this.target=t,this.options=r||{},this[i]?this[i]():this.simulateEvent(t,n,this.options)},e.extend(e.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}}),e.extend(e.simulate.prototype,{simulateEvent:function(e,t,n){var r=this.createEvent(t,n);this.dispatchEvent(e,t,r,n)},createEvent:function(e,t){return a.test(e)?this.keyEvent(e,t):s.test(e)?this.mouseEvent(e,t):void 0},mouseEvent:function(i,o){var a,s,u,l,c=n(this.target)?this.target:this.target.ownerDocument||document;return o=e.extend({bubbles:!0,cancelable:"mousemove"!==i,view:r(c),detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:t},o),c.createEvent?(a=c.createEvent("MouseEvents"),a.initMouseEvent(i,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget||c.body.parentNode),0===a.pageX&&0===a.pageY&&Object.defineProperty&&(s=n(a.relatedTarget)?a.relatedTarget:a.relatedTarget.ownerDocument||document,u=s.documentElement,l=s.body,Object.defineProperty(a,"pageX",{get:function(){return o.clientX+(u&&u.scrollLeft||l&&l.scrollLeft||0)-(u&&u.clientLeft||l&&l.clientLeft||0)}}),Object.defineProperty(a,"pageY",{get:function(){return o.clientY+(u&&u.scrollTop||l&&l.scrollTop||0)-(u&&u.clientTop||l&&l.clientTop||0)}}))):c.createEventObject&&(a=c.createEventObject(),e.extend(a,o),a.button={0:1,1:4,2:2}[a.button]||a.button),a},keyEvent:function(i,o){var a,s;if(o=e.extend({bubbles:!0,cancelable:!0,view:r(s),ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:t},o),s=n(this.target)?this.target:this.target.ownerDocument||document,s.createEvent)try{a=s.createEvent("KeyEvents"),a.initKeyEvent(i,o.bubbles,o.cancelable,o.view,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode)}catch(u){a=s.createEvent("Events"),a.initEvent(i,o.bubbles,o.cancelable),e.extend(a,{view:o.view,ctrlKey:o.ctrlKey,altKey:o.altKey,shiftKey:o.shiftKey,metaKey:o.metaKey,keyCode:o.keyCode,charCode:o.charCode})}else s.createEventObject&&(a=s.createEventObject(),e.extend(a,o));return(/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||"[object Opera]"==={}.toString.call(window.opera))&&(a.keyCode=o.charCode>0?o.charCode:o.keyCode,a.charCode=t),a},dispatchEvent:function(t,n,r,i){i.jQueryTrigger===!0?e(t).trigger(e.extend({},r,i,{type:n})):t.dispatchEvent?t.dispatchEvent(r):t.fireEvent&&t.fireEvent("on"+n,r)},simulateFocus:function(){function t(){r=!0}var n,r=!1,i=e(this.target);i.bind("focus",t),i[0].focus(),r||(n=e.Event("focusin"),n.preventDefault(),i.trigger(n),i.triggerHandler("focus")),i.unbind("focus",t)},simulateBlur:function(){function t(){r=!0}var n,r=!1,i=e(this.target);i.bind("blur",t),i[0].blur(),setTimeout(function(){i[0].ownerDocument.activeElement===i[0]&&i[0].ownerDocument.body.focus(),r||(n=e.Event("focusout"),n.preventDefault(),i.trigger(n),i.triggerHandler("blur")),i.unbind("blur",t)},1)}}),e.extend(e.simulate.prototype,{simulateDrag:function(){var n=0,r=this.target,a=this.options,s="corner"===a.handle?o(r):i(r),u=Math.floor(s.x),l=Math.floor(s.y),c={clientX:u,clientY:l},f=a.dx||(a.x!==t?a.x-u:0),p=a.dy||(a.y!==t?a.y-l:0),h=a.moves||3;for(this.simulateEvent(r,"mousedown",c);h>n;n++)u+=f/h,l+=p/h,c={clientX:Math.round(u),clientY:Math.round(l)},this.simulateEvent(r.ownerDocument,"mousemove",c);e.contains(document,r)?(this.simulateEvent(r,"mouseup",c),this.simulateEvent(r,"click",c)):this.simulateEvent(document,"mouseup",c)}})}(jQuery),function(){function e(e){return"undefined"!=typeof e.value?"value":"undefined"!=typeof e.text?"text":"undefined"!=typeof e.textContent?"textContent":"innerText"}function t(){}function n(){}function r(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("StartToStart",t)<=0)return 0;if(e.compareEndPoints("StartToEnd",t)>=0)return n;for(var r=0;e.compareEndPoints("StartToStart",t)>0;++r,e.moveStart("character",-1));return r}function i(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("EndToEnd",t)>=0)return n;if(e.compareEndPoints("EndToStart",t)<=0)return 0;for(var r=0;e.compareEndPoints("EndToStart",t)>0;++r,e.moveEnd("character",-1));return r}function o(){}function a(){}function s(e,t){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;if(e===t)return null;for(;e.parentNode;){if(e=e.parentNode,e==t)return null;if(e.nextSibling)return e.nextSibling}return null}function u(e,t,n,r){if(!(0>=t)){var i=e[n?"startContainer":"endContainer"];for(3==i.nodeType&&(t+=e[n?"startOffset":"endOffset"]);i;){if(3==i.nodeType){var o=i.nodeValue.length;if(o>=t){if(e[n?"setStart":"setEnd"](i,t),t==o){for(var a=s(i,r);a&&3==a.nodeType&&0==a.nodeValue.length;a=s(a,r))e[n?"setStartAfter":"setEndAfter"](a);a&&1==a.nodeType&&"BR"==a.nodeName&&e[n?"setStartAfter":"setEndAfter"](a)}return}e[n?"setStartAfter":"setEndAfter"](i),t-=o}i=s(i,r)}}}function l(e,t){return e.compareBoundaryPoints(v,t)<=0?0:e.compareBoundaryPoints(m,t)>=0?t.toString().length:(e=e.cloneRange(),e.setEnd(t.endContainer,t.endOffset),t.toString().replace(/\r/g,"").length-e.toString().replace(/\r/g,"").length)}function c(e,t){return e.compareBoundaryPoints(y,t)>=0?t.toString().length:e.compareBoundaryPoints(g,t)<=0?0:(e=e.cloneRange(),e.setStart(t.startContainer,t.startOffset),e.toString().replace(/\r/g,"").length)}function f(){}var p="onfocusin"in document.createElement("input")?"focusin":"focus",h=document.createElement("div");h.appendChild(document.createTextNode("x-")),h.appendChild(document.createTextNode("x")),h.normalize();var d=3==h.firstChild.length;bililiteRange=function(t,r){function i(e){e&&9==e.which?s._nativeSelect(s._nativeRange(t.bililiteRangeSelection)):t.bililiteRangeSelection=s._nativeSelection()}var s;if(r)s=new f;else if(window.getSelection&&t.setSelectionRange)try{t.selectionStart,s=new o}catch(u){s=new f}else s=window.getSelection?new a:document.selection?new n:new f;if(s._el=t,s._doc=t.ownerDocument,s._win="defaultView"in s._doc?s._doc.defaultView:s._doc.parentWindow,s._textProp=e(t),s._bounds=[0,s.length()],!("bililiteRangeMouseDown"in s._doc)){var l={_el:s._doc};s._doc.bililiteRangeMouseDown=!1,bililiteRange.fn.listen.call(l,"mousedown",function(){s._doc.bililiteRangeMouseDown=!0}),bililiteRange.fn.listen.call(l,"mouseup",function(){s._doc.bililiteRangeMouseDown=!1})}if("bililiteRangeSelection"in t||(i(),"onbeforedeactivate"in t?s.listen("beforedeactivate",i):s.listen("mouseup",i).listen("keyup",i),s.listen(p,function(){s._doc.bililiteRangeMouseDown||s._nativeSelect(s._nativeRange(t.bililiteRangeSelection))})),!("oninput"in t)){var c=function(){s.dispatch({type:"input"})};s.listen("keyup",c),s.listen("cut",c),s.listen("paste",c),s.listen("drop",c),t.oninput="patched"}return s},t.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(e){if(bililiteRange.bounds[e])this._bounds=bililiteRange.bounds[e].apply(this);else{if(!e){var t=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return t[1]=Math.max(t[0],t[1]),t}this._bounds=e}return this},select:function(){var e=this._el.bililiteRangeSelection=this.bounds();return this._el===this._doc.activeElement&&this._nativeSelect(this._nativeRange(e)),this.dispatch({type:"select"}),this},text:function(e,t){if(arguments.length){var n=this.bounds();this._el;return this.dispatch({type:"beforeinput",data:e,bounds:n}),this._nativeSetText(e,this._nativeRange(n)),"start"==t?this.bounds([n[0],n[0]]):"end"==t?this.bounds([n[0]+e.length,n[0]+e.length]):"all"==t&&this.bounds([n[0],n[0]+e.length]),this.dispatch({type:"input",data:e,bounds:n}),this}return this._nativeGetText(this._nativeRange(this.bounds())).replace(/\r/g,"")},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this},sendkeys:function(e){function t(e,t){/^{[^}]*}$/.test(t)&&(t=t.slice(1,-1));for(var n=0;n<t.length;++n){var r=t.charCodeAt(n);e.dispatch({type:"keypress",keyCode:r,which:r,charCode:r})}e.text(t,"end")}var n=this;return this.data().sendkeysOriginalText=this.text(),this.data().sendkeysBounds=void 0,e.replace(/{[^}]*}|[^{]+|{/g,function(e){(bililiteRange.sendkeys[e]||t)(n,e,t)}),this.bounds(this.data().sendkeysBounds),this.dispatch({type:"sendkeys",which:e}),this},top:function(){return this._nativeTop(this._nativeRange(this.bounds()))},scrollIntoView:function(e){var t=this.top();return(this._el.scrollTop>t||this._el.scrollTop+this._el.clientHeight<t)&&(e?e.call(this._el,t):this._el.scrollTop=t),this},wrap:function(e){return this._nativeWrap(e,this._nativeRange(this.bounds())),this},selection:function(e){return arguments.length?this.bounds("selection").text(e,"end").select():this.bounds("selection").text()},clone:function(){return bililiteRange(this._el).bounds(this.bounds())},all:function(e){return arguments.length?(this.dispatch({type:"beforeinput",data:e}),this._el[this._textProp]=e,this.dispatch({type:"input",data:e}),this):this._el[this._textProp].replace(/\r/g,"")},element:function(){return this._el},dispatch:function(e){e=e||{};var t=document.createEvent?document.createEvent("CustomEvent"):this._doc.createEventObject();t.initCustomEvent&&t.initCustomEvent(e.type,!!e.bubbles,!!e.cancelable,e.detail);for(var n in e)t[n]=e[n];var r=this._el;return setTimeout(function(){try{r.dispatchEvent?r.dispatchEvent(t):r.fireEvent("on"+e.type,document.createEventObject())}catch(n){var i=r["listen"+e.type];if(i)for(var o=0;o<i.length;++o)i[o].call(r,t)}},0),this},listen:function(e,t){var n=this._el;if(n.addEventListener)n.addEventListener(e,t);else{n.attachEvent("on"+e,t);var r=n["listen"+e]=n["listen"+e]||[];r.push(t)}return this},dontlisten:function(e,t){var n=this._el;if(n.removeEventListener)n.removeEventListener(e,t);else try{n.detachEvent("on"+e,t)}catch(r){var i=n["listen"+e];if(i)for(var o=0;o<i.length;++o)i[o]===t&&(i[o]=function(){})}return this}},bililiteRange.fn=t.prototype,bililiteRange.extend=function(e){for(fn in e)t.prototype[fn]=e[fn]},bililiteRange.bounds={all:function(){return[0,this.length()]},start:function(){return[0,0]},end:function(){return[this.length(),this.length()]},selection:function(){return this._el===this._doc.activeElement?(this.bounds("all"),this._nativeSelection()):this._el.bililiteRangeSelection}},bililiteRange.sendkeys={"{enter}":function(e){simplechar(e,"\n"),e.insertEOL()},"{tab}":function(e,t,n){n(e,"	")},"{newline}":function(e,t,n){n(e,"\n")},"{backspace}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0]-1,t[0]]),e.text("","end")},"{del}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0],t[0]+1]),e.text("","end")},"{rightarrow}":function(e){var t=e.bounds();t[0]==t[1]&&++t[1],e.bounds([t[1],t[1]])},"{leftarrow}":function(e){var t=e.bounds();t[0]==t[1]&&--t[0],e.bounds([t[0],t[0]])},"{selectall}":function(e){e.bounds("all")},"{selection}":function(e){for(var t=e.data().sendkeysOriginalText,n=0;n<t.length;++n){var r=t.charCodeAt(n);e.dispatch({type:"keypress",keyCode:r,which:r,charCode:r})}e.text(t,"end")},"{mark}":function(e){e.data().sendkeysBounds=e.bounds()}},bililiteRange.sendkeys["{Enter}"]=bililiteRange.sendkeys["{enter}"],bililiteRange.sendkeys["{Backspace}"]=bililiteRange.sendkeys["{backspace}"],bililiteRange.sendkeys["{Delete}"]=bililiteRange.sendkeys["{del}"],bililiteRange.sendkeys["{ArrowRight}"]=bililiteRange.sendkeys["{rightarrow}"],bililiteRange.sendkeys["{ArrowLeft}"]=bililiteRange.sendkeys["{leftarrow}"],n.prototype=new t,n.prototype._nativeRange=function(e){var t;return"INPUT"==this._el.tagName?t=this._el.createTextRange():(t=this._doc.body.createTextRange(),t.moveToElementText(this._el)),e&&(e[1]<0&&(e[1]=0),e[0]>this.length()&&(e[0]=this.length()),e[1]<t.text.replace(/\r/g,"").length&&(t.moveEnd("character",-1),t.moveEnd("character",e[1]-t.text.replace(/\r/g,"").length)),e[0]>0&&t.moveStart("character",e[0])),t},n.prototype._nativeSelect=function(e){e.select()},n.prototype._nativeSelection=function(){var e=this._nativeRange(),t=this.length(),n=this._doc.selection.createRange();try{return[r(n,e),i(n,e)]}catch(o){return n.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[t,t]}},n.prototype._nativeGetText=function(e){return e.text},n.prototype._nativeSetText=function(e,t){t.text=e},n.prototype._nativeEOL=function(){"value"in this._el?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("\n<br/>")},n.prototype._nativeTop=function(e){var t=this._nativeRange([0,0]);return e.boundingTop-t.boundingTop},n.prototype._nativeWrap=function(e,t){var n=document.createElement("div");n.appendChild(e);var r=n.innerHTML.replace("><",">"+t.htmlText+"<");t.pasteHTML(r);
},o.prototype=new t,o.prototype._nativeRange=function(e){return e||[0,this.length()]},o.prototype._nativeSelect=function(e){this._el.setSelectionRange(e[0],e[1])},o.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},o.prototype._nativeGetText=function(e){return this._el.value.substring(e[0],e[1])},o.prototype._nativeSetText=function(e,t){var n=this._el.value;this._el.value=n.substring(0,t[0])+e+n.substring(t[1])},o.prototype._nativeEOL=function(){this.text("\n")},o.prototype._nativeTop=function(e){var t=this._el.cloneNode(!0);t.style.visibility="hidden",t.style.position="absolute",this._el.parentNode.insertBefore(t,this._el),t.style.height="1px",t.value=this._el.value.slice(0,e[0]);var n=t.scrollHeight;return t.value="X",n-=t.scrollHeight,t.parentNode.removeChild(t),n},o.prototype._nativeWrap=function(){throw new Error("Cannot wrap in a text element")},a.prototype=new t,a.prototype._nativeRange=function(e){var t=this._doc.createRange();return t.selectNodeContents(this._el),e&&(u(t,e[0],!0,this._el),t.collapse(!0),u(t,e[1]-e[0],!1,this._el)),t},a.prototype._nativeSelect=function(e){this._win.getSelection().removeAllRanges(),this._win.getSelection().addRange(e)},a.prototype._nativeSelection=function(){var e=this._nativeRange();if(0==this._win.getSelection().rangeCount)return[this.length(),this.length()];var t=this._win.getSelection().getRangeAt(0);return[l(t,e),c(t,e)]},a.prototype._nativeGetText=function(e){return String.prototype.slice.apply(this._el.textContent,this.bounds())},a.prototype._nativeSetText=function(e,t){t.deleteContents(),t.insertNode(this._doc.createTextNode(e)),d&&this._el.normalize()},a.prototype._nativeEOL=function(){var e=this._nativeRange(this.bounds());e.deleteContents();var t=this._doc.createElement("br");t.setAttribute("_moz_dirty",""),e.insertNode(t),e.insertNode(this._doc.createTextNode("\n")),e.collapse(!1)},a.prototype._nativeTop=function(e){if(0==this.length)return 0;if(""==e.toString()){var t=this._doc.createTextNode("X");e.insertNode(t)}var n=this._nativeRange([0,1]),r=e.getBoundingClientRect().top-n.getBoundingClientRect().top;return t&&t.parentNode.removeChild(t),r},a.prototype._nativeWrap=function(e,t){t.surroundContents(e)};var v=0,g=1,y=2,m=3;f.prototype=new t,f.prototype._nativeRange=function(e){return e||[0,this.length()]},f.prototype._nativeSelect=function(e){},f.prototype._nativeSelection=function(){return[0,0]},f.prototype._nativeGetText=function(e){return this._el[this._textProp].substring(e[0],e[1])},f.prototype._nativeSetText=function(e,t){var n=this._el[this._textProp];this._el[this._textProp]=n.substring(0,t[0])+e+n.substring(t[1])},f.prototype._nativeEOL=function(){this.text("\n")},f.prototype._nativeTop=function(){return 0},f.prototype._nativeWrap=function(){throw new Error("Wrapping not implemented")};var b=[];bililiteRange.fn.data=function(){var e=this.element().bililiteRangeData;return void 0==e&&(e=this.element().bililiteRangeData=b.length,b[e]=new _(this)),b[e]};try{Object.defineProperty({},"foo",{});var _=function(e){Object.defineProperty(this,"values",{value:{}}),Object.defineProperty(this,"sourceRange",{value:e}),Object.defineProperty(this,"toJSON",{value:function(){var e={};for(var t in _.prototype)t in this.values&&(e[t]=this.values[t]);return e}}),Object.defineProperty(this,"all",{get:function(){var e={};for(var t in _.prototype)e[t]=this[t];return e}})};_.prototype={},Object.defineProperty(_.prototype,"values",{value:{}}),Object.defineProperty(_.prototype,"monitored",{value:{}}),bililiteRange.data=function(e,t){t=t||{};var n=Object.getOwnPropertyDescriptor(_.prototype,e)||{};"enumerable"in t&&(n.enumerable=!!t.enumerable),"enumerable"in n||(n.enumerable=!0),"value"in t&&(_.prototype.values[e]=t.value),"monitored"in t&&(_.prototype.monitored[e]=t.monitored),n.configurable=!0,n.get=function(){return e in this.values?this.values[e]:_.prototype.values[e]},n.set=function(t){this.values[e]=t,_.prototype.monitored[e]&&this.sourceRange.dispatch({type:"bililiteRangeData",bubbles:!0,detail:{name:e,value:t}})},Object.defineProperty(_.prototype,e,n)}}catch(E){_=function(e){this.sourceRange=e},_.prototype={},bililiteRange.data=function(e,t){"value"in t&&(_.prototype[e]=t.value)}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)i in t&&e.call(r,t[i],i,t)}),function(e){"use strict";var t=e.simulate.prototype.mouseEvent,n=/\[object (?:HTML)?Document\]/;e.simulate.prototype.mouseEvent=function(r,i){if(i.pageX||i.pageY){var o=n.test(Object.prototype.toString.call(this.target))?this.target:this.target.ownerDocument||document;i.clientX=(i.pageX||0)-e(o).scrollLeft(),i.clientY=(i.pageY||0)-e(o).scrollTop()}return t.apply(this,[r,i])}}(jQuery),function(e,t){"use strict";function n(t){return c.test(Object.prototype.toString.call(e(t)[0]))}function r(t,n){var r;if(e.isFunction(n)){for(r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}for(r=0;r<t.length;r+=1)if(t[r])return t[r];return null}function i(t){var r,i=e(t);return r=n(i[0])?{left:0,top:0}:i.offset(),{x:r.left+i.outerWidth()/2,y:r.top+i.outerHeight()/2}}function o(t,r,i){var o;return o=e(n(r)?r:i||document),"number"==typeof t&&"number"==typeof r?{x:t-o.scrollLeft(),y:r-o.scrollTop()}:"object"==typeof t&&t.pageX&&t.pageY?{clientX:t.pageX-o.scrollLeft(),clientY:t.pageY-o.scrollTop()}:void 0}function a(t,r,i){var o;if(o=n(r)?r:i||document,!o.elementFromPoint)return null;var s=t,u=r;if("object"==typeof t&&(t.clientX||t.clientY)&&(s=t.clientX||0,u=t.clientY||0),a.prototype.check){var l,c;(l=e(o).scrollTop())>0?(c=o.elementFromPoint(0,l+e(window).height()-1),null!==c&&"HTML"===c.tagName.toUpperCase()&&(c=null),a.prototype.nativeUsesRelative=null===c):(l=e(o).scrollLeft())>0&&(c=o.elementFromPoint(l+e(window).width()-1,0),null!==c&&"HTML"===c.tagName.toUpperCase()&&(c=null),a.prototype.nativeUsesRelative=null===c),a.prototype.check=0>=l}return a.prototype.nativeUsesRelative||(s+=e(o).scrollLeft(),u+=e(o).scrollTop()),o.elementFromPoint(s,u)}function s(t,n){var r=n||{};e(t).trigger({type:"simulate-drag"}),e.isFunction(r.callback)&&r.callback.apply(t)}function u(t,i,u,c,f){function p(){w.x+=g.x,w.y+=g.y;var e={pageX:w.x,pageY:w.y};if(m.shaky&&(m.shaky===!0||!isNaN(parseInt(m.shaky,10)))){var n=m.shaky===!0?1:parseInt(m.shaky,10);e.pageX+=Math.floor(Math.random()*(2*n+1)-n),e.pageY+=Math.floor(Math.random()*(2*n+1)-n)}var r=o(e,y),s=a(r,y)||i;t.simulateEvent(s,"mousemove",{pageX:Math.round(e.pageX),pageY:Math.round(e.pageY)})}function h(){var e=l()-E;if(e>=C)if(v>S)p(),S+=1,E=l(),setTimeout(h,C);else{var n={pageX:Math.round(u.x+c.dx),pageY:Math.round(u.y+c.dy)},r=o(n,y),d=a(r,y)||i;t.simulateEvent(d,"mousemove",n),s(i,f)}else setTimeout(h,C-e)}var d,v,g,y=r([i,i.ownerDocument],n)||document,m=f.interpolation,b=Math.sqrt(Math.pow(c.dx,2)+Math.pow(c.dy,2));if(m.stepWidth){d=parseInt(m.stepWidth,10),v=Math.floor(b/d)-1;var _=d/b;g={x:c.dx*_,y:c.dy*_}}else v=parseInt(m.stepCount,10),d=b/(v+1),g={x:c.dx/(v+1),y:c.dy/(v+1)};var E,w=e.extend({},u);if(!m.stepDelay&&!m.duration||m.stepDelay<=0&&m.duration<=0){for(var x=0;v>x;x+=1)p();var k={pageX:Math.round(u.x+c.dx),pageY:Math.round(u.y+c.dy)},A=o(k,y),T=a(A,y)||i;t.simulateEvent(T,"mousemove",k),s(i,f)}else{var C=parseInt(m.stepDelay,10)||Math.ceil(parseInt(m.duration,10)/(v+1)),S=0;E=l(),setTimeout(h,C)}}e.fn.simulate=function(t,n){switch(t){case"drag":case"drop":case"drag-n-drop":var r=this.first();return new e.simulate(r[0],t,n),r;default:return this.each(function(){new e.simulate(this,t,n)})}};var l=Date.now||function(){return(new Date).getTime()},c=/\[object (?:HTML)?Document\]/;a.prototype.check=!0,a.prototype.nativeUsesRelative=!0,e.simulate.activeDrag=function(){return e.simulate._activeDrag?e.extend(!0,{},e.simulate._activeDrag):t},e.extend(e.simulate.prototype,{simulateDrag:function(){var l,c=this,f=c.target,p=e.extend({dx:0,dy:0,dragTarget:t,clickToDrag:!1,eventProps:{},interpolation:{stepWidth:0,stepCount:0,stepDelay:0,duration:0,shaky:!1},callback:t},this.options),h=e.simulate._activeDrag&&e.simulate._activeDrag.dragElement===f;l=h?e.simulate._activeDrag.dragStart:i(f);var d,v,g=Math.round(l.x),y=Math.round(l.y),m={pageX:g,pageY:y};if(p.dragTarget){var b=i(p.dragTarget);d=Math.round(b.x-l.x),v=Math.round(b.y-l.y)}else d=p.dx||0,v=p.dy||0;if(h?(e.simulate._activeDrag.dragDistance.x+=d,e.simulate._activeDrag.dragDistance.y+=v,m={pageX:Math.round(g+e.simulate._activeDrag.dragDistance.x),pageY:Math.round(y+e.simulate._activeDrag.dragDistance.y)}):(e.simulate._activeDrag&&e(e.simulate._activeDrag.dragElement).simulate("drop"),e.extend(p.eventProps,m),c.simulateEvent(f,"mousedown",p.eventProps),p.clickToDrag===!0&&(c.simulateEvent(f,"mouseup",p.eventProps),c.simulateEvent(f,"click",p.eventProps)),e(f).add(f.ownerDocument).one("mouseup",function(){e.simulate._activeDrag=t}),e.extend(e.simulate,{_activeDrag:{dragElement:f,dragStart:{x:g,y:y},dragDistance:{x:d,y:v}}}),m={pageX:Math.round(g+d),pageY:Math.round(y+v)}),0!==d||0!==v)if(p.interpolation&&(p.interpolation.stepCount||p.interpolation.stepWidth))u(c,f,{x:g,y:y},{dx:d,dy:v},p);else{var _=r([f,f.ownerDocument],n)||document,E=o(m,_),w=a(E,_)||f;e.extend(p.eventProps,m),c.simulateEvent(w,"mousemove",p.eventProps),s(f,p)}else s(f,p)},simulateDrop:function(){var s=this,u=this.target,l=e.simulate._activeDrag,c=e.extend({clickToDrop:!1,eventProps:{},callback:t},s.options),f=!0,p=i(u),h=Math.round(p.x),d=Math.round(p.y),v={pageX:h,pageY:d},g=(l?r([l.dragElement,l.dragElement.ownerDocument],n):r([u,u.ownerDocument],n))||document,y=o(v,g),m=a(y,g);l&&(l.dragElement===u||n(u))&&(h=Math.round(l.dragStart.x+l.dragDistance.x),d=Math.round(l.dragStart.y+l.dragDistance.y),v={pageX:h,pageY:d},y=o(v,g),m=a(y,g),f=!1),m||(m=l?l.dragElement:u),e.extend(c.eventProps,v),f===!0&&s.simulateEvent(m,"mousemove",c.eventProps),c.clickToDrop&&s.simulateEvent(m,"mousedown",c.eventProps),this.simulateEvent(m,"mouseup",c.eventProps),c.clickToDrop&&s.simulateEvent(m,"click",c.eventProps),e.simulate._activeDrag=t,e(m).trigger({type:"simulate-drop"}),e.isFunction(c.callback)&&c.callback.apply(m)},simulateDragNDrop:function(){var n=this,r=this.target,i=e.extend({dragTarget:t,dropTarget:t},n.options),o=(i.dragTarget||i.dx||i.dy?i.dropTarget:r)||r;e(r).simulate("drag",e.extend({},i,{dragTarget:i.dragTarget||(i.dx||i.dy?t:i.dropTarget),callback:function(){e(o).simulate("drop",i)}}))}})}(jQuery),function(e,t){"use strict";var n={SHIFT:16,CONTROL:17,ALTERNATIVE:18,META:91,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ENTER:13,TABULATOR:9,ESCAPE:27,BACKSPACE:8,INSERT:45,DELETE:46,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34};n.CTRL=n.CONTROL,n.ALT=n.ALTERNATIVE,n.COMMAND=n.META,n.TAB=n.TABULATOR,n.ESC=n.ESCAPE,e.extend(e.simulate.prototype,{simulateKeyCombo:function(){var r,i=e(this.target),o=e.extend({combo:"",eventProps:{},eventsOnly:!1},this.options),a=o.combo,s=a.split(/(\+)/),u=!1,l=[];if(0!==a.length){for(s=e.grep(s,function(e){return""!==e}),r=0;r<s.length;r+=1){var c=s[r],f=c.toLowerCase(),p=c.toUpperCase().replace("-","_");if(u){if("+"!==c)throw'Syntax error: expected "+"';u=!1}else{var h;if(c.length>1){if(h=n[p],h===t)throw'Syntax error: unknown special key "'+c+'" (forgot "+" between keys?)';switch(h){case n.CONTROL:case n.ALT:case n.SHIFT:case n.META:o.eventProps[f+"Key"]=!0}l.unshift(h),o.eventProps.keyCode=h,o.eventProps.which=h,o.eventProps.charCode=0,i.simulate("keydown",o.eventProps)}else h=e.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(c),l.unshift(h),o.eventProps.keyCode=h,o.eventProps.which=h,o.eventProps.charCode=t,i.simulate("keydown",o.eventProps),o.eventProps.shiftKey&&(c=c.toUpperCase()),o.eventProps.keyCode=c.charCodeAt(0),o.eventProps.charCode=o.eventProps.keyCode,o.eventProps.which=o.eventProps.keyCode,i.simulate("keypress",o.eventProps),o.eventsOnly===!0||o.eventProps.ctrlKey||o.eventProps.altKey||o.eventProps.metaKey||i.simulate("key-sequence",{sequence:c,triggerKeyEvents:!1});u=!0}}if(!u)throw'Syntax error: expected key (trailing "+"?)';for(o.eventProps.charCode=t,r=0;r<l.length;r+=1){switch(o.eventProps.keyCode=l[r],o.eventProps.which=l[r],o.eventProps.keyCode){case n.ALT:o.eventProps.altKey=!1;break;case n.SHIFT:o.eventProps.shiftKey=!1;break;case n.CONTROL:o.eventProps.ctrlKey=!1;break;case n.META:o.eventProps.metaKey=!1}i.simulate("keyup",o.eventProps)}}}})}(jQuery),function(e,t){"use strict";e.simulate.prototype.quirks=e.simulate.prototype.quirks||{},e.extend(e.simulate.prototype.quirks,{delayedSpacesInNonInputGlitchToEnd:t}),e.extend(e.simulate.prototype,{simulateKeySequence:function(){function n(){o.trigger({type:"simulate-keySequence",sequence:s}),e.isFunction(a.callback)&&a.callback.apply(i,[{sequence:s}])}function r(){var t=f()-p;if(t>=a.delay){var i=c.exec(s);if(null!==i){var o=i[0];(u[o]||e.simulate.prototype.simulateKeySequence.defaults[o]||e.simulate.prototype.simulateKeySequence.defaults.simplechar)(l,o,a),setTimeout(r,a.delay)}else n();p=f()}else setTimeout(r,a.delay-t)}var i=this.target,o=e(i),a=e.extend({sequence:"",triggerKeyEvents:!0,eventProps:{},delay:0,callback:t},this.options),s=a.sequence;a.delay=parseInt(a.delay,10);var u={};e.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd&&!o.is("input,textarea")&&e.extend(u,{" ":function(n,r,i){var o=e.extend({},i,{triggerKeyEvents:!1,delay:0,callback:t});e.simulate.prototype.simulateKeySequence.defaults.simplechar(n,"Â ",o),e.simulate.prototype.simulateKeySequence.defaults["{leftarrow}"](n,r,o),e.simulate.prototype.simulateKeySequence.defaults.simplechar(n,r,i),e.simulate.prototype.simulateKeySequence.defaults["{del}"](n,r,o)}}),e.extend(u,a,o.data("simulate-keySequence"));var l=e.data(i,"simulate-keySequence.selection");if(l||(l=bililiteRange(i).bounds("selection"),e.data(i,"simulate-keySequence.selection",l),o.bind("mouseup.simulate-keySequence",function(){e.data(i,"simulate-keySequence.selection").bounds("selection")}).bind("keyup.simulate-keySequence",function(t){9===t.which?e.data(i,"simulate-keySequence.selection").select():e.data(i,"simulate-keySequence.selection").bounds("selection")})),o.focus(),"undefined"!=typeof s)if(s=s.replace(/\n/g,"{enter}"),!a.delay||a.delay<=0)s.replace(/\{[^}]*\}|[^{]+/g,function(t){(u[t]||e.simulate.prototype.simulateKeySequence.defaults[t]||e.simulate.prototype.simulateKeySequence.defaults.simplechar)(l,t,a)}),n();else{var c=/\{[^}]*\}|[^{]/g,f=Date.now||function(){return(new Date).getTime()},p=f();r()}}}),e.extend(e.simulate.prototype.simulateKeySequence.prototype,{IEKeyCodeTable:{33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,59:186,58:186,61:187,43:187,44:188,60:188,45:189,95:189,46:190,62:190,47:191,63:191,96:192,126:192,91:219,123:219,92:220,124:220,93:221,125:221,39:222,34:222},charToKeyCode:function(n){var r=e.simulate.prototype.simulateKeySequence.prototype.IEKeyCodeTable,i=n.charCodeAt(0);return i>=64&&90>=i||i>=48&&57>=i?i:i>=97&&122>=i?n.toUpperCase().charCodeAt(0):r[i]!==t?r[i]:i}}),e.simulate.prototype.simulateKeySequence.defaults={simplechar:function(t,n,r){if(t.text(n,"end"),t.select(),r.triggerKeyEvents)for(var i=0;i<n.length;i+=1){var o=n.charCodeAt(i),a=e.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(n.charAt(i));e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:a})),e(t._el).simulate("keypress",e.extend({},r.eventProps,{keyCode:o,which:o,charCode:o})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:a}))}},"{{}":function(t,n,r){e.simulate.prototype.simulateKeySequence.defaults.simplechar(t,"{",r)},"{enter}":function(t,n,r){t.insertEOL(),t.select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:13})),e(t._el).simulate("keypress",e.extend({},r.eventProps,{keyCode:13,which:13,charCode:13})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:13})))},"{backspace}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&t.bounds([i[0]-1,i[0]]),t.text("","end"),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:8})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:8})))},"{del}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&t.bounds([i[0],i[0]+1]),t.text("","end"),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:46})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:46})))},"{rightarrow}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&(i[1]+=1),t.bounds([i[1],i[1]]).select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:39})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:39})))},"{leftarrow}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&(i[0]-=1),t.bounds([i[0],i[0]]).select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:37})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:37})))},"{selectall}":function(e){e.bounds("all").select()}},e.simulate.ext_disableQuirkDetection!==!0&&e(document).ready(function(){var t=e("<div/>").css({height:1,width:1,position:"absolute",left:-1e3,top:-1e3}).appendTo("body");t.simulate("key-sequence",{sequence:"Â  Â ",delay:1,callback:function(){e.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd="Â Â  "===t.text(),t.remove()}})})}(jQuery))}(jQuery);
//# sourceMappingURL=domtest.min.js.map