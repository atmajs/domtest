/*!
 * DomTest v0.10.6
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2014 Atma.js and other contributors
 */
!function(e,t){function n(){var e;if(null==o&&(e="MaskJS"),null==i&&(e="jQuery"),e)throw Error(e+" was not loaded");var n=t(r,o,i,a);return"undefined"!=typeof module&&module.exports?void(module.exports=n):"undefined"!=typeof define&&define.amd?void define(function(){return n}):void(r.DomTest=n)}var r="undefined"!=typeof global?global:window,o=r.mask||r.atma&&r.atma.mask,i=r.jQuery||r.$,a=r.assert||{};n()}(this,function(e,t,n,r){"use strict";function o(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];"string"==typeof n&&(n=t.parse(n),n.type!==t.Dom.FRAGMENT&&(n={nodes:[n]}));for(var i,s,u,l,c=0,p=r.length;p>c;c++)l=r[c],"function"!=typeof l?null==i?i=l:s=l:u=l;var f=new a(e,n,i,s);return f.on("complete",u),T(f.process),f}function i(){}function a(e,t,r,o){e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(e=e.childNodes),e.nodeType===Node.DOCUMENT_NODE&&(e=e.body),this.model=r,this.compo=o,this.$=n(e),this.stack=[{$:this.$,node:t}],0===this.$.length&&this.report_(Error("No elements to test <root>")),this.errors=[],this.process=this.process.bind(this),this.next_=this.next_.bind(this),this.backtrace=(new Error).stack}var s;!function(e,t){!function(){function n(e){return Array.isArray(e)}function r(e){return"number"==typeof e}function o(e){return"string"==typeof e}function i(e){return void 0===e}function a(e){return"RegExp"===f(e)}function s(e){return"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function l(e){return"undefined"==typeof Buffer?!1:e instanceof Buffer}function c(e){return"Arguments"===f(e)}function p(e,t){return 0==o(e)?e:e.length<t?e:e.slice(0,t)}var f,d,h,v,g=Array.prototype.slice,y={errors:0};!function(){function e(){var e=[];for(var t in e)e.push(t);return e}f=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},d=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},v=Object.keys?Object.keys:e,h=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)e[n]=t[n];return e}}();var m;!function(){m=function(e){if(null==e)return"";for(var t=e.split("\n"),n=1,r=t.length,o=/(^([ \t]*at )?[\w\.]*assert[_\.])|(^([ \t]*at )?\w+\.assert)/i,i=/(^([ \t]*at )?runCase)/i,a=0,s=t.length;++a<s;)if(o.test(t[a])&&(n=a+1),i.test(t[a])){r=a;break}return t.splice(r),t.splice(1,n-1),t.join("\n")}}();var b;!function(){function e(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=t(this),this.generatedMessage=!0);var n=e.stackStartFunction||b;Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack,this.stack=m(this.stack)}function t(e){var t=JSON.stringify(e.actual,n),r=JSON.stringify(e.expected,n);return p(t,128)+" "+e.operator+" "+p(r,128)}function n(e,t){return i(t)?""+t:!r(t)||!isNaN(t)&&isFinite(t)?u(t)||a(t)?t.toString():t:t.toString()}b=function(t,n,r,o,i){var a=new e({message:r,actual:t,expected:n,operator:o,stackStartFunction:i});throw a},y.AssertionError=e,y.fail=function(t){var n=t;throw"string"==typeof t&&(n=new e({message:message})),y.errors++,n},y.prepairStack=m,d(e,Error)}(),function(){function e(e,r,i,a){var s,l,c;if(n(r)){var p=g.call(r);l=p.shift(),c=p}u(r)&&(l=r,c=[]),o(i)&&(a=i,i=null);try{l.apply(null,c)}catch(f){s=f}if(a=""+(i&&i.name&&" ("+i.name+")."||".")+(a&&" "+a||"."),e===!0&&null==s&&b(s,i,"Missing expected exception"+a),e===!1&&t(s,i)&&b(s,i,"Got unwanted exception"+a),e&&s&&i&&!t(s,i)||!e&&s)throw s}function t(e,t){return e&&t?a(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}y.throws=function(){e.apply(this,[!0].concat(g.call(arguments)))},y.doesNotThrow=function(){e.apply(this,[!1].concat(g.call(arguments)))},y.ifError=function(e){if(e)throw e}}(),function(){function e(){for(var e,t,n,r,o,i=arguments.length;--i>-1;)switch(o=arguments[i],typeof o){case"function":e=o;break;case"object":n=o;break;case"number":r=o;break;case"string":t=o}null==this.callbacks&&(this.callbacks=[]),(isNaN(r)||1>r)&&(r=1);var a=this.callbacks,s={count:r,name:t,stack:m((new Error).stack)};return a.push(s),function(){return 0===--s.count&&a.splice(a.indexOf(s),1),"function"!=typeof e?null:e.apply(n,arguments)}}function t(){for(var e,t,n,r="function",o=0,i=arguments.length;--i>-1;)switch(n=arguments[i],typeof n){case"function":t=n;break;case"object":e=n;break;case"number":o=n;break;case"string":r=n}var a=this.callbacks;return null==a&&(a=this.callbacks=[]),function(n){if(--o<0){var i={count:o,name:"<avoid>"+(r||""),argument:n};a.push(i)}t&&t.apply(e,arguments)}}y.callbacks=[],y.await=e,y.avoid=t}(),function(){y.ok=function o(e,t){e||b(e,!0,t,"==",o)};var e,t,n,r;e=y.equal=function i(e,t,n){e!=t&&b(e,t,n,"==",i)},t=y.notEqual=function a(e,t,n){e==t&&b(e,t,n,"!=",a)},n=y.strictEqual=function s(e,t,n){e!==t&&b(e,t,n,"===",s)},r=y.notStrictEqual=function u(e,t,n){e===t&&b(e,t,n,"!==",u)},y.eq_=e,y.notEq_=t,y.strictEq_=n,y.notStrictEq_=r}(),function(){function e(e,n){if(null==e||null==n)return e==n;if(e===n)return!0;c(e)&&(e=g.call(e)),c(e)&&(e=g.call(e));var r=f(e);switch(r){case"Number":case"Boolean":case"String":return e==n;case"RegExp":case"Date":return e.toString()===n.toString()}if(l(e)&&l(n)){if(e.length!=n.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!=n[o])return!1;return!0}return s(e)||s(n)?t(e,n):e===n}function t(t,n){var r,o,i=v(t).sort(),a=v(n).sort();if(i.length!=a.length)return!1;for(o=i.length;-1!==--o;)if(i[o]!=a[o])return!1;for(o=i.length;-1!==--o;)if(r=i[o],!e(t[r],n[r]))return!1;return!0}var n,r;y.deepEqual=n=function o(t,n,r){e(t,n)===!1&&b(t,n,r,"deepEqual",o)},y.notDeepEqual=r=function i(t,n,r){e(t,n)===!0&&b(t,n,r,"notDeepEqual",i)},y.deepEq_=n,y.notDeepEq_=r}(),function(){var e,t,n,r;e=y.lessThan=function(t,n,r){t<Number(n)&&b(t,n,r,"<",e)},t=y.lessThanOrEqual=function(t,n,r){t<=Number(n)&&b(t,n,r,"<=",e)},n=y.greaterThan=function(e,t,r){e>Number(t)&&b(e,t,r,">",n)},r=y.greaterThanOrEqual=function(e,t,n){e>=Number(t)&&b(e,t,n,">=",r)},y.lt_=e,y.lte_=t,y.gt_=n,y.gte_=r}(),function(){function e(e){var t=Object.prototype.toString.call(e).replace("[object ","").replace("]","");switch(t){case a:case s:case l:case c:case f:case p:case d:return t;case u:return"number"==typeof e.length&&"function"==typeof e.splice&&"function"==typeof e.indexOf?s:u;case"Null":case"Undefined":return h;default:return v}}function t(e,t,r,o,a){var s=n(e,t);s!==r&&(r!==!1||s===!0)&&("string"==typeof s&&(o="("+s+") "+(o||"")),b(e,t,o,i,a))}function n(t,r){var o,i,g=e(t),y=e(r);switch(g){case l:return l===y?-1!==t.indexOf(r)||"Not a substring of "+t:c===y?r.test(t)||"RegExp failed: "+t:"Unexpected types: String-"+y;case c:case a:case p:case f:case d:return t.toString()===r.toString()||"Unexpected value: "+t;case v:return t===r||"Reference check";case u:if(l===y)return r in t||"Property expected:"+r;if(u===y){for(var m in r){if(m in t==!1)return"Property expected: "+m;if(o=e(t[m]),i=e(r[m]),i!==h){if(o!==i)return"Type missmatch: "+o+"-"+i;if(l!==o){var b=n(t[m],r[m]);if(b!==!0)return b}else if(t[m]!==r[m])return"Unexpected value: "+t[m]}}return!0}return"Unexpected types: Object-"+y}if(s===g)switch(y){case p:case l:case f:return-1!==t.indexOf(r)||"Array should contain: "+r;case a:case c:case d:var _=r.toString();return t.some(function(e){return e.toString()===_})||"Array should contain: "+_;case s:var E,x=0,k=r.length,w=t.length;e:for(;k>x;x++)switch(i=e(r[x])){case l:case p:case f:case c:case a:case d:var b=n(t,r[x]);if(b!==!0)return b;continue e;case u:case s:for(E=0;w>E&&(i!==e(t[E])||n(t[E],r[x])!==!0);E++);if(E===w)return i+" is not a subset";continue e}return!0}return"Unexpected types: "+g+"-"+y}var r,o;r=y.has=function g(e,n,r){t(e,n,!0,r,g)},o=y.hasNot=function m(e,n,r){t(e,n,!1,r,m)},y.has_=r,y.hasNot_=o;var i="⊇",a="Date",s="Array",u="Object",l="String",c="RegExp",p="Number",f="Boolean",d="Function",h="<undefined>",v="<reference-check>"}(),function(){function e(e,n,r,o,i){var a=t(e,n);a!==r&&b(e,n,o,"~~",i)}function t(e,n){if(null==n)return e==n;if("string"==typeof n){var r=f(e);switch(n){case"Object":return null!=e&&"object"==typeof e}return r===n}return"function"==typeof n?e instanceof n:"object"==typeof n&&n.constructor?t(e,n.constructor):!1}var n,r;n=y.is=function o(t,n,r){e(t,n,!0,r,o)},r=y.isNot=function i(t,n,r){e(t,n,!1,r,i)},y.is_=n,y.isNot_=r}(),function(){function t(e){var t={},r=["eq_","notEq_","deepEq_","notDeepEq_","has_","hasNot_","is_","isNot_","lt_","lte_","gt_","gte_"];r.forEach(function(e){function r(e,t,n,r,o,i){var a=t[n];"function"==typeof a&&(a=a.apply(t,r)),y[e](a,o,i)}function o(e,t,n,r,o){var i=n(t);y[e](i,r,o)}function i(e,t,n,r){y[e](t,n,r)}t[e]=function(t){var a,s=g.call(arguments);switch(n(t)&&(a=s[s.length-1],s=t),e){case"has_":case"hasNot_":var u=s[0];if("string"!=typeof u)break;if(null!=this[u]&&1!==s.length)break;var l=s[1],c=this.find(u);if(0===c.length&&(c=this.filter(u)),"has_"===e){if(isNaN(l))return i("notEq_",c.length,0,a),this;i("eq_",c.length,l,a)}if("hasNot_"===e){if(isNaN(l))return i("eq_",c.length,0,a),this;i("notEq_",c.length,l,a)}return this}var p=s.pop(),f=s.shift();return"string"==typeof f?(r(e,this,f,s,p,a),this):"function"==typeof f?(o(e,this,f,p,a),this):this}}),r.forEach(function(n){y.$[n]=function(){var e=g.call(arguments),r=e.shift();return t[n].apply(r,e)},void 0===e.fn[n]&&(e.fn[n]=t[n])})}y.setDOMLibrary=t,y.$={};var r=e.$||e.jQuery||e.Zepto||e.Kimbo;null!=r&&t(r)}(),function(){function e(e){var n=t[e];if(null==n)return!1;var r=n.length;if(0===r)return!1;for(var o,i=g.call(arguments,1);-1!==--r;)o=n[r],o.apply(null,i);return!0}!function(e,t){function n(e){return function(){var n;t("start");try{n=e.apply(this,arguments)}catch(r){if(t("fail",r)===!1)throw r;return null}return t("success"),n}}for(var r in e)if("function"==typeof e[r]){switch(r){case"callback":case"await":case"avoid":case"prepairStack":case"on":case"off":continue}r[0]!==r[0].toUpperCase()&&(e[r]=n(e[r]))}}(y,e),y.on=function(e,n){null==t[e]&&(t[e]=[]),t[e].push(n)},y.off=function(e,n){var r=t[e];if(null!=r){if(null==n)return void(r.length=0);for(var o=r.length;-1!==--o;)r[o]===n&&r.splice(o,1)}};var t={}}(),t.assert=h(y.ok,y)}(),s=t.assert}(e,{});var u;!function(){u=function(e){return"string"==typeof e.jquery?!0:e.constructor===n.fn.constructor}}();var l,c,p,f;!function(){function e(){var e=[];for(var t in e)e.push(t);return e}l=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},c=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},f=Object.keys?Object.keys:e,p=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)e[n]=t[n];return e}}();var d;!function(){d=console.error.bind(console,"<TestDom>")}();var h,v,g;!function(){function e(e){null!=e&&(e.length=0)}h=function(e,t){if(null!=e)for(var n=0;n<e.length;n++)e[n].apply(null,t||[])},v=function(e,t,n){if(null!=n){var r="_"+t+"Cb",o=e[r];null==o&&(o=e[r]=[]),o.push(n)}},g=function(t){e(t._rejectCb),e(t._alwaysCb),e(t._resolveCb)}}();var y,m;!function(){function e(e,t,n,r){if(null==t.expression){var o=t.attr,i=[];for(var a in o)a===o[a]&&i.push(a);if(0!==i.length)return i;var s={},u=0;for(var a in o)s[a]=o[a],u++;return u>0?[s]:(d("Expression expected for",t.tagName),null)}return""===t.expression?[]:e(t.expression,n,null,r)}y=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.unshift(t.Utils.Expression.evalStatements),e.apply(null,n)},m=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.unshift(t.Utils.Expression.evalStatements),e.apply(null,n)[0]}}();var b,_,E,x,k,w;!function(){b=function(e){return null!=n.fn[e]},_=function(e,t,n){var r=e[t],o=n.pop();if("function"==typeof r){var i=r.apply(e,n);return void s.equal(i,o)}s.equal(r,o)},E=function(e){return null!=s.$[e+"_"]},x=function(e,t,n){s.$[t+"_"].apply(e,[e].concat(n))},k=function(e){function t(t,n){return r.total++,t(e)?n:void 0}return t(E,x)||t(b,_)},w=function(e,t,n){"function"!=typeof s[t]&&(e=e[t],t="equal"),s[t].apply(s,[e].concat(n))}}();var T;!function(){T=function(e){var t=void 0!==arguments[1]?arguments[1]:0;return t>5?e():null!=n.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd?(T=function(e){setTimeout(e)},void T(e)):void setTimeout(function(){return T(e,++t)})}}();var C={};!function(){function e(e,t){return function(n){var r=n.node.expression;/^\s*('|")/.test(r)&&(r=m(r));var o=n.$[e](r);t&&0===o.length&&(o=n.$[t](r)),s.notEqual(o.length,0,"Selector does not matched any elements: "+e+"("+r+")"),n.$=o}}[["find","filter"],["filter"],["closest"],["children"],["siblings"]].forEach(function(t){var n=t,r=n[0],o=n[1];C[r]=e(r,o)})}();var S;!function(){function e(e,t){function n(e){var n=e.text();return-1!==n.trim().indexOf(t)}function r(e){return function(n){return n.attr(e).trim()===t}}function o(t){null==i&&(i=e.children("option"));for(var n,r=i.length,o=0;r>o;o++)if(n=i.eq(o),t(n,o)===!0)return[n,o];return null}var i,a=o(n);null==a&&(a=o(r("value"))),null==a&&(a=o(r("name"))),null==a&&(a=o(r("id"))),s.notEqual(a,null,"Option not found: "+t);var u=a,l=u[0],c=u[1];e.get(0).selectedIndex=c,l.simulate("click"),e.trigger("change")}function t(e,t){function n(t,n){return void 0!==e.selectionStart?(e.selectionStart=t,void(e.selectionEnd=n)):void 0!==e.setSelectionRange?void e.setSelectionRange(t,n):void console.error("<DomTest> Unable to selec the range")}var r=e.value;if(0===t.length)return void n(0,r.length-1);var o=t[0];if("string"==typeof o){var i=r.indexOf(o);return void(-1!==i&&n(i,i+o.length))}var a=t,i=a[0],s=a[1];"number"==typeof i&&"number"==typeof s&&n(i,s)}S={$$run:function(e,t,n,r){t.ensureInDom_();var o=S[e];return o?void o(t,n,r):(n.$.simulate(e,n.node.attr),void setTimeout(r))},press:function(e,t,n){var r=m(t.node);t.$.simulate("key-combo",{combo:r}),setTimeout(n)},type:function(e,t,n){var r=m(t.node);t.$.simulate("key-sequence",{sequence:r,delay:10,callback:function(){t.$.removeData("simulate-keySequence.selection").off("keyup.simulate-keySequence").off("mouseup.simulate-keySequence"),n()}})},select:function(n,r,o){var i=r.$.filter("select").eq(0);if(0!==i.length){var a=m(r.node);return e(i,a,o),void setTimeout(o)}var i=r.$.filter("input, textarea").eq(0);if(0!==i.length){var u=y(r.node);return i.get(0).focus(),t(i.get(0),u),void setTimeout(o)}s(!1,'`Select` should be invoked in "input" or "select" context')}}}();var D;!function(){function e(e){var t;for(t in e.attr)break;return delete e.attr[t],t}D={"with":function(e,t,n){var r=t.node.expression.trim();switch(r){case"model":return t.$=e.getCurrentModel_(),void n()}C.find(t),n()},"debugger":function(e,t,n){t.$;n()},slot:function(e,t,n){var r=t.node.fn;return 3===r.length?void r(t.$,e.wrapAssertion_(),n):(r(t.$,e.wrapAssertion_()),void n())},"do":function(t,n,r){S.$$run(e(n.node),t,n,r)},call:function(t,n,r){var o=e(n.node);s.is(n.$[o],"Function");var i=y(n.node,t.model,t.compo);n.$[o].apply(n.$,i),setTimeout(r)},await:function(e,t,n){function r(){var e=t.$.find(a);return 0===e.length&&(e=t.$.filter(a)),l>c&&0===e.length?(c+=u,void setTimeout(r,u)):(c>l&&s(!1,"<await> Elements are not resolved: "+a),C.find(t),void n())}var o=t.node.expression,i=parseFloat(o);if(i===i)return void setTimeout(n,i);var a=o,u=200,l=1600,c=0;r()}}}(),p(D,{hasClass:function(e,t,n){var r=y(t.node),o=k("hasClass");1===r.length&&r.push(!0),o(t.$,"hasClass",r,t.node.attr),n()}});var P;!function(){P=["blur","focus","load","resize","scroll","unload","beforeunload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","type","press"]}();var N={report:null};!function(){o.config=function(e){return"sttring"==typeof e?N[e]:(p(N,e),o)}}(),i.prototype={resolved:null,rejected:null,_resolveCb:null,_rejectCb:null,_alwaysCb:null,resolve:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.resolved=e,h(this._resolveCb,e),h(this._alwaysCb),g(this)},reject:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.rejected=e,h(this._rejectCb,e),h(this._alwaysCb),g(this)},done:function(e){return null==e?this:this.resolved?(e.apply(null,this.resolved),this):(null==this.rejected&&v(this,"resolve",e),this)},fail:function(e){return null==e?this:this.rejected?(e.apply(null,this.rejected),this):(null==this.resolved&&v(this,"reject",e),this)},always:function(e){return null==e?this:this.rejected||this.resolved?(e(),this):(v(this,"always",e),this)},then:function(e,t){return this.done(e).fail(t)}};var R;!function(){function e(e,t){null==e._listeners&&(e._listeners={});var n=e._listeners[t];return null==n&&(n=e._listeners[t]=[]),n}function t(t,n,r){for(var o,i=e(t,n),a=-1,s=i.length;++a<s;)o=i[a],o.apply(t,r)}R=function(){},R.prototype={_listeners:null,_events:{complete:1,fail:1,success:1,progress:1},on:function(t,n){if(null==n)return this;if(t in this._events==!1)throw Error("Unsupported event "+t+". Events: "+Object.keys(this._event));return e(this,t).push(n),this},off:function(t,n){var r=e(this,t),o=r.indexOf(n);return r.splice(o,-1),this},emit:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t(this,e,n),this},has:function(t){return 0!==e(this,t).length}}}();var O,M;!function(){O={report:function(e){if(N.report)return void N.report(e);if(r){if(r.ifError)return void r.ifError(e);if(null!=e&&r.fail)return void r.fail(e)}if(e)throw e}},M=function(e){var n=[],r=t.render("\n			pre > +each(.) > div {\n				span style='color: ~[: errored ? \"red\" : \"green\"]' > '~[hint]'\n				span > '~[text]'\n			}\n		",n);return e.appendChild(r),function(e,t,r){n.push({text:e.formatCurrentLine_(r),hint:r?"✘ ":"✓ ",errored:Boolean(r)}),r&&n.push({text:String(r),hint:" "})}}}(),a.prototype={attachReporter:function(e){return new e(this),this},getCurrent_:function(){return this.stack[this.stack.length-1]},getCurrentModel_:function(){var e=this.getCurrent_().$;return e.model?e.model()||this.model:this.model},getCurrentCompo_:function(){var e=this.getCurrent_().$;return e.compo?e.compo()||this.compo:this.compo},getCurrentArgs_:function(){var e=this.getCurrent_();return y(e.node,this.getCurrentModel_(),this.getCurrentCompo_())},getNext_:function(e){var t=this.getCurrent_();if(null==t)return null;if(e!==!1&&t.node.nodes)return this.stack.push({$:t.$,node:t.node.nodes[0]}),this.getCurrent_();for(this.stack.pop();this.stack.length>0;){var n=this.getCurrent_(),r=n.node.nodes,o=r.indexOf(t.node);if(o>=r.length-1)t=this.stack.pop();else{if(-1!==o)return this.stack.push({$:n.$,node:r[o+1]}),this.getCurrent_();console.error("Node not found"),t=this.stack.pop()}}return null},process:function(e){var t=this.getNext_(null==e);if(null==t)return this.emit("complete",this.errors),void(this.errors.length?this.reject(this.errors):this.resolve());var n=t.node.tagName,r=C[n];if(r){var e=this.run_(r,[t]);return void this.next_(e)}if(-1!==P.indexOf(n))return void this.run_(S.$$run,[n,this,t,this.next_]);var o=D[n];if(o)return void this.run_(o,[this,t,this.next_]);var i=this.getCurrentArgs_(),a=t.$;if(u(a)){var s=k(n);if(s){var l=this.run_(s,[a,n,i,t.node.attr]);return void this.next_(l)}return d("Uknown test function: ",n),void this.next_()}var l=this.run_(w,[a,n,i]);this.next_(l)},next_:function(e){this.emit("progress",this,this.getCurrent_().node,e),this.process(e)},run_:function(e,t,n){var r;try{e.apply(n,t)}catch(o){r=o}this.report_(r);var i=t[t.length-1];return null!=r&&"function"==typeof i&&i(r),r},report_:function(e){e=this.prepairError_(e),O.report(e,this),this.emit(e?"fail":"success",e),e&&this.errors.push(e)},formatCurrentLine_:function(){for(var e=this.getCurrent_().node,n="",r=e.parent;null!=r&&r.type!==t.Dom.FRAGMENT;)n+="  ",r=r.parent;return n+t.stringify({tagName:e.tagName,attr:e.attr,expression:e.expression},2).slice(0,-1)},prepairError_:function(e){if(null==e)return null;var n=this.getCurrent_().node,r=t.stringify(n,2),o=r.split("\n");return o.length>7&&(r=o.splice(0,6).join("\n")),Object.defineProperty(e,"stack",{value:r+"\n"+s.prepairStack(this.backtrace),writable:!0,enumerable:!0,configurable:!0}),e.generatedMessage=!1,e},ensureInDom_:function(){var e=this;this.ensureInDom_=function(){};for(var t=this.$.get(0).parentNode,n=!1;null!=t;){if(t.nodeType===Node.DOCUMENT_NODE){n=!0;break}t=t.parentNode}n||(this.$.appendTo("body"),this.done(function(){return e.$.remove()}))},assert:null,wrapAssertion_:function(){var e=this;if(null!=this.assert)return this.assert;var t=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.run_(t&&s[t]||s,n)}};this.assert=t();for(var n in s)"function"==typeof s[n]&&(this.assert[n]=t(n));return this.assert}},p(a.prototype,R.prototype),p(a.prototype,i.prototype);var A;return function(){function e(e){var t=e.findAll(":utest"),n=t.length,o=new i;return 0===n?(r(!1,"No `:utest` components found"),o.reject()):(t.forEach(function(e){DomTest(e.$,e).done(function(){0===--n&&o.resolve()})}),o)}A=function(n,r){if("string"!=typeof n)return e(n);var o=new Compo;return t.render(n,r,null,null,o),e(o)},t.registerHandler(":utest",t.Compo({render:function(e,t,r){r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(r=r.childNodes),this.$=n(r)}}))}(),o.create=o,o.compo=A,o.ProgressReporters={Dom:M},o}),function(e){e.simulate&&e.simulate.prototype.simulateKeyCombo||(!function(){function e(e){return"undefined"!=typeof e.value?"value":"undefined"!=typeof e.text?"text":"undefined"!=typeof e.textContent?"textContent":"innerText"}function t(){}function n(){}function r(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("StartToStart",t)<=0)return 0;if(e.compareEndPoints("StartToEnd",t)>=0)return n;for(var r=0;e.compareEndPoints("StartToStart",t)>0;++r,e.moveStart("character",-1));return r}function o(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("EndToEnd",t)>=0)return n;if(e.compareEndPoints("EndToStart",t)<=0)return 0;for(var r=0;e.compareEndPoints("EndToStart",t)>0;++r,e.moveEnd("character",-1));return r}function i(){}function a(){}function s(e,t){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;if(e===t)return null;for(;e.parentNode;){if(e=e.parentNode,e==t)return null;if(e.nextSibling)return e.nextSibling}return null}function u(e,t,n,r){if(!(0>=t)){var o=e[n?"startContainer":"endContainer"];for(3==o.nodeType&&(t+=e[n?"startOffset":"endOffset"]);o;){if(3==o.nodeType){var i=o.nodeValue.length;if(i>=t){if(e[n?"setStart":"setEnd"](o,t),t==i){for(var a=s(o,r);a&&3==a.nodeType&&0==a.nodeValue.length;a=s(a,r))e[n?"setStartAfter":"setEndAfter"](a);a&&1==a.nodeType&&"BR"==a.nodeName&&e[n?"setStartAfter":"setEndAfter"](a)}return}e[n?"setStartAfter":"setEndAfter"](o),t-=i}o=s(o,r)}}}function l(e,t){return e.compareBoundaryPoints(v,t)<=0?0:e.compareBoundaryPoints(m,t)>=0?t.toString().length:(e=e.cloneRange(),e.setEnd(t.endContainer,t.endOffset),t.toString().replace(/\r/g,"").length-e.toString().replace(/\r/g,"").length)}function c(e,t){return e.compareBoundaryPoints(y,t)>=0?t.toString().length:e.compareBoundaryPoints(g,t)<=0?0:(e=e.cloneRange(),e.setStart(t.startContainer,t.startOffset),e.toString().replace(/\r/g,"").length)}function p(){}var f="onfocusin"in document.createElement("input")?"focusin":"focus",d=document.createElement("div");d.appendChild(document.createTextNode("x-")),d.appendChild(document.createTextNode("x")),d.normalize();var h=3==d.firstChild.length;bililiteRange=function(t,r){function o(e){e&&9==e.which?s._nativeSelect(s._nativeRange(t.bililiteRangeSelection)):t.bililiteRangeSelection=s._nativeSelection()}var s;if(r)s=new p;else if(window.getSelection&&t.setSelectionRange)try{t.selectionStart,s=new i}catch(u){s=new p}else s=window.getSelection?new a:document.selection?new n:new p;if(s._el=t,s._doc=t.ownerDocument,s._win="defaultView"in s._doc?s._doc.defaultView:s._doc.parentWindow,s._textProp=e(t),s._bounds=[0,s.length()],!("bililiteRangeMouseDown"in s._doc)){var l={_el:s._doc};s._doc.bililiteRangeMouseDown=!1,bililiteRange.fn.listen.call(l,"mousedown",function(){s._doc.bililiteRangeMouseDown=!0}),bililiteRange.fn.listen.call(l,"mouseup",function(){s._doc.bililiteRangeMouseDown=!1})}if("bililiteRangeSelection"in t||(o(),"onbeforedeactivate"in t?s.listen("beforedeactivate",o):s.listen("mouseup",o).listen("keyup",o),s.listen(f,function(){s._doc.bililiteRangeMouseDown||s._nativeSelect(s._nativeRange(t.bililiteRangeSelection))})),!("oninput"in t)){var c=function(){s.dispatch({type:"input"})};s.listen("keyup",c),s.listen("cut",c),s.listen("paste",c),s.listen("drop",c),t.oninput="patched"}return s},t.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(e){if(bililiteRange.bounds[e])this._bounds=bililiteRange.bounds[e].apply(this);else{if(!e){var t=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return t[1]=Math.max(t[0],t[1]),t}this._bounds=e}return this},select:function(){var e=this._el.bililiteRangeSelection=this.bounds();return this._el==document.activeElement&&this._nativeSelect(this._nativeRange(e)),this.dispatch({type:"select"}),this},text:function(e,t){if(arguments.length){{var n=this.bounds();this._el}return this.dispatch({type:"beforeinput",data:e,bounds:n}),this._nativeSetText(e,this._nativeRange(n)),"start"==t?this.bounds([n[0],n[0]]):"end"==t?this.bounds([n[0]+e.length,n[0]+e.length]):"all"==t&&this.bounds([n[0],n[0]+e.length]),this.dispatch({type:"input",data:e,bounds:n}),this}return this._nativeGetText(this._nativeRange(this.bounds())).replace(/\r/g,"")},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this},sendkeys:function(e){function t(e,t){/^{[^}]*}$/.test(t)&&(t=t.slice(1,-1));for(var n=0;n<t.length;++n){var r=t.charCodeAt(n);e.dispatch({type:"keypress",keyCode:r,which:r,charCode:r})}e.text(t,"end")}var n=this;return this.data().sendkeysOriginalText=this.text(),this.data().sendkeysBounds=void 0,e.replace(/{[^}]*}|[^{]+/g,function(e){(bililiteRange.sendkeys[e]||t)(n,e,t)}),this.bounds(this.data().sendkeysBounds),this.dispatch({type:"sendkeys",which:e}),this},top:function(){return this._nativeTop(this._nativeRange(this.bounds()))},scrollIntoView:function(e){var t=this.top();return(this._el.scrollTop>t||this._el.scrollTop+this._el.clientHeight<t)&&(e?e.call(this._el,t):this._el.scrollTop=t),this},wrap:function(e){return this._nativeWrap(e,this._nativeRange(this.bounds())),this},selection:function(e){return arguments.length?this.bounds("selection").text(e,"end").select():this.bounds("selection").text()},clone:function(){return bililiteRange(this._el).bounds(this.bounds())},all:function(e){return arguments.length?(this.dispatch({type:"beforeinput",data:e}),this._el[this._textProp]=e,this.dispatch({type:"input",data:e}),this):this._el[this._textProp].replace(/\r/g,"")},element:function(){return this._el},dispatch:function(e){e=e||{};var t=document.createEvent?document.createEvent("CustomEvent"):this._doc.createEventObject();t.initCustomEvent&&t.initCustomEvent(e.type,!!e.bubbles,!!e.cancelable,e.detail);for(var n in e)t[n]=e[n];var r=this._el;return setTimeout(function(){try{r.dispatchEvent?r.dispatchEvent(t):r.fireEvent("on"+e.type,document.createEventObject())}catch(n){var o=r["listen"+e.type];if(o)for(var i=0;i<o.length;++i)o[i].call(r,t)}},0),this},listen:function(e,t){var n=this._el;if(n.addEventListener)n.addEventListener(e,t);else{n.attachEvent("on"+e,t);var r=n["listen"+e]=n["listen"+e]||[];r.push(t)}return this},dontlisten:function(e,t){var n=this._el;if(n.removeEventListener)n.removeEventListener(e,t);else try{n.detachEvent("on"+e,t)}catch(r){var o=n["listen"+e];if(o)for(var i=0;i<o.length;++i)o[i]===t&&(o[i]=function(){})}return this}},bililiteRange.fn=t.prototype,bililiteRange.extend=function(e){for(fn in e)t.prototype[fn]=e[fn]},bililiteRange.bounds={all:function(){return[0,this.length()]},start:function(){return[0,0]},end:function(){return[this.length(),this.length()]},selection:function(){return this._el==document.activeElement?(this.bounds("all"),this._nativeSelection()):this._el.bililiteRangeSelection}},bililiteRange.sendkeys={"{enter}":function(e){var t="\n".charCodeAt(0);e.dispatch({type:"keypress",keyCode:t,which:t,charCode:t}),e.insertEOL()},"{tab}":function(e,t,n){n(e,"	")},"{newline}":function(e,t,n){n(e,"\n")},"{backspace}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0]-1,t[0]]),e.text("","end")},"{del}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0],t[0]+1]),e.text("","end")},"{rightarrow}":function(e){var t=e.bounds();t[0]==t[1]&&++t[1],e.bounds([t[1],t[1]])},"{leftarrow}":function(e){var t=e.bounds();t[0]==t[1]&&--t[0],e.bounds([t[0],t[0]])},"{selectall}":function(e){e.bounds("all")},"{selection}":function(e){for(var t=e.data().sendkeysOriginalText,n=0;n<t.length;++n){var r=t.charCodeAt(n);e.dispatch({type:"keypress",keyCode:r,which:r,charCode:r})}e.text(t,"end")},"{mark}":function(e){e.data().sendkeysBounds=e.bounds()}},n.prototype=new t,n.prototype._nativeRange=function(e){var t;return"INPUT"==this._el.tagName?t=this._el.createTextRange():(t=this._doc.body.createTextRange(),t.moveToElementText(this._el)),e&&(e[1]<0&&(e[1]=0),e[0]>this.length()&&(e[0]=this.length()),e[1]<t.text.replace(/\r/g,"").length&&(t.moveEnd("character",-1),t.moveEnd("character",e[1]-t.text.replace(/\r/g,"").length)),e[0]>0&&t.moveStart("character",e[0])),t},n.prototype._nativeSelect=function(e){e.select()},n.prototype._nativeSelection=function(){var e=this._nativeRange(),t=this.length(),n=this._doc.selection.createRange();try{return[r(n,e),o(n,e)]}catch(i){return n.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[t,t]}},n.prototype._nativeGetText=function(e){return e.text},n.prototype._nativeSetText=function(e,t){t.text=e},n.prototype._nativeEOL=function(){"value"in this._el?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("\n<br/>")},n.prototype._nativeTop=function(e){var t=this._nativeRange([0,0]);return e.boundingTop-t.boundingTop},n.prototype._nativeWrap=function(e,t){var n=document.createElement("div");n.appendChild(e);var r=n.innerHTML.replace("><",">"+t.htmlText+"<");t.pasteHTML(r)},i.prototype=new t,i.prototype._nativeRange=function(e){return e||[0,this.length()]},i.prototype._nativeSelect=function(e){this._el.setSelectionRange(e[0],e[1])},i.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},i.prototype._nativeGetText=function(e){return this._el.value.substring(e[0],e[1])},i.prototype._nativeSetText=function(e,t){var n=this._el.value;this._el.value=n.substring(0,t[0])+e+n.substring(t[1])},i.prototype._nativeEOL=function(){this.text("\n")},i.prototype._nativeTop=function(e){var t=this._el.cloneNode(!0);t.style.visibility="hidden",t.style.position="absolute",this._el.parentNode.insertBefore(t,this._el),t.style.height="1px",t.value=this._el.value.slice(0,e[0]);var n=t.scrollHeight;return t.value="X",n-=t.scrollHeight,t.parentNode.removeChild(t),n},i.prototype._nativeWrap=function(){throw new Error("Cannot wrap in a text element")},a.prototype=new t,a.prototype._nativeRange=function(e){var t=this._doc.createRange();return t.selectNodeContents(this._el),e&&(u(t,e[0],!0,this._el),t.collapse(!0),u(t,e[1]-e[0],!1,this._el)),t},a.prototype._nativeSelect=function(e){this._win.getSelection().removeAllRanges(),this._win.getSelection().addRange(e)},a.prototype._nativeSelection=function(){var e=this._nativeRange();if(0==this._win.getSelection().rangeCount)return[this.length(),this.length()];var t=this._win.getSelection().getRangeAt(0);return[l(t,e),c(t,e)]},a.prototype._nativeGetText=function(){return String.prototype.slice.apply(this._el.textContent,this.bounds())},a.prototype._nativeSetText=function(e,t){t.deleteContents(),t.insertNode(this._doc.createTextNode(e)),h&&this._el.normalize()},a.prototype._nativeEOL=function(){var e=this._nativeRange(this.bounds());e.deleteContents();var t=this._doc.createElement("br");
t.setAttribute("_moz_dirty",""),e.insertNode(t),e.insertNode(this._doc.createTextNode("\n")),e.collapse(!1)},a.prototype._nativeTop=function(e){if(0==this.length)return 0;if(""==e.toString()){var t=this._doc.createTextNode("X");e.insertNode(t)}var n=this._nativeRange([0,1]),r=e.getBoundingClientRect().top-n.getBoundingClientRect().top;return t&&t.parentNode.removeChild(t),r},a.prototype._nativeWrap=function(e,t){t.surroundContents(e)};var v=0,g=1,y=2,m=3;p.prototype=new t,p.prototype._nativeRange=function(e){return e||[0,this.length()]},p.prototype._nativeSelect=function(){},p.prototype._nativeSelection=function(){return[0,0]},p.prototype._nativeGetText=function(e){return this._el[this._textProp].substring(e[0],e[1])},p.prototype._nativeSetText=function(e,t){var n=this._el[this._textProp];this._el[this._textProp]=n.substring(0,t[0])+e+n.substring(t[1])},p.prototype._nativeEOL=function(){this.text("\n")},p.prototype._nativeTop=function(){return 0},p.prototype._nativeWrap=function(){throw new Error("Wrapping not implemented")};var b=[];bililiteRange.fn.data=function(){var e=this.element().bililiteRangeData;return void 0==e&&(e=this.element().bililiteRangeData=b.length,b[e]=new _(this)),b[e]};try{Object.defineProperty({},"foo",{});var _=function(e){Object.defineProperty(this,"values",{value:{}}),Object.defineProperty(this,"sourceRange",{value:e}),Object.defineProperty(this,"toJSON",{value:function(){var e={};for(var t in _.prototype)t in this.values&&(e[t]=this.values[t]);return e}}),Object.defineProperty(this,"all",{get:function(){var e={};for(var t in _.prototype)e[t]=this[t];return e}})};_.prototype={},Object.defineProperty(_.prototype,"values",{value:{}}),Object.defineProperty(_.prototype,"monitored",{value:{}}),bililiteRange.data=function(e,t){t=t||{};var n=Object.getOwnPropertyDescriptor(_.prototype,e)||{};"enumerable"in t&&(n.enumerable=!!t.enumerable),"enumerable"in n||(n.enumerable=!0),"value"in t&&(_.prototype.values[e]=t.value),"monitored"in t&&(_.prototype.monitored[e]=t.monitored),n.configurable=!0,n.get=function(){return e in this.values?this.values[e]:_.prototype.values[e]},n.set=function(t){this.values[e]=t,_.prototype.monitored[e]&&this.sourceRange.dispatch({type:"bililiteRangeData",bubbles:!0,detail:{name:e,value:t}})},Object.defineProperty(_.prototype,e,n)}}catch(E){_=function(e){this.sourceRange=e},_.prototype={},bililiteRange.data=function(e,t){"value"in t&&(_.prototype[e]=t.value)}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)o in t&&e.call(r,t[o],o,t)}),function(e,t){"use strict";function n(e){return u.test(Object.prototype.toString.call(e))}function r(e){for(var t=0;t<window.frames.length;t+=1)if(window.frames[t].document===e)return window.frames[t];return window}function o(t){var r,o,i=e(t);return n(i[0])?(o=i,r={left:0,top:0}):(o=e(i[0].ownerDocument||document),r=i.offset()),{x:r.left+i.outerWidth()/2-o.scrollLeft(),y:r.top+i.outerHeight()/2-o.scrollTop()}}function i(t){var r,o,i=e(t);return n(i[0])?(o=i,r={left:0,top:0}):(o=e(i[0].ownerDocument||document),r=i.offset()),{x:r.left-document.scrollLeft(),y:r.top-document.scrollTop()}}var a=/^key/,s=/^(?:mouse|contextmenu)|click/,u=/\[object (?:HTML)?Document\]/;e.fn.simulate=function(t,n){return this.each(function(){new e.simulate(this,t,n)})},e.simulate=function(t,n,r){var o=e.camelCase("simulate-"+n);this.target=t,this.options=r||{},this[o]?this[o]():this.simulateEvent(t,n,this.options)},e.extend(e.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}}),e.extend(e.simulate.prototype,{simulateEvent:function(e,t,n){var r=this.createEvent(t,n);this.dispatchEvent(e,t,r,n)},createEvent:function(e,t){return a.test(e)?this.keyEvent(e,t):s.test(e)?this.mouseEvent(e,t):void 0},mouseEvent:function(o,i){var a,s,u,l,c=n(this.target)?this.target:this.target.ownerDocument||document;return i=e.extend({bubbles:!0,cancelable:"mousemove"!==o,view:r(c),detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:t},i),c.createEvent?(a=c.createEvent("MouseEvents"),a.initMouseEvent(o,i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget||c.body.parentNode),0===a.pageX&&0===a.pageY&&Object.defineProperty&&(s=n(a.relatedTarget)?a.relatedTarget:a.relatedTarget.ownerDocument||document,u=s.documentElement,l=s.body,Object.defineProperty(a,"pageX",{get:function(){return i.clientX+(u&&u.scrollLeft||l&&l.scrollLeft||0)-(u&&u.clientLeft||l&&l.clientLeft||0)}}),Object.defineProperty(a,"pageY",{get:function(){return i.clientY+(u&&u.scrollTop||l&&l.scrollTop||0)-(u&&u.clientTop||l&&l.clientTop||0)}}))):c.createEventObject&&(a=c.createEventObject(),e.extend(a,i),a.button={0:1,1:4,2:2}[a.button]||a.button),a},keyEvent:function(o,i){var a,s;if(i=e.extend({bubbles:!0,cancelable:!0,view:r(s),ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:t},i),s=n(this.target)?this.target:this.target.ownerDocument||document,s.createEvent)try{a=s.createEvent("KeyEvents"),a.initKeyEvent(o,i.bubbles,i.cancelable,i.view,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode)}catch(u){a=s.createEvent("Events"),a.initEvent(o,i.bubbles,i.cancelable),e.extend(a,{view:i.view,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey,keyCode:i.keyCode,charCode:i.charCode})}else s.createEventObject&&(a=s.createEventObject(),e.extend(a,i));return(/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||"[object Opera]"==={}.toString.call(window.opera))&&(a.keyCode=i.charCode>0?i.charCode:i.keyCode,a.charCode=t),a},dispatchEvent:function(t,n,r,o){o.jQueryTrigger===!0?e(t).trigger(e.extend({},r,o,{type:n})):t.dispatchEvent?t.dispatchEvent(r):t.fireEvent&&t.fireEvent("on"+n,r)},simulateFocus:function(){function t(){r=!0}var n,r=!1,o=e(this.target);o.bind("focus",t),o[0].focus(),r||(n=e.Event("focusin"),n.preventDefault(),o.trigger(n),o.triggerHandler("focus")),o.unbind("focus",t)},simulateBlur:function(){function t(){r=!0}var n,r=!1,o=e(this.target);o.bind("blur",t),o[0].blur(),setTimeout(function(){o[0].ownerDocument.activeElement===o[0]&&o[0].ownerDocument.body.focus(),r||(n=e.Event("focusout"),n.preventDefault(),o.trigger(n),o.triggerHandler("blur")),o.unbind("blur",t)},1)}}),e.extend(e.simulate.prototype,{simulateDrag:function(){var n=0,r=this.target,a=this.options,s="corner"===a.handle?i(r):o(r),u=Math.floor(s.x),l=Math.floor(s.y),c={clientX:u,clientY:l},p=a.dx||(a.x!==t?a.x-u:0),f=a.dy||(a.y!==t?a.y-l:0),d=a.moves||3;for(this.simulateEvent(r,"mousedown",c);d>n;n++)u+=p/d,l+=f/d,c={clientX:Math.round(u),clientY:Math.round(l)},this.simulateEvent(r.ownerDocument,"mousemove",c);e.contains(document,r)?(this.simulateEvent(r,"mouseup",c),this.simulateEvent(r,"click",c)):this.simulateEvent(document,"mouseup",c)}})}(jQuery),function(e){"use strict";var t=e.simulate.prototype.mouseEvent,n=/\[object (?:HTML)?Document\]/;e.simulate.prototype.mouseEvent=function(r,o){if(o.pageX||o.pageY){var i=n.test(Object.prototype.toString.call(this.target))?this.target:this.target.ownerDocument||document;o.clientX=(o.pageX||0)-e(i).scrollLeft(),o.clientY=(o.pageY||0)-e(i).scrollTop()}return t.apply(this,[r,o])}}(jQuery),function(e,t){"use strict";function n(t){return c.test(Object.prototype.toString.call(e(t)[0]))}function r(t,n){var r;if(e.isFunction(n)){for(r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}for(r=0;r<t.length;r+=1)if(t[r])return t[r];return null}function o(t){var r,o=e(t);return r=n(o[0])?{left:0,top:0}:o.offset(),{x:r.left+o.outerWidth()/2,y:r.top+o.outerHeight()/2}}function i(t,r,o){var i;return i=e(n(r)?r:o||document),"number"==typeof t&&"number"==typeof r?{x:t-i.scrollLeft(),y:r-i.scrollTop()}:"object"==typeof t&&t.pageX&&t.pageY?{clientX:t.pageX-i.scrollLeft(),clientY:t.pageY-i.scrollTop()}:void 0}function a(t,r,o){var i;if(i=n(r)?r:o||document,!i.elementFromPoint)return null;var s=t,u=r;if("object"==typeof t&&(t.clientX||t.clientY)&&(s=t.clientX||0,u=t.clientY||0),a.prototype.check){var l,c;(l=e(i).scrollTop())>0?(c=i.elementFromPoint(0,l+e(window).height()-1),null!==c&&"HTML"===c.tagName.toUpperCase()&&(c=null),a.prototype.nativeUsesRelative=null===c):(l=e(i).scrollLeft())>0&&(c=i.elementFromPoint(l+e(window).width()-1,0),null!==c&&"HTML"===c.tagName.toUpperCase()&&(c=null),a.prototype.nativeUsesRelative=null===c),a.prototype.check=0>=l}return a.prototype.nativeUsesRelative||(s+=e(i).scrollLeft(),u+=e(i).scrollTop()),i.elementFromPoint(s,u)}function s(t,n){var r=n||{};e(t).trigger({type:"simulate-drag"}),e.isFunction(r.callback)&&r.callback.apply(t)}function u(t,o,u,c,p){function f(){x.x+=g.x,x.y+=g.y;var e={pageX:x.x,pageY:x.y};if(m.shaky&&(m.shaky===!0||!isNaN(parseInt(m.shaky,10)))){var n=m.shaky===!0?1:parseInt(m.shaky,10);e.pageX+=Math.floor(Math.random()*(2*n+1)-n),e.pageY+=Math.floor(Math.random()*(2*n+1)-n)}var r=i(e,y),s=a(r,y)||o;t.simulateEvent(s,"mousemove",{pageX:Math.round(e.pageX),pageY:Math.round(e.pageY)})}function d(){var e=l()-E;if(e>=S)if(v>D)f(),D+=1,E=l(),setTimeout(d,S);else{var n={pageX:Math.round(u.x+c.dx),pageY:Math.round(u.y+c.dy)},r=i(n,y),h=a(r,y)||o;t.simulateEvent(h,"mousemove",n),s(o,p)}else setTimeout(d,S-e)}var h,v,g,y=r([o,o.ownerDocument],n)||document,m=p.interpolation,b=Math.sqrt(Math.pow(c.dx,2)+Math.pow(c.dy,2));if(m.stepWidth){h=parseInt(m.stepWidth,10),v=Math.floor(b/h)-1;var _=h/b;g={x:c.dx*_,y:c.dy*_}}else v=parseInt(m.stepCount,10),h=b/(v+1),g={x:c.dx/(v+1),y:c.dy/(v+1)};var E,x=e.extend({},u);if(!m.stepDelay&&!m.duration||m.stepDelay<=0&&m.duration<=0){for(var k=0;v>k;k+=1)f();var w={pageX:Math.round(u.x+c.dx),pageY:Math.round(u.y+c.dy)},T=i(w,y),C=a(T,y)||o;t.simulateEvent(C,"mousemove",w),s(o,p)}else{var S=parseInt(m.stepDelay,10)||Math.ceil(parseInt(m.duration,10)/(v+1)),D=0;E=l(),setTimeout(d,S)}}e.fn.simulate=function(t,n){switch(t){case"drag":case"drop":case"drag-n-drop":var r=this.first();return new e.simulate(r[0],t,n),r;default:return this.each(function(){new e.simulate(this,t,n)})}};var l=Date.now||function(){return(new Date).getTime()},c=/\[object (?:HTML)?Document\]/;a.prototype.check=!0,a.prototype.nativeUsesRelative=!0,e.simulate.activeDrag=function(){return e.simulate._activeDrag?e.extend(!0,{},e.simulate._activeDrag):t},e.extend(e.simulate.prototype,{simulateDrag:function(){var l,c=this,p=c.target,f=e.extend({dx:0,dy:0,dragTarget:t,clickToDrag:!1,eventProps:{},interpolation:{stepWidth:0,stepCount:0,stepDelay:0,duration:0,shaky:!1},callback:t},this.options),d=e.simulate._activeDrag&&e.simulate._activeDrag.dragElement===p;l=d?e.simulate._activeDrag.dragStart:o(p);var h,v,g=Math.round(l.x),y=Math.round(l.y),m={pageX:g,pageY:y};if(f.dragTarget){var b=o(f.dragTarget);h=Math.round(b.x-l.x),v=Math.round(b.y-l.y)}else h=f.dx||0,v=f.dy||0;if(d?(e.simulate._activeDrag.dragDistance.x+=h,e.simulate._activeDrag.dragDistance.y+=v,m={pageX:Math.round(g+e.simulate._activeDrag.dragDistance.x),pageY:Math.round(y+e.simulate._activeDrag.dragDistance.y)}):(e.simulate._activeDrag&&e(e.simulate._activeDrag.dragElement).simulate("drop"),e.extend(f.eventProps,m),c.simulateEvent(p,"mousedown",f.eventProps),f.clickToDrag===!0&&(c.simulateEvent(p,"mouseup",f.eventProps),c.simulateEvent(p,"click",f.eventProps)),e(p).add(p.ownerDocument).one("mouseup",function(){e.simulate._activeDrag=t}),e.extend(e.simulate,{_activeDrag:{dragElement:p,dragStart:{x:g,y:y},dragDistance:{x:h,y:v}}}),m={pageX:Math.round(g+h),pageY:Math.round(y+v)}),0!==h||0!==v)if(f.interpolation&&(f.interpolation.stepCount||f.interpolation.stepWidth))u(c,p,{x:g,y:y},{dx:h,dy:v},f);else{var _=r([p,p.ownerDocument],n)||document,E=i(m,_),x=a(E,_)||p;e.extend(f.eventProps,m),c.simulateEvent(x,"mousemove",f.eventProps),s(p,f)}else s(p,f)},simulateDrop:function(){var s=this,u=this.target,l=e.simulate._activeDrag,c=e.extend({clickToDrop:!1,eventProps:{},callback:t},s.options),p=!0,f=o(u),d=Math.round(f.x),h=Math.round(f.y),v={pageX:d,pageY:h},g=(l?r([l.dragElement,l.dragElement.ownerDocument],n):r([u,u.ownerDocument],n))||document,y=i(v,g),m=a(y,g);l&&(l.dragElement===u||n(u))&&(d=Math.round(l.dragStart.x+l.dragDistance.x),h=Math.round(l.dragStart.y+l.dragDistance.y),v={pageX:d,pageY:h},y=i(v,g),m=a(y,g),p=!1),m||(m=l?l.dragElement:u),e.extend(c.eventProps,v),p===!0&&s.simulateEvent(m,"mousemove",c.eventProps),c.clickToDrop&&s.simulateEvent(m,"mousedown",c.eventProps),this.simulateEvent(m,"mouseup",c.eventProps),c.clickToDrop&&s.simulateEvent(m,"click",c.eventProps),e.simulate._activeDrag=t,e(m).trigger({type:"simulate-drop"}),e.isFunction(c.callback)&&c.callback.apply(m)},simulateDragNDrop:function(){var n=this,r=this.target,o=e.extend({dragTarget:t,dropTarget:t},n.options),i=(o.dragTarget||o.dx||o.dy?o.dropTarget:r)||r;e(r).simulate("drag",e.extend({},o,{dragTarget:o.dragTarget||(o.dx||o.dy?t:o.dropTarget),callback:function(){e(i).simulate("drop",o)}}))}})}(jQuery),function(e,t){"use strict";var n={SHIFT:16,CONTROL:17,ALTERNATIVE:18,META:91,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ENTER:13,TABULATOR:9,ESCAPE:27,BACKSPACE:8,INSERT:45,DELETE:46,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34};n.CTRL=n.CONTROL,n.ALT=n.ALTERNATIVE,n.COMMAND=n.META,n.TAB=n.TABULATOR,n.ESC=n.ESCAPE,e.extend(e.simulate.prototype,{simulateKeyCombo:function(){var r,o=e(this.target),i=e.extend({combo:"",eventProps:{},eventsOnly:!1},this.options),a=i.combo,s=a.split(/(\+)/),u=!1,l=[];if(0!==a.length){for(s=e.grep(s,function(e){return""!==e}),r=0;r<s.length;r+=1){var c=s[r],p=c.toLowerCase(),f=c.toUpperCase().replace("-","_");if(u){if("+"!==c)throw'Syntax error: expected "+"';u=!1}else{var d;if(c.length>1){if(d=n[f],d===t)throw'Syntax error: unknown special key "'+c+'" (forgot "+" between keys?)';switch(d){case n.CONTROL:case n.ALT:case n.SHIFT:case n.META:i.eventProps[p+"Key"]=!0}l.unshift(d),i.eventProps.keyCode=d,i.eventProps.which=d,i.eventProps.charCode=0,o.simulate("keydown",i.eventProps)}else d=e.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(c),l.unshift(d),i.eventProps.keyCode=d,i.eventProps.which=d,i.eventProps.charCode=t,o.simulate("keydown",i.eventProps),i.eventProps.shiftKey&&(c=c.toUpperCase()),i.eventProps.keyCode=c.charCodeAt(0),i.eventProps.charCode=i.eventProps.keyCode,i.eventProps.which=i.eventProps.keyCode,o.simulate("keypress",i.eventProps),i.eventsOnly===!0||i.eventProps.ctrlKey||i.eventProps.altKey||i.eventProps.metaKey||o.simulate("key-sequence",{sequence:c,triggerKeyEvents:!1});u=!0}}if(!u)throw'Syntax error: expected key (trailing "+"?)';for(i.eventProps.charCode=t,r=0;r<l.length;r+=1){switch(i.eventProps.keyCode=l[r],i.eventProps.which=l[r],i.eventProps.keyCode){case n.ALT:i.eventProps.altKey=!1;break;case n.SHIFT:i.eventProps.shiftKey=!1;break;case n.CONTROL:i.eventProps.ctrlKey=!1;break;case n.META:i.eventProps.metaKey=!1}o.simulate("keyup",i.eventProps)}}}})}(jQuery),function(e,t){"use strict";e.simulate.prototype.quirks=e.simulate.prototype.quirks||{},e.extend(e.simulate.prototype.quirks,{delayedSpacesInNonInputGlitchToEnd:t}),e.extend(e.simulate.prototype,{simulateKeySequence:function(){function n(){i.trigger({type:"simulate-keySequence",sequence:s}),e.isFunction(a.callback)&&a.callback.apply(o,[{sequence:s}])}function r(){var t=p()-f;if(t>=a.delay){var o=c.exec(s);if(null!==o){var i=o[0];(u[i]||e.simulate.prototype.simulateKeySequence.defaults[i]||e.simulate.prototype.simulateKeySequence.defaults.simplechar)(l,i,a),setTimeout(r,a.delay)}else n();f=p()}else setTimeout(r,a.delay-t)}var o=this.target,i=e(o),a=e.extend({sequence:"",triggerKeyEvents:!0,eventProps:{},delay:0,callback:t},this.options),s=a.sequence;a.delay=parseInt(a.delay,10);var u={};e.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd&&!i.is("input,textarea")&&e.extend(u,{" ":function(n,r,o){var i=e.extend({},o,{triggerKeyEvents:!1,delay:0,callback:t});e.simulate.prototype.simulateKeySequence.defaults.simplechar(n," ",i),e.simulate.prototype.simulateKeySequence.defaults["{leftarrow}"](n,r,i),e.simulate.prototype.simulateKeySequence.defaults.simplechar(n,r,o),e.simulate.prototype.simulateKeySequence.defaults["{del}"](n,r,i)}}),e.extend(u,a,i.data("simulate-keySequence"));var l=e.data(o,"simulate-keySequence.selection");if(l||(l=bililiteRange(o).bounds("selection"),e.data(o,"simulate-keySequence.selection",l),i.bind("mouseup.simulate-keySequence",function(){e.data(o,"simulate-keySequence.selection").bounds("selection")}).bind("keyup.simulate-keySequence",function(t){9===t.which?e.data(o,"simulate-keySequence.selection").select():e.data(o,"simulate-keySequence.selection").bounds("selection")})),i.focus(),"undefined"!=typeof s)if(s=s.replace(/\n/g,"{enter}"),!a.delay||a.delay<=0)s.replace(/\{[^}]*\}|[^{]+/g,function(t){(u[t]||e.simulate.prototype.simulateKeySequence.defaults[t]||e.simulate.prototype.simulateKeySequence.defaults.simplechar)(l,t,a)}),n();else{var c=/\{[^}]*\}|[^{]/g,p=Date.now||function(){return(new Date).getTime()},f=p();r()}}}),e.extend(e.simulate.prototype.simulateKeySequence.prototype,{IEKeyCodeTable:{33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,59:186,58:186,61:187,43:187,44:188,60:188,45:189,95:189,46:190,62:190,47:191,63:191,96:192,126:192,91:219,123:219,92:220,124:220,93:221,125:221,39:222,34:222},charToKeyCode:function(n){var r=e.simulate.prototype.simulateKeySequence.prototype.IEKeyCodeTable,o=n.charCodeAt(0);return o>=64&&90>=o||o>=48&&57>=o?o:o>=97&&122>=o?n.toUpperCase().charCodeAt(0):r[o]!==t?r[o]:o}}),e.simulate.prototype.simulateKeySequence.defaults={simplechar:function(t,n,r){if(t.text(n,"end"),r.triggerKeyEvents)for(var o=0;o<n.length;o+=1){var i=n.charCodeAt(o),a=e.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(n.charAt(o));e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:a})),e(t._el).simulate("keypress",e.extend({},r.eventProps,{keyCode:i,which:i,charCode:i})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:a}))}},"{{}":function(t,n,r){e.simulate.prototype.simulateKeySequence.defaults.simplechar(t,"{",r)},"{enter}":function(t,n,r){t.insertEOL(),t.select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:13})),e(t._el).simulate("keypress",e.extend({},r.eventProps,{keyCode:13,which:13,charCode:13})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:13})))},"{backspace}":function(t,n,r){var o=t.bounds();o[0]===o[1]&&t.bounds([o[0]-1,o[0]]),t.text("","end"),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:8})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:8})))},"{del}":function(t,n,r){var o=t.bounds();o[0]===o[1]&&t.bounds([o[0],o[0]+1]),t.text("","end"),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:46})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:46})))},"{rightarrow}":function(t,n,r){var o=t.bounds();o[0]===o[1]&&(o[1]+=1),t.bounds([o[1],o[1]]).select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:39})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:39})))},"{leftarrow}":function(t,n,r){var o=t.bounds();o[0]===o[1]&&(o[0]-=1),t.bounds([o[0],o[0]]).select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:37})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:37})))},"{selectall}":function(e){e.bounds("all").select()}},e.simulate.ext_disableQuirkDetection!==!0&&e(document).ready(function(){var t=e("<div/>").css({height:1,width:1,position:"absolute",left:-1e3,top:-1e3}).appendTo("body");t.simulate("key-sequence",{sequence:"   ",delay:1,callback:function(){e.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd="   "===t.text(),t.remove()}})})}(jQuery))}(jQuery);
//# sourceMappingURL=domtest.min.js.map