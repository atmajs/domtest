/*!
 * DomTest v0.10.20
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2015 Atma.js and other contributors
 */
!function(e,t){function n(){var e;if(null==i&&(e="MaskJS"),null==o&&(e="jQuery"),e)throw Error(e+" was not loaded");var n=t(r,i,o,a);return"undefined"!=typeof module&&module.exports?void(module.exports=n):"undefined"!=typeof define&&define.amd?void define(function(){return n}):void(r.DomTest=n)}var r="undefined"!=typeof global?global:window,i=r.mask||r.atma&&r.atma.mask,o=r.jQuery||r.$,a=r.assert||{};n()}(this,function(e,t,n,r){"use strict";function i(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];"string"==typeof n&&(n=t.parse(n),n.type!==t.Dom.FRAGMENT&&(n={nodes:[n]}));for(var o,a,s,u,l=0,c=r.length;c>l;l++)u=r[l],"function"!=typeof u?null==o?o=u:a=u:s=u;var f=new ke(e,n,o,a);return f.on("complete",s),ge(f.process),f}var o;!function(e,t){!function(){function n(e){return Array.isArray(e)}function r(e){return"number"==typeof e}function i(e){return"string"==typeof e}function o(e){return void 0===e}function a(e){return"RegExp"===p(e)}function s(e){return"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function l(e){return"undefined"==typeof Buffer?!1:e instanceof Buffer}function c(e){return"Arguments"===p(e)}function f(e,t){return 0==i(e)?e:e.length<t?e:e.slice(0,t)}var p,d,h,v,g=Array.prototype.slice,y={errors:0};!function(){function e(e){var t=[];for(var n in t)t.push(n);return t}p=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},d=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},v=Object.keys?Object.keys:e,h=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)e[n]=t[n];return e}}();var m;!function(){m=function(e){if(null==e)return"";for(var t=e.split("\n"),n=1,r=t.length,i=/(^([ \t]*at )?[\w\.]*assert[_\.])|(^([ \t]*at )?\w+\.assert)/i,o=/(^([ \t]*at )?runCase)/i,a=0,s=t.length;++a<s;)if(i.test(t[a])&&(n=a+1),o.test(t[a])){r=a;break}return t.splice(r),t.splice(1,n-1),t.join("\n")}}();var _;!function(){function e(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=t(this),this.generatedMessage=!0);var n=e.stackStartFunction||_;Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack,this.stack=m(this.stack)}function t(e){var t=JSON.stringify(e.actual,n),r=JSON.stringify(e.expected,n);return f(t,128)+" "+e.operator+" "+f(r,128)}function n(e,t){return o(t)?""+t:!r(t)||!isNaN(t)&&isFinite(t)?u(t)||a(t)?t.toString():t:t.toString()}_=function(t,n,r,i,o){var a=new e({message:r,actual:t,expected:n,operator:i,stackStartFunction:o});throw a},y.AssertionError=e,y.fail=function(t){var n=t;throw"string"==typeof t&&(n=new e({message:message})),y.errors++,n},y.prepairStack=m,d(e,Error)}(),function(){function e(e,r,o,a){var s,l,c;if(n(r)){var f=g.call(r);l=f.shift(),c=f}u(r)&&(l=r,c=[]),i(o)&&(a=o,o=null);try{l.apply(null,c)}catch(p){s=p}if(a=""+(o&&o.name&&" ("+o.name+")."||".")+(a&&" "+a||"."),e===!0&&null==s&&_(s,o,"Missing expected exception"+a),e===!1&&t(s,o)&&_(s,o,"Got unwanted exception"+a),e&&s&&o&&!t(s,o)||!e&&s)throw s}function t(e,t){return e&&t?a(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}y["throws"]=function(t,n,r){e.apply(this,[!0].concat(g.call(arguments)))},y.doesNotThrow=function(t,n){e.apply(this,[!1].concat(g.call(arguments)))},y.ifError=function(e){if(e)throw e}}(),function(){function e(){for(var e,t,n,r,i,o=arguments.length;--o>-1;)switch(i=arguments[o],typeof i){case"function":e=i;break;case"object":n=i;break;case"number":r=i;break;case"string":t=i}null==this.callbacks&&(this.callbacks=[]),(isNaN(r)||1>r)&&(r=1);var a=this.callbacks,s={count:r,name:t,stack:m((new Error).stack)};return a.push(s),function(){return 0===--s.count&&a.splice(a.indexOf(s),1),"function"!=typeof e?null:e.apply(n,arguments)}}function t(){for(var e,t,n,r="function",i=0,o=arguments.length;--o>-1;)switch(n=arguments[o],typeof n){case"function":t=n;break;case"object":e=n;break;case"number":i=n;break;case"string":r=n}var a=this.callbacks;return null==a&&(a=this.callbacks=[]),function(n){if(--i<0){var o={count:i,name:"<avoid>"+(r||""),argument:n};a.push(o)}t&&t.apply(e,arguments)}}y.callbacks=[],y.await=e,y.avoid=t}(),function(){y.ok=function i(e,t){e||_(e,!0,t,"==",i)};var e,t,n,r;e=y.equal=function o(e,t,n){e!=t&&_(e,t,n,"==",o)},t=y.notEqual=function a(e,t,n){e==t&&_(e,t,n,"!=",a)},n=y.strictEqual=function s(e,t,n){e!==t&&_(e,t,n,"===",s)},r=y.notStrictEqual=function u(e,t,n){e===t&&_(e,t,n,"!==",u)},y.eq_=e,y.notEq_=t,y.strictEq_=n,y.notStrictEq_=r}(),function(){function e(e,n){if(null==e||null==n)return e==n;if(e===n)return!0;c(e)&&(e=g.call(e)),c(e)&&(e=g.call(e));var r=p(e);switch(r){case"Number":case"Boolean":case"String":return e==n;case"RegExp":case"Date":return e.toString()===n.toString()}if(l(e)&&l(n)){if(e.length!=n.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=n[i])return!1;return!0}return s(e)||s(n)?t(e,n):e===n}function t(t,n){var r,i,o=v(t).sort(),a=v(n).sort();if(o.length!=a.length)return!1;for(i=o.length;-1!==--i;)if(o[i]!=a[i])return!1;for(i=o.length;-1!==--i;)if(r=o[i],!e(t[r],n[r]))return!1;return!0}var n,r;y.deepEqual=n=function i(t,n,r){e(t,n)===!1&&_(t,n,r,"deepEqual",i)},y.notDeepEqual=r=function o(t,n,r){e(t,n)===!0&&_(t,n,r,"notDeepEqual",o)},y.deepEq_=n,y.notDeepEq_=r}(),function(){var e,t,n,r;e=y.lessThan=function(t,n,r){t<Number(n)&&_(t,n,r,"<",e)},t=y.lessThanOrEqual=function(t,n,r){t<=Number(n)&&_(t,n,r,"<=",e)},n=y.greaterThan=function(e,t,r){e>Number(t)&&_(e,t,r,">",n)},r=y.greaterThanOrEqual=function(e,t,n){e>=Number(t)&&_(e,t,n,">=",r)},y.lt_=e,y.lte_=t,y.gt_=n,y.gte_=r}(),function(){function e(e){var t=Object.prototype.toString.call(e).replace("[object ","").replace("]","");switch(t){case a:case s:case l:case c:case p:case f:case d:return t;case u:return"number"==typeof e.length&&"function"==typeof e.splice&&"function"==typeof e.indexOf?s:u;case"Null":case"Undefined":return h;default:return v}}function t(e,t,r,i,a){var s=n(e,t);s!==r&&(r!==!1||s===!0)&&("string"==typeof s&&(i="("+s+") "+(i||"")),_(e,t,i,o,a))}function n(t,r){var i,o,g=e(t),y=e(r);switch(g){case l:return l===y?-1!==t.indexOf(r)||"Not a substring of "+t:c===y?r.test(t)||"RegExp failed: "+t:"Unexpected types: String-"+y;case c:case a:case f:case p:case d:return t.toString()===r.toString()||"Unexpected value: "+t;case v:return t===r||"Reference check";case u:if(l===y)return r in t||"Property expected:"+r;if(u===y){for(var m in r){if(m in t==!1)return"Property expected: "+m;if(i=e(t[m]),o=e(r[m]),o!==h){if(i!==o)return"Type missmatch: "+i+"-"+o;if(l!==i){var _=n(t[m],r[m]);if(_!==!0)return _}else if(t[m]!==r[m])return"Unexpected value: "+t[m]}}return!0}return"Unexpected types: Object-"+y}if(s===g)switch(y){case f:case l:case p:return-1!==t.indexOf(r)||"Array should contain: "+r;case a:case c:case d:var b=r.toString();return t.some(function(e){return e.toString()===b})||"Array should contain: "+b;case s:var E,x=0,w=r.length,k=t.length;e:for(;w>x;x++)switch(o=e(r[x])){case l:case f:case p:case c:case a:case d:var _=n(t,r[x]);if(_!==!0)return _;continue e;case u:case s:for(E=0;k>E&&(o!==e(t[E])||n(t[E],r[x])!==!0);E++);if(E===k)return o+" is not a subset";continue e}return!0}return"Unexpected types: "+g+"-"+y}var r,i;r=y.has=function g(e,n,r){t(e,n,!0,r,g)},i=y.hasNot=function m(e,n,r){t(e,n,!1,r,m)},y.has_=r,y.hasNot_=i;var o="⊇",a="Date",s="Array",u="Object",l="String",c="RegExp",f="Number",p="Boolean",d="Function",h="<undefined>",v="<reference-check>"}(),function(){function e(e,n,r,i,o){var a=t(e,n);a!==r&&_(e,n,i,"~~",o)}function t(e,n){if(null==n)return e==n;if("string"==typeof n){var r=p(e);switch(n){case"Object":return null!=e&&"object"==typeof e}return r===n}return"function"==typeof n?e instanceof n:"object"==typeof n&&n.constructor?t(e,n.constructor):!1}var n,r;n=y.is=function i(t,n,r){e(t,n,!0,r,i)},r=y.isNot=function o(t,n,r){e(t,n,!1,r,o)},y.is_=n,y.isNot_=r}(),function(){function t(e){var t={},r=["eq_","notEq_","deepEq_","notDeepEq_","has_","hasNot_","is_","isNot_","lt_","lte_","gt_","gte_"];r.forEach(function(e){function r(e,t,n,r,i,o){var a=t[n];"function"==typeof a&&(a=a.apply(t,r)),y[e](a,i,o)}function i(e,t,n,r,i){var o=n(t);y[e](o,r,i)}function o(e,t,n,r){y[e](t,n,r)}t[e]=function(t){var a,s=g.call(arguments);switch(n(t)&&(a=s[s.length-1],s=t),e){case"has_":case"hasNot_":var u=s[0];if("string"!=typeof u)break;if(null!=this[u]&&1!==s.length)break;var l=s[1],c=this.find(u);if(0===c.length&&(c=this.filter(u)),"has_"===e){if(isNaN(l))return o("notEq_",c.length,0,a),this;o("eq_",c.length,l,a)}if("hasNot_"===e){if(isNaN(l))return o("eq_",c.length,0,a),this;o("notEq_",c.length,l,a)}return this}var f=s.pop(),p=s.shift();return"string"==typeof p?(r(e,this,p,s,f,a),this):"function"==typeof p?(i(e,this,p,f,a),this):this}}),r.forEach(function(n){y.$[n]=function(){var e=g.call(arguments),r=e.shift();return t[n].apply(r,e)},void 0===e.fn[n]&&(e.fn[n]=t[n])})}y.setDOMLibrary=t,y.$={};var r=e.$||e.jQuery||e.Zepto||e.Kimbo;null!=r&&t(r)}(),function(){function e(e){var n=t[e];if(null==n)return!1;var r=n.length;if(0===r)return!1;for(var i,o=g.call(arguments,1);-1!==--r;)i=n[r],i.apply(null,o);return!0}!function(e,t){function n(e){return function(){var n;t("start");try{n=e.apply(this,arguments)}catch(r){if(t("fail",r)===!1)throw r;return null}return t("success"),n}}for(var r in e)if("function"==typeof e[r]){switch(r){case"callback":case"await":case"avoid":case"prepairStack":case"on":case"off":continue}r[0]!==r[0].toUpperCase()&&(e[r]=n(e[r]))}}(y,e),y.on=function(e,n){null==t[e]&&(t[e]=[]),t[e].push(n)},y.off=function(e,n){var r=t[e];if(null!=r){if(null==n)return void(r.length=0);for(var i=r.length;-1!==--i;)r[i]===n&&r.splice(i,1)}};var t={}}(),t.assert=h(y.ok,y)}(),o=t.assert}(e,{});var a=Array.prototype.slice,s=Array.prototype.splice,u=Array.prototype.indexOf,l=null,c=Object.hasOwnProperty,f=Object.getOwnPropertyDescriptor,p=Object.defineProperty,d,h,v,g,y;if(function(){d=function(e,t,n){if(null==n&&(n=e),null==e)return e;for(var r=e.length,i=0;r>i;i++)t.call(n,e[i],i);return n},g=function(e,t){if(null==e)return-1;for(var n=e.length,r=0;n>r;r++)if(e[r]===t)return r;return-1},h=function(e,t){var n=g(e,t);return-1===n?!1:(e.splice(n,1),!0)},v=function(e,t,n){var r=new Array(e.length);return d(e,function(e,n){r[n]=t.call(this,e,n)},n),r},y=function(e,t,n){for(var r=e.length,i=0;r>i;i++)if(t.call(n||e,e[i],i))return!0;return!1}}(),void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){d(this,e,t)}),void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(e){return g(this,e)}),null==String.prototype.trim&&(String.prototype.trim=function(){var e,t=-1,n=this.length;if(0===n)return this;for(;++t<n&&(e=this.charCodeAt(t),!(e>32)););for(;0!==--n&&(e=this.charCodeAt(n),!(e>32)););return 0!==t&&n!==length-1?this.substring(t,n+1):this}),null==Function.prototype.bind){var a;Function.prototype.bind=function(){if(arguments.length<2&&"undefined"==typeof arguments[0])return this;var e=this,t=a.call(arguments),n=t.shift();return function(){return e.apply(n,t.concat(a.call(arguments)))}}}var m,_,b,E,x,w,k,T,S;!function(){m=function(e){return"function"==typeof e},x=function(e){return null!=e&&"object"==typeof e},_=b=function(e){return null!=e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.slice},E=function(e){return"string"==typeof e},w=function(e){return"string"==typeof e&&""!==e},k=function(e){return null==e||"object"!=typeof e?!1:e.constructor===Object},S="undefined"!=typeof window&&null!=window.navigator,T=!S}();var C,P,R,D,O,N,A,j,M,q;!function(){C=function(e,t){if("."===t)return e;for(var n=e,r=t.split("."),i=r.length,o=-1;null!=n&&++o<i;)n=n[r[o]];return n},P=function(e,t,n){for(var r,i=e,o=t.split("."),a=o.length-1,s=-1;++s<a;)r=o[s],null==i[r]&&(i[r]={}),i=i[r];i[o[s]]=n},R=function(e,t){var n=C(e,t);return void 0!==n},q=function(e,t,n){for(var r,i=e,o=t.split("."),a=o.length-1,s=-1;++s<a;)r=o[s],null==i[r]&&(i[r]={}),i=i[r];return r=o[a],p?(void 0===n.writable&&(n.writable=!0),void 0===n.configurable&&(n.configurable=!0),void 0===n.enumerable&&(n.enumerable=!0),void p(i,r,n)):void(i[r]=void 0===n.value?n.value:n.get&&n.get())},D=function(e,t){if(null==t)return e||{};if(null==e)return j(t);for(var n in t)e[n]=t[n];return e},O=function(e,t){if(null==t)return e||{};if(null==e)return j(t);for(var n in t)null==e[n]&&(e[n]=t[n]);return e},A=function(){return null==f?D:function(e,t){if(null==t)return e||{};if(null==e)return j(t);var n,r;for(n in t)r=f(t,n),null!=r&&(r.hasOwnProperty("value")?e[n]=r.value:p(e,n,r));return e}}(),N=function(e){for(var t=arguments.length,n=1;t>n;n++)e=D(e,arguments[n]);return e},M=function(e){function t(){}t.prototype=e,new t},l=j=Object.create||function(e){var t=function(){};return t.prototype=e,new t}}();var K,L,$,U,F;!function(){K=function(e,t){var n=e.indexOf(t);return-1===n?!1:(e.splice(n,1),!0)},L=function(e,t,n){e.forEach(t,n)},$=function(e,t){return e.indexOf(t)},U=function(e,t){return-1!==e.indexOf(t)},F=function(e,t){if(null!=t&&null!=e&&e!==t)for(var n=e.length,r=t.length,i=-1;++i<r;)e[n+i]=t[i]}}();var I,X,Y;!function(){I=function(e,t){return function(){return X(e,t,arguments)}},X=function(e,t,n){var r=n.length;return 0===r?e.call(t):1===r?e.call(t,n[0]):2===r?e.call(t,n[0],n[1]):3===r?e.call(t,n[0],n[1],n[2]):4===r?e.call(t,n[0],n[1],n[2],n[3]):e.apply(t,n)},Y=function(){return!1}}();var B;!function(){B=function(t){for(var n,r=arguments.length,i=0;++i<r;)n=arguments[i],x(n)&&n.toJSON&&(n=n.toJSON()),t=t.replace(e(i-1),String(n));return t};var e;!function(){e=function(e){return t[e]||(t[e]=new RegExp("\\{"+e+"\\}","g"))};var t={}}()}();var H,W;!function(){function e(e,t){return t.constructor=e,e.prototype=t,e}function t(e,t){return null==e?t:null==t?e:function(){var n=a.call(arguments),r=e.apply(this,n);return void 0!==r?r:t.apply(this,n)}}H=function(){var n=a.call(arguments),r=n.pop();null==r&&(r={});for(var i,o,s=r.hasOwnProperty("constructor")?r.constructor:function(){},u=n.length;--u>-1;)o=n[u],"function"==typeof o&&(i=t(o,i),o=o.prototype),O(r,o);return e(t(i,s),r)},W=function(){var n=a.call(arguments),r=n.pop();null==r&&(r={});for(var i,o,s=r.hasOwnProperty("constructor")?r.constructor:function(){},u=n.length,l=-1;++l<u;)o=n[l],"function"==typeof o&&(i=t(i,o),o=o.prototype),A(r,o);return e(t(i,s),r)}}();var G,Q,V,J;!function(){function e(e,n){var r=e.hasOwnProperty("constructor")?e.constructor:null;return function(){q(this,"stack",{value:t(n||3)}),q(this,"message",{value:B.apply(this,arguments)}),null!=r&&r.apply(this,arguments)}}function t(e){var t=(new Error).stack;return null==t?null:t.split("\n").slice(e).join("\n")}G=function(t,n,r){var i=e(n,r);return i.prototype=new Error,n.constructor=Error,n.name=t,D(i.prototype,n),i},Q=function(e,t,n){var r=J(e,t),i=r[0],o=r[1],a=r[2],s="";return null!=n&&(s+=B(" at {0}({1}:{2})\n",n,o,a)),s+V(i,o,a)},J=function(e,t){var n=e.substring(0,t).split("\n"),r=n.length,i=t+1-n.slice(0,r-1).join("\n").length;return r>1&&(i-=1),[e.split("\n"),r,i]},function(){function e(e,t){for(var n=String(e);n.length<t;)n+=" ";return n}function t(e,t){for(var n="";--t>-1;)n+=e;return n}V=function(n,r,i){var o=3,a=2,s=r-o,u=s+o+a,l="";0>s&&(s=0),u>n.length&&(u=n.length);for(var c,f=String(u).length;u>s;s++)l&&(l+="\n"),c=e(s+1,f),l+=c+"|"+n[s],s+1===r&&(l+="\n"+t(" ",f+1),l+=n[s].substring(0,i-1).replace(/[^\s]/g," "),l+="^");return l}}()}();var z;!function(){function e(e,t,n,r){return null==r?e:(null!=t?X(r,e,t):n.push(r),e)}function t(e){e._done=null,e._fail=null,e._always=null}function n(e,t,n){if(null!=e){for(var r,i=e.length,o=-1;++o<i;)r=e[o],r&&X(r,t,n);e.length=0}}function r(e){return null==e||"object"!=typeof e?!1:e instanceof z?!0:"function"==typeof e.done&&"function"==typeof e.fail}z=function(){},z.prototype={_isAsync:!0,_done:null,_fail:null,_always:null,_resolved:null,_rejected:null,defer:function(){return this._rejected=null,this._resolved=null,this},isResolved:function(){return null!=this._resolved},isRejected:function(){return null!=this._rejected},isBusy:function(){return null==this._resolved&&null==this._rejected},resolve:function(){var e=this._done,r=this._always;return this._resolved=arguments,t(this),n(e,this,arguments),n(r,this,[this]),this},reject:function(){var e=this._fail,r=this._always;return this._rejected=arguments,t(this),n(e,this,arguments),n(r,this,[this]),this},then:function(e,t){return this.pipe(e,t)},done:function(t){return null!=this._rejected?this:e(this,this._resolved,this._done||(this._done=[]),t)},fail:function(t){return null!=this._resolved?this:e(this,this._rejected,this._fail||(this._fail=[]),t)},always:function(t){return e(this,this._rejected||this._resolved,this._always||(this._always=[]),t)},pipe:function(e){function t(e,t,n){return function(){if(null!=n){var i=n.apply(this,arguments);if(null!=i)return r(i)===!0?void i.pipe(e):void e[t](i)}e[t].apply(e,arguments)}}var n;if("function"==typeof e){n=new z;var i=e,o=arguments.length>1?arguments[1]:null;return this.done(t(n,"resolve",i)).fail(t(n,"reject",o)),n}n=e;for(var a,s=arguments.length,u=1===s,l=1===s,c=0;++c<s;)switch(a=arguments[c]){case"done":u=!0;break;case"fail":l=!0;break;default:console.error("Unsupported pipe channel",arguments[c])}return u&&this.done(t(n,"resolve")),l&&this.fail(t(n,"reject")),this},pipeCallback:function(){var e=this;return function(t){if(null!=t)return void e.reject(t);var n=a.call(arguments,1);X(e.resolve,e,n)}}},z.run=function(e,t){var n=new z;return null==t&&(t=n),e.call(t,I(n.resolve,t),I(n.reject,n),n),n}}();var Z;!function(){function e(){var e,t,n=a.call(arguments),r=n.shift(),i=this._listeners[r],o=0;if(null==i)return this;for(t=i.length;t>o;o++)e=i[o],X(e,this,n),e._once===!0&&(i.splice(o,1),o--,t--);return this}Z=function(){this._listeners={}},Z.prototype={on:function(e,t){return null!=t&&(this._listeners[e]||(this._listeners[e]=[])).push(t),this},once:function(e,t){return null!=t&&(t._once=!0,(this._listeners[e]||(this._listeners[e]=[])).push(t)),this},pipe:function(e){var t,n=this;return function(){t=a.call(arguments),t.unshift(e),X(n.trigger,n,t)}},emit:e,trigger:e,off:function(e,t){var n=this._listeners[e];if(null==n)return this;if(1===arguments.length)return n.length=0,this;for(var r=n.length,i=-1;++i<r;)n[i]===t&&(n.splice(i,1),i--,r--);return this}}}();var ee;!function(){ee=function(e){return"string"==typeof e.jquery?!0:e.constructor===n.fn.constructor}}();var te,ne,D,re;!function(){function e(e){var t=[];for(var n in t)t.push(n);return t}te=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},ne=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},re=Object.keys?Object.keys:e,D=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)e[n]=t[n];return e}}();var ie;!function(){ie=console.error.bind(console,"<TestDom>")}();var oe,ae,se;!function(){function e(e){null!=e&&(e.length=0)}oe=function(e,t){if(null!=e)for(var n=0;n<e.length;n++)e[n].apply(null,t||[])},ae=function(e,t,n){if(null!=n){var r="_"+t+"Cb",i=e[r];null==i&&(i=e[r]=[]),i.push(n)}},se=function(t){e(t._rejectCb),e(t._alwaysCb),e(t._resolveCb)}}();var ue,le;!function(){function e(e,t,n,r){if(null==t.expression){var i=t.attr,o=[];for(var a in i)a===i[a]&&o.push(a);if(0!==o.length)return o;var s={},u=0;for(var a in i)s[a]=i[a],u++;return u>0?[s]:(ie("Expression expected for",t.tagName),null)}return""===t.expression?[]:e(t.expression,n,null,r)}ue=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.unshift(t.Utils.Expression.evalStatements),e.apply(null,n)},le=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.unshift(t.Utils.Expression.evalStatements),e.apply(null,n)[0]}}();var ce,fe,pe,de,he,ve;!function(){ce=function(e){return null!=n.fn[e]},fe=function(e,t,n,r){if(null!=e.eq_)return n.unshift(t),void e.eq_.apply(e,n);var i=e[t],a=n.pop();if("function"==typeof i){var s=i.apply(e,n);return void o.equal(s,a)}o.equal(i,a)},pe=function(e){return null!=o.$[e+"_"]},de=function(e,t,n,r){o.$[t+"_"].apply(e,[e].concat(n))},he=function(e){function t(t,n){return r.total++,t(e)?n:void 0}return t(pe,de)||t(ce,fe)},ve=function(e,t,n){"function"!=typeof o[t]&&(e=e[t],t="equal"),o[t].apply(o,[e].concat(n))}}();var ge;!function(){function e(e){return function(t){function n(){return--r<0?t():void setTimeout(n)}var r=e;n()}}ge=e(5)}();var ye={};!function(){function e(e,t,n){return function(r){var i=r.node.expression;/^\s*('|")/.test(i)&&(i=le(r.node));var a=r.$[e](i);0===a.length&&t&&(a=r.$[t](i)),0===a.length&&n&&(a=n(r.$,i)),o.notEqual(a.length,0,"Selector does not matched any elements: "+e+"("+i+")"),r.$=a}}function t(e,t){for(var r,i,o=n(),a=e.length,s=-1;++s<a;)i=e[s],null!=i.querySelectorAll&&(r=i.querySelectorAll(t),o=o.add(r));return o}[["find","filter",t],["filter"],["closest"],["children"],["siblings"]].forEach(function(t){var n=t,r=n[0],i=n[1],o=n[2];ye[r]=e(r,i,o)}),D(ye,{__eq__:e("eq")})}();var me;!function(){function e(e,t){function n(e,n){var r=e.text();return-1!==r.trim().indexOf(t)}function r(e){return function(n){return n.attr(e).trim()===t}}function i(t){null==a&&(a=e.children("option"));for(var n,r=a.length,i=0;r>i;i++)if(n=a.eq(i),t(n,i)===!0)return[n,i];return null}var a,s=i(n);null==s&&(s=i(r("value"))),null==s&&(s=i(r("name"))),null==s&&(s=i(r("id"))),o.notEqual(s,null,"Option not found: "+t);var u=s,l=u[0],c=u[1];e.get(0).selectedIndex=c,l.simulate("click"),e.trigger("change")}function t(e,t){function n(t,n){return void 0!==e.selectionStart?(e.selectionStart=t,void(e.selectionEnd=n)):void 0!==e.setSelectionRange?void e.setSelectionRange(t,n):void console.error("<DomTest> Unable to selec the range")}var r=e.value;if(0===t.length)return void n(0,r.length-1);var i=t[0];if("string"==typeof i){var o=r.indexOf(i);return void(-1!==o&&n(o,o+i.length))}var a=t,o=a[0],s=a[1];"number"==typeof o&&"number"==typeof s&&n(o,s)}me={$$run:function(e,t,n,r){t.ensureInDom_();var i=me[e];return i?void i(t,n,r):(n.$.simulate(e,n.node.attr),void setTimeout(r))},press:function(e,t,n){var r=le(t.node);t.$.simulate("key-combo",{combo:r}),setTimeout(n)},type:function(e,t,n){var r=le(t.node);t.$.simulate("key-sequence",{sequence:r,delay:10,callback:function(){t.$.removeData("simulate-keySequence.selection").off("keyup.simulate-keySequence").off("mouseup.simulate-keySequence"),n()}})},select:function(n,r,i){var a=r.$.filter("select").eq(0);if(0!==a.length){var s=le(r.node);return e(a,s,i),void setTimeout(i)}var a=r.$.filter("input, textarea").eq(0);if(0!==a.length){var u=ue(r.node);return a.get(0).focus(),t(a.get(0),u),void setTimeout(i)}o(!1,'`Select` should be invoked in "input" or "select" context')}}}();var _e;!function(){function e(e){var t;for(t in e.attr)break;return delete e.attr[t],t}function n(e,t,n){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select()}}_e={"with":function(e,t,n){var r=t.node.expression.trim();switch(r){case"model":return t.$=e.getCurrentModel_(),void n()}ye.find(t),n()},"debugger":function(e,t,n){t.$;n()},slot:function(e,t,n){var r=t.node.fn;return 3===r.length?void r(t.$,e.wrapAssertion_(),n):(r(t.$,e.wrapAssertion_()),void n())},"do":function(t,n,r){me.$$run(e(n.node),t,n,r)},call:function(t,n,r){var i=e(n.node);o.is(n.$[i],"Function");var a=ue(n.node,t.model,t.compo);n.$[i].apply(n.$,a),setTimeout(r)},await:function(e,n,r){function i(){var e=n.$.find(u);return 0===e.length&&(e=n.$.filter(u)),c>f&&0===e.length?(f+=l,void setTimeout(i,l)):(f>c&&o(!1,"<await> Elements are not resolved: "+u),ye.find(n),void r())}var a=n.node.expression;if(null==a)throw Error("`await` node expect expression: timeout ms or a selector");var s=t.Utils.Expression.eval(a);if("number"==typeof s)return void setTimeout(r,s);var u=s,l=200,c=1600,f=0;i()},selection:function(e,r,i){var o=r.node.expression;if(null==o)throw Error("`caret` node expect expression: position number");var a=t.Utils.Expression.evalStatements(o),s=a[0],u=a[1]||s;n(r.$.get(0),s,u),setTimeout(i,16)}}}(),D(_e,{hasClass:function(e,t,n){var r=ue(t.node),i=he("hasClass");1===r.length&&r.push(!0),i(t.$,"hasClass",r,t.node.attr),n()}});var be;!function(){be=["blur","focus","load","resize","scroll","unload","beforeunload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","type","press"]}();var Ee={report:null};!function(){i.config=function(e){return"sttring"==typeof e?Ee[e]:(D(Ee,e),i)}}();var xe,we;!function(){xe={report:function(e,t){if(Ee.report)return void Ee.report(e);if(r){if(r.ifError)return void r.ifError(e);if(null!=e&&r.fail)return void r.fail(e)}if(e)throw e}},we=function(e){var n=[],r=t.render("\n			pre > +each(.) > div {\n				span style='color: ~[: errored ? \"red\" : \"green\"]' > '~[hint]'\n				span > '~[text]'\n			}\n		",n);return e.appendChild(r),function(e,t,r){n.push({text:e.formatCurrentLine_(r),hint:r?"✘ ":"✓ ",errored:Boolean(r)}),r&&n.push({text:String(r),hint:" "})}}}();var ke=H(Z,z,{constructor:function(e,t,r,i){e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(e=e.childNodes),e.nodeType===Node.DOCUMENT_NODE&&(e=e.body),this.model=r,this.compo=i,this.$=n(e),this.stack=[{$:this.$,node:t}],this.errors=[],this.process=this.process.bind(this),this.next_=this.next_.bind(this),this.backtrace=(new Error).stack,0===this.$.length&&this.report_(Error("No elements to test <root>"))},attachReporter:function(e){return new e(this),this},getCurrent_:function(){return this.stack[this.stack.length-1]},getCurrentModel_:function(){var e=this.getCurrent_().$;return e.model?e.model()||this.model:this.model},getCurrentCompo_:function(){var e=this.getCurrent_().$;return e.compo?e.compo()||this.compo:this.compo},getCurrentArgs_:function(){var e=this.getCurrent_();return ue(e.node,this.getCurrentModel_(),this.getCurrentCompo_())},getNext_:function(e){var t=this.getCurrent_();if(null==t)return null;if(e!==!1&&t.node.nodes)return this.stack.push({$:t.$,node:t.node.nodes[0]}),this.getCurrent_();for(this.stack.pop();this.stack.length>0;){var n=this.getCurrent_(),r=n.node.nodes,i=r.indexOf(t.node);if(i>=r.length-1)t=this.stack.pop();else{if(-1!==i)return this.stack.push({$:n.$,node:r[i+1]}),this.getCurrent_();console.error("Node not found"),t=this.stack.pop()}}return null},process:function(e){var t=this.getNext_(null==e);if(null==t)return this.emit("complete",this.errors),void(this.errors.length?this.reject(this.errors):this.resolve());var n=t.node.tagName,r=ye[n];if(r){var e=this.run_(r,[t]);return void this.next_(e)}if(-1!==be.indexOf(n))return void this.run_(me.$$run,[n,this,t,this.next_]);var i=_e[n];if(i)return void this.run_(i,[this,t,this.next_]);var o=this.getCurrentArgs_(),a=t.$;if("eq"===n&&1===o.length){var r=ye.__eq__,e=this.run_(r,[t]);return void this.next_(e)}if(ee(a)){var s=he(n);if(s){var u=this.run_(s,[a,n,o,t.node.attr]);return void this.next_(u)}return ie("Uknown test function: ",n),void this.next_()}var u=this.run_(ve,[a,n,o]);this.next_(u)},next_:function(e){this.emit("progress",this,this.getCurrent_().node,e),this.process(e)},run_:function(e,t,n){var r;try{e.apply(n,t)}catch(i){r=i}this.report_(r);var o=t[t.length-1];return null!=r&&"function"==typeof o&&o(r),r},report_:function(e){e=this.prepairError_(e),xe.report(e,this),this.emit(e?"fail":"success",e),e&&this.errors.push(e)},formatCurrentLine_:function(e){for(var n=this.getCurrent_().node,r="",i=n.parent;null!=i&&i.type!==t.Dom.FRAGMENT;)r+="  ",i=i.parent;return r+t.stringify({tagName:n.tagName,attr:n.attr,expression:n.expression},2).slice(0,-1)},prepairError_:function(e){if(null==e)return null;var n=this.getCurrent_().node,r=t.stringify(n,2),i=r.split("\n");return i.length>7&&(r=i.splice(0,6).join("\n")),Object.defineProperty(e,"stack",{value:r+"\n"+o.prepairStack(this.backtrace),writable:!0,enumerable:!0,configurable:!0}),e.generatedMessage=!1,e},ensureInDom_:function(){var e=this;this.ensureInDom_=function(){};for(var t=this.$.get(0).parentNode,n=!1;null!=t;){if(t.nodeType===Node.DOCUMENT_NODE){n=!0;break}t=t.parentNode}n||(this.$.appendTo("body"),this.done(function(){return e.$.remove()}))},assert:null,wrapAssertion_:function(){var e=this;if(null!=this.assert)return this.assert;var t=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.run_(t&&o[t]||o,n)}};this.assert=t();for(var n in o)"function"==typeof o[n]&&(this.assert[n]=t(n));return this.assert}}),Te;return function(){function e(e){var t=e.findAll(":utest"),n=t.length,i=new z;return 0===n?(r(!1,"No `:utest` components found"),i.reject()):(t.forEach(function(e){DomTest(e.$,e).done(function(){0===--n&&i.resolve()})}),i)}Te=function(n,r){if("string"!=typeof n)return e(n);var i=new Compo;return t.render(n,r,null,null,i),e(i)},t.registerHandler(":utest",t.Compo({render:function(e,t,r){r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(r=r.childNodes),this.$=n(r)}}))}(),i.create=i,i.compo=Te,i.ProgressReporters={Dom:we},i}),"undefined"!=typeof jQuery&&!function(e){e.simulate&&e.simulate.prototype.simulateKeyCombo||(!function(e,t){"use strict";function n(e){return u.test(Object.prototype.toString.call(e))}function r(e){for(var t=0;t<window.frames.length;t+=1)if(window.frames[t].document===e)return window.frames[t];return window}function i(t){var r,i,o=e(t);return n(o[0])?(i=o,r={left:0,top:0}):(i=e(o[0].ownerDocument||document),r=o.offset()),{x:r.left+o.outerWidth()/2-i.scrollLeft(),y:r.top+o.outerHeight()/2-i.scrollTop()}}function o(t){var r,i,o=e(t);return n(o[0])?(i=o,r={left:0,top:0}):(i=e(o[0].ownerDocument||document),r=o.offset()),{x:r.left-document.scrollLeft(),y:r.top-document.scrollTop()}}var a=/^key/,s=/^(?:mouse|contextmenu)|click/,u=/\[object (?:HTML)?Document\]/;e.fn.simulate=function(t,n){return this.each(function(){new e.simulate(this,t,n)})},e.simulate=function(t,n,r){var i=e.camelCase("simulate-"+n);this.target=t,this.options=r||{},this[i]?this[i]():this.simulateEvent(t,n,this.options)},e.extend(e.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}}),e.extend(e.simulate.prototype,{simulateEvent:function(e,t,n){var r=this.createEvent(t,n);this.dispatchEvent(e,t,r,n)},createEvent:function(e,t){return a.test(e)?this.keyEvent(e,t):s.test(e)?this.mouseEvent(e,t):void 0},mouseEvent:function(i,o){var a,s,u,l,c=n(this.target)?this.target:this.target.ownerDocument||document;return o=e.extend({bubbles:!0,cancelable:"mousemove"!==i,view:r(c),detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:t},o),c.createEvent?(a=c.createEvent("MouseEvents"),a.initMouseEvent(i,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget||c.body.parentNode),0===a.pageX&&0===a.pageY&&Object.defineProperty&&(s=n(a.relatedTarget)?a.relatedTarget:a.relatedTarget.ownerDocument||document,u=s.documentElement,l=s.body,Object.defineProperty(a,"pageX",{get:function(){return o.clientX+(u&&u.scrollLeft||l&&l.scrollLeft||0)-(u&&u.clientLeft||l&&l.clientLeft||0)}}),Object.defineProperty(a,"pageY",{get:function(){return o.clientY+(u&&u.scrollTop||l&&l.scrollTop||0)-(u&&u.clientTop||l&&l.clientTop||0)}}))):c.createEventObject&&(a=c.createEventObject(),e.extend(a,o),a.button={0:1,1:4,2:2}[a.button]||a.button),a},keyEvent:function(i,o){var a,s;if(o=e.extend({bubbles:!0,cancelable:!0,view:r(s),ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:t},o),s=n(this.target)?this.target:this.target.ownerDocument||document,
s.createEvent)try{a=s.createEvent("KeyEvents"),a.initKeyEvent(i,o.bubbles,o.cancelable,o.view,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode)}catch(u){a=s.createEvent("Events"),a.initEvent(i,o.bubbles,o.cancelable),e.extend(a,{view:o.view,ctrlKey:o.ctrlKey,altKey:o.altKey,shiftKey:o.shiftKey,metaKey:o.metaKey,keyCode:o.keyCode,charCode:o.charCode})}else s.createEventObject&&(a=s.createEventObject(),e.extend(a,o));return(/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||"[object Opera]"==={}.toString.call(window.opera))&&(a.keyCode=o.charCode>0?o.charCode:o.keyCode,a.charCode=t),a},dispatchEvent:function(t,n,r,i){i.jQueryTrigger===!0?e(t).trigger(e.extend({},r,i,{type:n})):t.dispatchEvent?t.dispatchEvent(r):t.fireEvent&&t.fireEvent("on"+n,r)},simulateFocus:function(){function t(){r=!0}var n,r=!1,i=e(this.target);i.bind("focus",t),i[0].focus(),r||(n=e.Event("focusin"),n.preventDefault(),i.trigger(n),i.triggerHandler("focus")),i.unbind("focus",t)},simulateBlur:function(){function t(){r=!0}var n,r=!1,i=e(this.target);i.bind("blur",t),i[0].blur(),setTimeout(function(){i[0].ownerDocument.activeElement===i[0]&&i[0].ownerDocument.body.focus(),r||(n=e.Event("focusout"),n.preventDefault(),i.trigger(n),i.triggerHandler("blur")),i.unbind("blur",t)},1)}}),e.extend(e.simulate.prototype,{simulateDrag:function(){var n=0,r=this.target,a=this.options,s="corner"===a.handle?o(r):i(r),u=Math.floor(s.x),l=Math.floor(s.y),c={clientX:u,clientY:l},f=a.dx||(a.x!==t?a.x-u:0),p=a.dy||(a.y!==t?a.y-l:0),d=a.moves||3;for(this.simulateEvent(r,"mousedown",c);d>n;n++)u+=f/d,l+=p/d,c={clientX:Math.round(u),clientY:Math.round(l)},this.simulateEvent(r.ownerDocument,"mousemove",c);e.contains(document,r)?(this.simulateEvent(r,"mouseup",c),this.simulateEvent(r,"click",c)):this.simulateEvent(document,"mouseup",c)}})}(jQuery),function(){function e(e){return"undefined"!=typeof e.value?"value":"undefined"!=typeof e.text?"text":"undefined"!=typeof e.textContent?"textContent":"innerText"}function t(){}function n(){}function r(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("StartToStart",t)<=0)return 0;if(e.compareEndPoints("StartToEnd",t)>=0)return n;for(var r=0;e.compareEndPoints("StartToStart",t)>0;++r,e.moveStart("character",-1));return r}function i(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("EndToEnd",t)>=0)return n;if(e.compareEndPoints("EndToStart",t)<=0)return 0;for(var r=0;e.compareEndPoints("EndToStart",t)>0;++r,e.moveEnd("character",-1));return r}function o(){}function a(){}function s(e,t){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;if(e===t)return null;for(;e.parentNode;){if(e=e.parentNode,e==t)return null;if(e.nextSibling)return e.nextSibling}return null}function u(e,t,n,r){if(!(0>=t)){var i=e[n?"startContainer":"endContainer"];for(3==i.nodeType&&(t+=e[n?"startOffset":"endOffset"]);i;){if(3==i.nodeType){var o=i.nodeValue.length;if(o>=t){if(e[n?"setStart":"setEnd"](i,t),t==o){for(var a=s(i,r);a&&3==a.nodeType&&0==a.nodeValue.length;a=s(a,r))e[n?"setStartAfter":"setEndAfter"](a);a&&1==a.nodeType&&"BR"==a.nodeName&&e[n?"setStartAfter":"setEndAfter"](a)}return}e[n?"setStartAfter":"setEndAfter"](i),t-=o}i=s(i,r)}}}function l(e,t){return e.compareBoundaryPoints(v,t)<=0?0:e.compareBoundaryPoints(m,t)>=0?t.toString().length:(e=e.cloneRange(),e.setEnd(t.endContainer,t.endOffset),t.toString().replace(/\r/g,"").length-e.toString().replace(/\r/g,"").length)}function c(e,t){return e.compareBoundaryPoints(y,t)>=0?t.toString().length:e.compareBoundaryPoints(g,t)<=0?0:(e=e.cloneRange(),e.setStart(t.startContainer,t.startOffset),e.toString().replace(/\r/g,"").length)}function f(){}var p="onfocusin"in document.createElement("input")?"focusin":"focus",d=document.createElement("div");d.appendChild(document.createTextNode("x-")),d.appendChild(document.createTextNode("x")),d.normalize();var h=3==d.firstChild.length;bililiteRange=function(t,r){function i(e){e&&9==e.which?s._nativeSelect(s._nativeRange(t.bililiteRangeSelection)):t.bililiteRangeSelection=s._nativeSelection()}var s;if(r)s=new f;else if(window.getSelection&&t.setSelectionRange)try{t.selectionStart,s=new o}catch(u){s=new f}else s=window.getSelection?new a:document.selection?new n:new f;if(s._el=t,s._doc=t.ownerDocument,s._win="defaultView"in s._doc?s._doc.defaultView:s._doc.parentWindow,s._textProp=e(t),s._bounds=[0,s.length()],!("bililiteRangeMouseDown"in s._doc)){var l={_el:s._doc};s._doc.bililiteRangeMouseDown=!1,bililiteRange.fn.listen.call(l,"mousedown",function(){s._doc.bililiteRangeMouseDown=!0}),bililiteRange.fn.listen.call(l,"mouseup",function(){s._doc.bililiteRangeMouseDown=!1})}if("bililiteRangeSelection"in t||(i(),"onbeforedeactivate"in t?s.listen("beforedeactivate",i):s.listen("mouseup",i).listen("keyup",i),s.listen(p,function(){s._doc.bililiteRangeMouseDown||s._nativeSelect(s._nativeRange(t.bililiteRangeSelection))})),!("oninput"in t)){var c=function(){s.dispatch({type:"input"})};s.listen("keyup",c),s.listen("cut",c),s.listen("paste",c),s.listen("drop",c),t.oninput="patched"}return s},t.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(e){if(bililiteRange.bounds[e])this._bounds=bililiteRange.bounds[e].apply(this);else{if(!e){var t=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return t[1]=Math.max(t[0],t[1]),t}this._bounds=e}return this},select:function(){var e=this._el.bililiteRangeSelection=this.bounds();return this._el===this._doc.activeElement&&this._nativeSelect(this._nativeRange(e)),this.dispatch({type:"select"}),this},text:function(e,t){if(arguments.length){{var n=this.bounds();this._el}return this.dispatch({type:"beforeinput",data:e,bounds:n}),this._nativeSetText(e,this._nativeRange(n)),"start"==t?this.bounds([n[0],n[0]]):"end"==t?this.bounds([n[0]+e.length,n[0]+e.length]):"all"==t&&this.bounds([n[0],n[0]+e.length]),this.dispatch({type:"input",data:e,bounds:n}),this}return this._nativeGetText(this._nativeRange(this.bounds())).replace(/\r/g,"")},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this},sendkeys:function(e){function t(e,t){/^{[^}]*}$/.test(t)&&(t=t.slice(1,-1));for(var n=0;n<t.length;++n){var r=t.charCodeAt(n);e.dispatch({type:"keypress",keyCode:r,which:r,charCode:r})}e.text(t,"end")}var n=this;return this.data().sendkeysOriginalText=this.text(),this.data().sendkeysBounds=void 0,e.replace(/{[^}]*}|[^{]+|{/g,function(e){(bililiteRange.sendkeys[e]||t)(n,e,t)}),this.bounds(this.data().sendkeysBounds),this.dispatch({type:"sendkeys",which:e}),this},top:function(){return this._nativeTop(this._nativeRange(this.bounds()))},scrollIntoView:function(e){var t=this.top();return(this._el.scrollTop>t||this._el.scrollTop+this._el.clientHeight<t)&&(e?e.call(this._el,t):this._el.scrollTop=t),this},wrap:function(e){return this._nativeWrap(e,this._nativeRange(this.bounds())),this},selection:function(e){return arguments.length?this.bounds("selection").text(e,"end").select():this.bounds("selection").text()},clone:function(){return bililiteRange(this._el).bounds(this.bounds())},all:function(e){return arguments.length?(this.dispatch({type:"beforeinput",data:e}),this._el[this._textProp]=e,this.dispatch({type:"input",data:e}),this):this._el[this._textProp].replace(/\r/g,"")},element:function(){return this._el},dispatch:function(e){e=e||{};var t=document.createEvent?document.createEvent("CustomEvent"):this._doc.createEventObject();t.initCustomEvent&&t.initCustomEvent(e.type,!!e.bubbles,!!e.cancelable,e.detail);for(var n in e)t[n]=e[n];var r=this._el;return setTimeout(function(){try{r.dispatchEvent?r.dispatchEvent(t):r.fireEvent("on"+e.type,document.createEventObject())}catch(n){var i=r["listen"+e.type];if(i)for(var o=0;o<i.length;++o)i[o].call(r,t)}},0),this},listen:function(e,t){var n=this._el;if(n.addEventListener)n.addEventListener(e,t);else{n.attachEvent("on"+e,t);var r=n["listen"+e]=n["listen"+e]||[];r.push(t)}return this},dontlisten:function(e,t){var n=this._el;if(n.removeEventListener)n.removeEventListener(e,t);else try{n.detachEvent("on"+e,t)}catch(r){var i=n["listen"+e];if(i)for(var o=0;o<i.length;++o)i[o]===t&&(i[o]=function(){})}return this}},bililiteRange.fn=t.prototype,bililiteRange.extend=function(e){for(fn in e)t.prototype[fn]=e[fn]},bililiteRange.bounds={all:function(){return[0,this.length()]},start:function(){return[0,0]},end:function(){return[this.length(),this.length()]},selection:function(){return this._el===this._doc.activeElement?(this.bounds("all"),this._nativeSelection()):this._el.bililiteRangeSelection}},bililiteRange.sendkeys={"{enter}":function(e){simplechar(e,"\n"),e.insertEOL()},"{tab}":function(e,t,n){n(e,"	")},"{newline}":function(e,t,n){n(e,"\n")},"{backspace}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0]-1,t[0]]),e.text("","end")},"{del}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0],t[0]+1]),e.text("","end")},"{rightarrow}":function(e){var t=e.bounds();t[0]==t[1]&&++t[1],e.bounds([t[1],t[1]])},"{leftarrow}":function(e){var t=e.bounds();t[0]==t[1]&&--t[0],e.bounds([t[0],t[0]])},"{selectall}":function(e){e.bounds("all")},"{selection}":function(e){for(var t=e.data().sendkeysOriginalText,n=0;n<t.length;++n){var r=t.charCodeAt(n);e.dispatch({type:"keypress",keyCode:r,which:r,charCode:r})}e.text(t,"end")},"{mark}":function(e){e.data().sendkeysBounds=e.bounds()}},bililiteRange.sendkeys["{Enter}"]=bililiteRange.sendkeys["{enter}"],bililiteRange.sendkeys["{Backspace}"]=bililiteRange.sendkeys["{backspace}"],bililiteRange.sendkeys["{Delete}"]=bililiteRange.sendkeys["{del}"],bililiteRange.sendkeys["{ArrowRight}"]=bililiteRange.sendkeys["{rightarrow}"],bililiteRange.sendkeys["{ArrowLeft}"]=bililiteRange.sendkeys["{leftarrow}"],n.prototype=new t,n.prototype._nativeRange=function(e){var t;return"INPUT"==this._el.tagName?t=this._el.createTextRange():(t=this._doc.body.createTextRange(),t.moveToElementText(this._el)),e&&(e[1]<0&&(e[1]=0),e[0]>this.length()&&(e[0]=this.length()),e[1]<t.text.replace(/\r/g,"").length&&(t.moveEnd("character",-1),t.moveEnd("character",e[1]-t.text.replace(/\r/g,"").length)),e[0]>0&&t.moveStart("character",e[0])),t},n.prototype._nativeSelect=function(e){e.select()},n.prototype._nativeSelection=function(){var e=this._nativeRange(),t=this.length(),n=this._doc.selection.createRange();try{return[r(n,e),i(n,e)]}catch(o){return n.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[t,t]}},n.prototype._nativeGetText=function(e){return e.text},n.prototype._nativeSetText=function(e,t){t.text=e},n.prototype._nativeEOL=function(){"value"in this._el?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("\n<br/>")},n.prototype._nativeTop=function(e){var t=this._nativeRange([0,0]);return e.boundingTop-t.boundingTop},n.prototype._nativeWrap=function(e,t){var n=document.createElement("div");n.appendChild(e);var r=n.innerHTML.replace("><",">"+t.htmlText+"<");t.pasteHTML(r)},o.prototype=new t,o.prototype._nativeRange=function(e){return e||[0,this.length()]},o.prototype._nativeSelect=function(e){this._el.setSelectionRange(e[0],e[1])},o.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},o.prototype._nativeGetText=function(e){return this._el.value.substring(e[0],e[1])},o.prototype._nativeSetText=function(e,t){var n=this._el.value;this._el.value=n.substring(0,t[0])+e+n.substring(t[1])},o.prototype._nativeEOL=function(){this.text("\n")},o.prototype._nativeTop=function(e){var t=this._el.cloneNode(!0);t.style.visibility="hidden",t.style.position="absolute",this._el.parentNode.insertBefore(t,this._el),t.style.height="1px",t.value=this._el.value.slice(0,e[0]);var n=t.scrollHeight;return t.value="X",n-=t.scrollHeight,t.parentNode.removeChild(t),n},o.prototype._nativeWrap=function(){throw new Error("Cannot wrap in a text element")},a.prototype=new t,a.prototype._nativeRange=function(e){var t=this._doc.createRange();return t.selectNodeContents(this._el),e&&(u(t,e[0],!0,this._el),t.collapse(!0),u(t,e[1]-e[0],!1,this._el)),t},a.prototype._nativeSelect=function(e){this._win.getSelection().removeAllRanges(),this._win.getSelection().addRange(e)},a.prototype._nativeSelection=function(){var e=this._nativeRange();if(0==this._win.getSelection().rangeCount)return[this.length(),this.length()];var t=this._win.getSelection().getRangeAt(0);return[l(t,e),c(t,e)]},a.prototype._nativeGetText=function(e){return String.prototype.slice.apply(this._el.textContent,this.bounds())},a.prototype._nativeSetText=function(e,t){t.deleteContents(),t.insertNode(this._doc.createTextNode(e)),h&&this._el.normalize()},a.prototype._nativeEOL=function(){var e=this._nativeRange(this.bounds());e.deleteContents();var t=this._doc.createElement("br");t.setAttribute("_moz_dirty",""),e.insertNode(t),e.insertNode(this._doc.createTextNode("\n")),e.collapse(!1)},a.prototype._nativeTop=function(e){if(0==this.length)return 0;if(""==e.toString()){var t=this._doc.createTextNode("X");e.insertNode(t)}var n=this._nativeRange([0,1]),r=e.getBoundingClientRect().top-n.getBoundingClientRect().top;return t&&t.parentNode.removeChild(t),r},a.prototype._nativeWrap=function(e,t){t.surroundContents(e)};var v=0,g=1,y=2,m=3;f.prototype=new t,f.prototype._nativeRange=function(e){return e||[0,this.length()]},f.prototype._nativeSelect=function(e){},f.prototype._nativeSelection=function(){return[0,0]},f.prototype._nativeGetText=function(e){return this._el[this._textProp].substring(e[0],e[1])},f.prototype._nativeSetText=function(e,t){var n=this._el[this._textProp];this._el[this._textProp]=n.substring(0,t[0])+e+n.substring(t[1])},f.prototype._nativeEOL=function(){this.text("\n")},f.prototype._nativeTop=function(){return 0},f.prototype._nativeWrap=function(){throw new Error("Wrapping not implemented")};var _=[];bililiteRange.fn.data=function(){var e=this.element().bililiteRangeData;return void 0==e&&(e=this.element().bililiteRangeData=_.length,_[e]=new b(this)),_[e]};try{Object.defineProperty({},"foo",{});var b=function(e){Object.defineProperty(this,"values",{value:{}}),Object.defineProperty(this,"sourceRange",{value:e}),Object.defineProperty(this,"toJSON",{value:function(){var e={};for(var t in b.prototype)t in this.values&&(e[t]=this.values[t]);return e}}),Object.defineProperty(this,"all",{get:function(){var e={};for(var t in b.prototype)e[t]=this[t];return e}})};b.prototype={},Object.defineProperty(b.prototype,"values",{value:{}}),Object.defineProperty(b.prototype,"monitored",{value:{}}),bililiteRange.data=function(e,t){t=t||{};var n=Object.getOwnPropertyDescriptor(b.prototype,e)||{};"enumerable"in t&&(n.enumerable=!!t.enumerable),"enumerable"in n||(n.enumerable=!0),"value"in t&&(b.prototype.values[e]=t.value),"monitored"in t&&(b.prototype.monitored[e]=t.monitored),n.configurable=!0,n.get=function(){return e in this.values?this.values[e]:b.prototype.values[e]},n.set=function(t){this.values[e]=t,b.prototype.monitored[e]&&this.sourceRange.dispatch({type:"bililiteRangeData",bubbles:!0,detail:{name:e,value:t}})},Object.defineProperty(b.prototype,e,n)}}catch(E){b=function(e){this.sourceRange=e},b.prototype={},bililiteRange.data=function(e,t){"value"in t&&(b.prototype[e]=t.value)}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)i in t&&e.call(r,t[i],i,t)}),function(e){"use strict";var t=e.simulate.prototype.mouseEvent,n=/\[object (?:HTML)?Document\]/;e.simulate.prototype.mouseEvent=function(r,i){if(i.pageX||i.pageY){var o=n.test(Object.prototype.toString.call(this.target))?this.target:this.target.ownerDocument||document;i.clientX=(i.pageX||0)-e(o).scrollLeft(),i.clientY=(i.pageY||0)-e(o).scrollTop()}return t.apply(this,[r,i])}}(jQuery),function(e,t){"use strict";function n(t){return c.test(Object.prototype.toString.call(e(t)[0]))}function r(t,n){var r;if(e.isFunction(n)){for(r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}for(r=0;r<t.length;r+=1)if(t[r])return t[r];return null}function i(t){var r,i=e(t);return r=n(i[0])?{left:0,top:0}:i.offset(),{x:r.left+i.outerWidth()/2,y:r.top+i.outerHeight()/2}}function o(t,r,i){var o;return o=e(n(r)?r:i||document),"number"==typeof t&&"number"==typeof r?{x:t-o.scrollLeft(),y:r-o.scrollTop()}:"object"==typeof t&&t.pageX&&t.pageY?{clientX:t.pageX-o.scrollLeft(),clientY:t.pageY-o.scrollTop()}:void 0}function a(t,r,i){var o;if(o=n(r)?r:i||document,!o.elementFromPoint)return null;var s=t,u=r;if("object"==typeof t&&(t.clientX||t.clientY)&&(s=t.clientX||0,u=t.clientY||0),a.prototype.check){var l,c;(l=e(o).scrollTop())>0?(c=o.elementFromPoint(0,l+e(window).height()-1),null!==c&&"HTML"===c.tagName.toUpperCase()&&(c=null),a.prototype.nativeUsesRelative=null===c):(l=e(o).scrollLeft())>0&&(c=o.elementFromPoint(l+e(window).width()-1,0),null!==c&&"HTML"===c.tagName.toUpperCase()&&(c=null),a.prototype.nativeUsesRelative=null===c),a.prototype.check=0>=l}return a.prototype.nativeUsesRelative||(s+=e(o).scrollLeft(),u+=e(o).scrollTop()),o.elementFromPoint(s,u)}function s(t,n){var r=n||{};e(t).trigger({type:"simulate-drag"}),e.isFunction(r.callback)&&r.callback.apply(t)}function u(t,i,u,c,f){function p(){x.x+=g.x,x.y+=g.y;var e={pageX:x.x,pageY:x.y};if(m.shaky&&(m.shaky===!0||!isNaN(parseInt(m.shaky,10)))){var n=m.shaky===!0?1:parseInt(m.shaky,10);e.pageX+=Math.floor(Math.random()*(2*n+1)-n),e.pageY+=Math.floor(Math.random()*(2*n+1)-n)}var r=o(e,y),s=a(r,y)||i;t.simulateEvent(s,"mousemove",{pageX:Math.round(e.pageX),pageY:Math.round(e.pageY)})}function d(){var e=l()-E;if(e>=C)if(v>P)p(),P+=1,E=l(),setTimeout(d,C);else{var n={pageX:Math.round(u.x+c.dx),pageY:Math.round(u.y+c.dy)},r=o(n,y),h=a(r,y)||i;t.simulateEvent(h,"mousemove",n),s(i,f)}else setTimeout(d,C-e)}var h,v,g,y=r([i,i.ownerDocument],n)||document,m=f.interpolation,_=Math.sqrt(Math.pow(c.dx,2)+Math.pow(c.dy,2));if(m.stepWidth){h=parseInt(m.stepWidth,10),v=Math.floor(_/h)-1;var b=h/_;g={x:c.dx*b,y:c.dy*b}}else v=parseInt(m.stepCount,10),h=_/(v+1),g={x:c.dx/(v+1),y:c.dy/(v+1)};var E,x=e.extend({},u);if(!m.stepDelay&&!m.duration||m.stepDelay<=0&&m.duration<=0){for(var w=0;v>w;w+=1)p();var k={pageX:Math.round(u.x+c.dx),pageY:Math.round(u.y+c.dy)},T=o(k,y),S=a(T,y)||i;t.simulateEvent(S,"mousemove",k),s(i,f)}else{var C=parseInt(m.stepDelay,10)||Math.ceil(parseInt(m.duration,10)/(v+1)),P=0;E=l(),setTimeout(d,C)}}e.fn.simulate=function(t,n){switch(t){case"drag":case"drop":case"drag-n-drop":var r=this.first();return new e.simulate(r[0],t,n),r;default:return this.each(function(){new e.simulate(this,t,n)})}};var l=Date.now||function(){return(new Date).getTime()},c=/\[object (?:HTML)?Document\]/;a.prototype.check=!0,a.prototype.nativeUsesRelative=!0,e.simulate.activeDrag=function(){return e.simulate._activeDrag?e.extend(!0,{},e.simulate._activeDrag):t},e.extend(e.simulate.prototype,{simulateDrag:function(){var l,c=this,f=c.target,p=e.extend({dx:0,dy:0,dragTarget:t,clickToDrag:!1,eventProps:{},interpolation:{stepWidth:0,stepCount:0,stepDelay:0,duration:0,shaky:!1},callback:t},this.options),d=e.simulate._activeDrag&&e.simulate._activeDrag.dragElement===f;l=d?e.simulate._activeDrag.dragStart:i(f);var h,v,g=Math.round(l.x),y=Math.round(l.y),m={pageX:g,pageY:y};if(p.dragTarget){var _=i(p.dragTarget);h=Math.round(_.x-l.x),v=Math.round(_.y-l.y)}else h=p.dx||0,v=p.dy||0;if(d?(e.simulate._activeDrag.dragDistance.x+=h,e.simulate._activeDrag.dragDistance.y+=v,m={pageX:Math.round(g+e.simulate._activeDrag.dragDistance.x),pageY:Math.round(y+e.simulate._activeDrag.dragDistance.y)}):(e.simulate._activeDrag&&e(e.simulate._activeDrag.dragElement).simulate("drop"),e.extend(p.eventProps,m),c.simulateEvent(f,"mousedown",p.eventProps),p.clickToDrag===!0&&(c.simulateEvent(f,"mouseup",p.eventProps),c.simulateEvent(f,"click",p.eventProps)),e(f).add(f.ownerDocument).one("mouseup",function(){e.simulate._activeDrag=t}),e.extend(e.simulate,{_activeDrag:{dragElement:f,dragStart:{x:g,y:y},dragDistance:{x:h,y:v}}}),m={pageX:Math.round(g+h),pageY:Math.round(y+v)}),0!==h||0!==v)if(p.interpolation&&(p.interpolation.stepCount||p.interpolation.stepWidth))u(c,f,{x:g,y:y},{dx:h,dy:v},p);else{var b=r([f,f.ownerDocument],n)||document,E=o(m,b),x=a(E,b)||f;e.extend(p.eventProps,m),c.simulateEvent(x,"mousemove",p.eventProps),s(f,p)}else s(f,p)},simulateDrop:function(){var s=this,u=this.target,l=e.simulate._activeDrag,c=e.extend({clickToDrop:!1,eventProps:{},callback:t},s.options),f=!0,p=i(u),d=Math.round(p.x),h=Math.round(p.y),v={pageX:d,pageY:h},g=(l?r([l.dragElement,l.dragElement.ownerDocument],n):r([u,u.ownerDocument],n))||document,y=o(v,g),m=a(y,g);l&&(l.dragElement===u||n(u))&&(d=Math.round(l.dragStart.x+l.dragDistance.x),h=Math.round(l.dragStart.y+l.dragDistance.y),v={pageX:d,pageY:h},y=o(v,g),m=a(y,g),f=!1),m||(m=l?l.dragElement:u),e.extend(c.eventProps,v),f===!0&&s.simulateEvent(m,"mousemove",c.eventProps),c.clickToDrop&&s.simulateEvent(m,"mousedown",c.eventProps),this.simulateEvent(m,"mouseup",c.eventProps),c.clickToDrop&&s.simulateEvent(m,"click",c.eventProps),e.simulate._activeDrag=t,e(m).trigger({type:"simulate-drop"}),e.isFunction(c.callback)&&c.callback.apply(m)},simulateDragNDrop:function(){var n=this,r=this.target,i=e.extend({dragTarget:t,dropTarget:t},n.options),o=(i.dragTarget||i.dx||i.dy?i.dropTarget:r)||r;e(r).simulate("drag",e.extend({},i,{dragTarget:i.dragTarget||(i.dx||i.dy?t:i.dropTarget),callback:function(){e(o).simulate("drop",i)}}))}})}(jQuery),function(e,t){"use strict";var n={SHIFT:16,CONTROL:17,ALTERNATIVE:18,META:91,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ENTER:13,TABULATOR:9,ESCAPE:27,BACKSPACE:8,INSERT:45,DELETE:46,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34};n.CTRL=n.CONTROL,n.ALT=n.ALTERNATIVE,n.COMMAND=n.META,n.TAB=n.TABULATOR,n.ESC=n.ESCAPE,e.extend(e.simulate.prototype,{simulateKeyCombo:function(){var r,i=e(this.target),o=e.extend({combo:"",eventProps:{},eventsOnly:!1},this.options),a=o.combo,s=a.split(/(\+)/),u=!1,l=[];if(0!==a.length){for(s=e.grep(s,function(e){return""!==e}),r=0;r<s.length;r+=1){var c=s[r],f=c.toLowerCase(),p=c.toUpperCase().replace("-","_");if(u){if("+"!==c)throw'Syntax error: expected "+"';u=!1}else{var d;if(c.length>1){if(d=n[p],d===t)throw'Syntax error: unknown special key "'+c+'" (forgot "+" between keys?)';switch(d){case n.CONTROL:case n.ALT:case n.SHIFT:case n.META:o.eventProps[f+"Key"]=!0}l.unshift(d),o.eventProps.keyCode=d,o.eventProps.which=d,o.eventProps.charCode=0,i.simulate("keydown",o.eventProps)}else d=e.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(c),l.unshift(d),o.eventProps.keyCode=d,o.eventProps.which=d,o.eventProps.charCode=t,i.simulate("keydown",o.eventProps),o.eventProps.shiftKey&&(c=c.toUpperCase()),o.eventProps.keyCode=c.charCodeAt(0),o.eventProps.charCode=o.eventProps.keyCode,o.eventProps.which=o.eventProps.keyCode,i.simulate("keypress",o.eventProps),o.eventsOnly===!0||o.eventProps.ctrlKey||o.eventProps.altKey||o.eventProps.metaKey||i.simulate("key-sequence",{sequence:c,triggerKeyEvents:!1});u=!0}}if(!u)throw'Syntax error: expected key (trailing "+"?)';for(o.eventProps.charCode=t,r=0;r<l.length;r+=1){switch(o.eventProps.keyCode=l[r],o.eventProps.which=l[r],o.eventProps.keyCode){case n.ALT:o.eventProps.altKey=!1;break;case n.SHIFT:o.eventProps.shiftKey=!1;break;case n.CONTROL:o.eventProps.ctrlKey=!1;break;case n.META:o.eventProps.metaKey=!1}i.simulate("keyup",o.eventProps)}}}})}(jQuery),function(e,t){"use strict";e.simulate.prototype.quirks=e.simulate.prototype.quirks||{},e.extend(e.simulate.prototype.quirks,{delayedSpacesInNonInputGlitchToEnd:t}),e.extend(e.simulate.prototype,{simulateKeySequence:function(){function n(){o.trigger({type:"simulate-keySequence",sequence:s}),e.isFunction(a.callback)&&a.callback.apply(i,[{sequence:s}])}function r(){var t=f()-p;if(t>=a.delay){var i=c.exec(s);if(null!==i){var o=i[0];(u[o]||e.simulate.prototype.simulateKeySequence.defaults[o]||e.simulate.prototype.simulateKeySequence.defaults.simplechar)(l,o,a),setTimeout(r,a.delay)}else n();p=f()}else setTimeout(r,a.delay-t)}var i=this.target,o=e(i),a=e.extend({sequence:"",triggerKeyEvents:!0,eventProps:{},delay:0,callback:t},this.options),s=a.sequence;a.delay=parseInt(a.delay,10);var u={};e.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd&&!o.is("input,textarea")&&e.extend(u,{" ":function(n,r,i){var o=e.extend({},i,{triggerKeyEvents:!1,delay:0,callback:t});e.simulate.prototype.simulateKeySequence.defaults.simplechar(n," ",o),e.simulate.prototype.simulateKeySequence.defaults["{leftarrow}"](n,r,o),e.simulate.prototype.simulateKeySequence.defaults.simplechar(n,r,i),e.simulate.prototype.simulateKeySequence.defaults["{del}"](n,r,o)}}),e.extend(u,a,o.data("simulate-keySequence"));var l=e.data(i,"simulate-keySequence.selection");if(l||(l=bililiteRange(i).bounds("selection"),e.data(i,"simulate-keySequence.selection",l),o.bind("mouseup.simulate-keySequence",function(){e.data(i,"simulate-keySequence.selection").bounds("selection")}).bind("keyup.simulate-keySequence",function(t){9===t.which?e.data(i,"simulate-keySequence.selection").select():e.data(i,"simulate-keySequence.selection").bounds("selection")})),o.focus(),"undefined"!=typeof s)if(s=s.replace(/\n/g,"{enter}"),!a.delay||a.delay<=0)s.replace(/\{[^}]*\}|[^{]+/g,function(t){(u[t]||e.simulate.prototype.simulateKeySequence.defaults[t]||e.simulate.prototype.simulateKeySequence.defaults.simplechar)(l,t,a)}),n();else{var c=/\{[^}]*\}|[^{]/g,f=Date.now||function(){return(new Date).getTime()},p=f();r()}}}),e.extend(e.simulate.prototype.simulateKeySequence.prototype,{IEKeyCodeTable:{33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,59:186,58:186,61:187,43:187,44:188,60:188,45:189,95:189,46:190,62:190,47:191,63:191,96:192,126:192,91:219,123:219,92:220,124:220,93:221,125:221,39:222,34:222},charToKeyCode:function(n){var r=e.simulate.prototype.simulateKeySequence.prototype.IEKeyCodeTable,i=n.charCodeAt(0);return i>=64&&90>=i||i>=48&&57>=i?i:i>=97&&122>=i?n.toUpperCase().charCodeAt(0):r[i]!==t?r[i]:i}}),e.simulate.prototype.simulateKeySequence.defaults={simplechar:function(t,n,r){if(t.text(n,"end"),t.select(),r.triggerKeyEvents)for(var i=0;i<n.length;i+=1){var o=n.charCodeAt(i),a=e.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(n.charAt(i));e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:a})),e(t._el).simulate("keypress",e.extend({},r.eventProps,{keyCode:o,which:o,charCode:o})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:a}))}},"{{}":function(t,n,r){e.simulate.prototype.simulateKeySequence.defaults.simplechar(t,"{",r)},"{enter}":function(t,n,r){t.insertEOL(),t.select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:13})),e(t._el).simulate("keypress",e.extend({},r.eventProps,{keyCode:13,which:13,charCode:13})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:13})))},"{backspace}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&t.bounds([i[0]-1,i[0]]),t.text("","end"),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:8})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:8})))},"{del}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&t.bounds([i[0],i[0]+1]),t.text("","end"),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:46})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:46})))},"{rightarrow}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&(i[1]+=1),t.bounds([i[1],i[1]]).select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:39})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:39})))},"{leftarrow}":function(t,n,r){var i=t.bounds();i[0]===i[1]&&(i[0]-=1),t.bounds([i[0],i[0]]).select(),r.triggerKeyEvents===!0&&(e(t._el).simulate("keydown",e.extend({},r.eventProps,{keyCode:37})),e(t._el).simulate("keyup",e.extend({},r.eventProps,{keyCode:37})))},"{selectall}":function(e){e.bounds("all").select()}},e.simulate.ext_disableQuirkDetection!==!0&&e(document).ready(function(){var t=e("<div/>").css({height:1,width:1,position:"absolute",left:-1e3,top:-1e3}).appendTo("body");t.simulate("key-sequence",{sequence:"   ",delay:1,callback:function(){e.simulate.prototype.quirks.delayedSpacesInNonInputGlitchToEnd="   "===t.text(),t.remove()}})})}(jQuery))}(jQuery);
//# sourceMappingURL=domtest.min.js.map